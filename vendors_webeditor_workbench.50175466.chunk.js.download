(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,function(e,t,n){"use strict";e.exports=n(528)},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vsls=n(540),t.contactProtocol=n(549)},,,function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(134);t.Connection=r.Connection;var s=n(226);t.LiveShareConnection=s.LiveShareConnection;var o=n(587);t.VSCodeConnection=o.VSCodeConnection;var a=n(590);t.CodespaceConnection=a.CodespaceConnection;var c=n(591);t.LiveShareJointConnection=c.LiveShareJointConnection;var l=n(592);t.VSCodeJointConnection=l.VSCodeJointConnection;var u=n(356);t.ConnectionHub=u.ConnectionHub;var h=n(135);t.errorToConnectionError=h.errorToConnectionError;var d=n(354);t.getVSCodeServerSessionName=d.getVSCodeServerSessionName;var p=n(355);t.isVSCodeServerSession=p.isVSCodeServerSession;var f=n(595);t.isCodespacesInternalSession=f.isCodespacesInternalSession;var g=n(353);t.vscodeServerHostRPCService=g.vscodeServerHostRPCService;var m=n(351);t.TConnectionTypes=m.TConnectionTypes,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(596));const y=i(n(597));t.mocks=y;var v=n(241);t.PerformanceEventIds=v.PerformanceEventIds;var S=n(352);t.PerformanceGroupIds=S.PerformanceGroupIds;var w=n(180);t.VSCODE_SERVER_PORT_NAME=w.VSCODE_SERVER_PORT_NAME},,,,,,,,function(e,t,n){var i;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var s=typeof i;if("string"===s||"number"===s)e.push(i);else if(Array.isArray(i)){if(i.length){var o=r.apply(null,i);o&&e.push(o)}}else if("object"===s)if(i.toString===Object.prototype.toString)for(var a in i)n.call(i,a)&&i[a]&&e.push(a);else e.push(i.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.SshReconnectError=t.SshConnectionError=t.SshChannelError=t.BigInt=t.DerWriter=t.DerReader=t.formatBuffer=t.SshDataWriter=t.SshDataReader=t.ECDsa=t.Rsa=t.Encryption=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=t.SshAlgorithms=t.CommandRequestMessage=t.ChannelRequestType=t.ChannelRequestMessage=t.ChannelOpenMessage=t.SshChannelOpenFailureReason=t.SshReconnectFailureReason=t.SshDisconnectReason=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.DebugMessage=t.SessionRequestMessage=t.SshMessage=t.SshChannelClosedEventArgs=t.SshSessionClosedEventArgs=t.SshChannelOpeningEventArgs=t.SshRequestEventArgs=t.SshAuthenticatingEventArgs=t.SshAuthenticationType=t.serviceActivation=t.SshService=t.SshRpcMessageStream=t.WebSocketStream=t.NodeStream=t.BaseStream=t.SshStream=t.SshChannel=t.SshServerSession=t.SshClientSession=t.SshSession=t.SshVersionInfo=t.SshProtocolExtensionNames=t.SshSessionConfiguration=void 0,t.SshTraceEventIds=t.TraceLevel=t.MultiChannelStream=t.SessionContour=t.ChannelMetrics=t.SessionMetrics=t.Queue=t.Semaphore=t.PromiseCompletionSource=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=void 0;var i=n(137);Object.defineProperty(t,"SshSessionConfiguration",{enumerable:!0,get:function(){return i.SshSessionConfiguration}}),Object.defineProperty(t,"SshProtocolExtensionNames",{enumerable:!0,get:function(){return i.SshProtocolExtensionNames}});var r=n(342);Object.defineProperty(t,"SshVersionInfo",{enumerable:!0,get:function(){return r.SshVersionInfo}});var s=n(139);Object.defineProperty(t,"SshSession",{enumerable:!0,get:function(){return s.SshSession}});var o=n(567);Object.defineProperty(t,"SshClientSession",{enumerable:!0,get:function(){return o.SshClientSession}});var a=n(568);Object.defineProperty(t,"SshServerSession",{enumerable:!0,get:function(){return a.SshServerSession}});var c=n(236);Object.defineProperty(t,"SshChannel",{enumerable:!0,get:function(){return c.SshChannel}});var l=n(347);Object.defineProperty(t,"SshStream",{enumerable:!0,get:function(){return l.SshStream}});var u=n(569);Object.defineProperty(t,"BaseStream",{enumerable:!0,get:function(){return u.BaseStream}}),Object.defineProperty(t,"NodeStream",{enumerable:!0,get:function(){return u.NodeStream}}),Object.defineProperty(t,"WebSocketStream",{enumerable:!0,get:function(){return u.WebSocketStream}});var h=n(570);Object.defineProperty(t,"SshRpcMessageStream",{enumerable:!0,get:function(){return h.SshRpcMessageStream}});var d=n(179);Object.defineProperty(t,"SshService",{enumerable:!0,get:function(){return d.SshService}});var p=n(120);Object.defineProperty(t,"serviceActivation",{enumerable:!0,get:function(){return p.serviceActivation}});var f=n(240);Object.defineProperty(t,"SshAuthenticationType",{enumerable:!0,get:function(){return f.SshAuthenticationType}}),Object.defineProperty(t,"SshAuthenticatingEventArgs",{enumerable:!0,get:function(){return f.SshAuthenticatingEventArgs}});var g=n(237);Object.defineProperty(t,"SshRequestEventArgs",{enumerable:!0,get:function(){return g.SshRequestEventArgs}});var m=n(343);Object.defineProperty(t,"SshChannelOpeningEventArgs",{enumerable:!0,get:function(){return m.SshChannelOpeningEventArgs}});var y=n(346);Object.defineProperty(t,"SshSessionClosedEventArgs",{enumerable:!0,get:function(){return y.SshSessionClosedEventArgs}});var v=n(341);Object.defineProperty(t,"SshChannelClosedEventArgs",{enumerable:!0,get:function(){return v.SshChannelClosedEventArgs}});var S=n(77);Object.defineProperty(t,"SshMessage",{enumerable:!0,get:function(){return S.SshMessage}});var w=n(60);Object.defineProperty(t,"SessionRequestMessage",{enumerable:!0,get:function(){return w.SessionRequestMessage}}),Object.defineProperty(t,"DebugMessage",{enumerable:!0,get:function(){return w.DebugMessage}}),Object.defineProperty(t,"SessionRequestSuccessMessage",{enumerable:!0,get:function(){return w.SessionRequestSuccessMessage}}),Object.defineProperty(t,"SessionRequestFailureMessage",{enumerable:!0,get:function(){return w.SessionRequestFailureMessage}}),Object.defineProperty(t,"SshDisconnectReason",{enumerable:!0,get:function(){return w.SshDisconnectReason}}),Object.defineProperty(t,"SshReconnectFailureReason",{enumerable:!0,get:function(){return w.SshReconnectFailureReason}});var C=n(90);Object.defineProperty(t,"SshChannelOpenFailureReason",{enumerable:!0,get:function(){return C.SshChannelOpenFailureReason}}),Object.defineProperty(t,"ChannelOpenMessage",{enumerable:!0,get:function(){return C.ChannelOpenMessage}}),Object.defineProperty(t,"ChannelRequestMessage",{enumerable:!0,get:function(){return C.ChannelRequestMessage}}),Object.defineProperty(t,"ChannelRequestType",{enumerable:!0,get:function(){return C.ChannelRequestType}}),Object.defineProperty(t,"CommandRequestMessage",{enumerable:!0,get:function(){return C.CommandRequestMessage}});var b=n(119);Object.defineProperty(t,"SshAlgorithms",{enumerable:!0,get:function(){return b.SshAlgorithms}}),Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return b.KeyExchangeAlgorithm}}),Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return b.PublicKeyAlgorithm}}),Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return b.EncryptionAlgorithm}}),Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return b.HmacAlgorithm}}),Object.defineProperty(t,"Encryption",{enumerable:!0,get:function(){return b.Encryption}}),Object.defineProperty(t,"Rsa",{enumerable:!0,get:function(){return b.Rsa}}),Object.defineProperty(t,"ECDsa",{enumerable:!0,get:function(){return b.ECDsa}});var E=n(38);Object.defineProperty(t,"SshDataReader",{enumerable:!0,get:function(){return E.SshDataReader}}),Object.defineProperty(t,"SshDataWriter",{enumerable:!0,get:function(){return E.SshDataWriter}}),Object.defineProperty(t,"formatBuffer",{enumerable:!0,get:function(){return E.formatBuffer}});var k=n(235);Object.defineProperty(t,"DerReader",{enumerable:!0,get:function(){return k.DerReader}}),Object.defineProperty(t,"DerWriter",{enumerable:!0,get:function(){return k.DerWriter}});var R=n(58);Object.defineProperty(t,"BigInt",{enumerable:!0,get:function(){return R.BigInt}});var x=n(47);Object.defineProperty(t,"SshChannelError",{enumerable:!0,get:function(){return x.SshChannelError}}),Object.defineProperty(t,"SshConnectionError",{enumerable:!0,get:function(){return x.SshConnectionError}}),Object.defineProperty(t,"SshReconnectError",{enumerable:!0,get:function(){return x.SshReconnectError}}),Object.defineProperty(t,"ObjectDisposedError",{enumerable:!0,get:function(){return x.ObjectDisposedError}});var P=n(92);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return P.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return P.CancellationTokenSource}}),Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return P.CancellationError}});var T=n(91);Object.defineProperty(t,"PromiseCompletionSource",{enumerable:!0,get:function(){return T.PromiseCompletionSource}});var M=n(140);Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return M.Semaphore}});var A=n(178);Object.defineProperty(t,"Queue",{enumerable:!0,get:function(){return A.Queue}});var O=n(345);Object.defineProperty(t,"SessionMetrics",{enumerable:!0,get:function(){return O.SessionMetrics}});var N=n(340);Object.defineProperty(t,"ChannelMetrics",{enumerable:!0,get:function(){return N.ChannelMetrics}});var I=n(571);Object.defineProperty(t,"SessionContour",{enumerable:!0,get:function(){return I.SessionContour}});var F=n(572);Object.defineProperty(t,"MultiChannelStream",{enumerable:!0,get:function(){return F.MultiChannelStream}});var _=n(59);Object.defineProperty(t,"TraceLevel",{enumerable:!0,get:function(){return _.TraceLevel}}),Object.defineProperty(t,"SshTraceEventIds",{enumerable:!0,get:function(){return _.SshTraceEventIds}})},,,,,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.rpcMaxMessageSize=t.createDuplexRpcMessageStreams=t.rpcUtils=t.Channel=t.RpcProxyCache=t.dataFormat=t.DataFormat=t.RpcMessageWriter=t.RpcServer=t.RpcError=t.RpcConnectionShutdownError=t.RpcConnectionClosedError=t.RpcLoggerAdapter=t.RpcClientProxyBase=t.RpcClientProxy=t.RpcClient=t.methodProgress=t.RpcServiceHandler=t.RpcProxy=t.RpcErrorCodes=void 0;var a=n(332);Object.defineProperty(t,"RpcErrorCodes",{enumerable:!0,get:function(){return a.RpcErrorCodes}}),Object.defineProperty(t,"RpcProxy",{enumerable:!0,get:function(){return a.RpcProxy}});var c=n(228);Object.defineProperty(t,"RpcServiceHandler",{enumerable:!0,get:function(){return c.RpcServiceHandler}}),Object.defineProperty(t,"methodProgress",{enumerable:!0,get:function(){return c.methodProgress}});var l=n(541);Object.defineProperty(t,"RpcClient",{enumerable:!0,get:function(){return l.RpcClient}});var u=n(227);Object.defineProperty(t,"RpcClientProxy",{enumerable:!0,get:function(){return u.RpcClientProxy}}),Object.defineProperty(t,"RpcClientProxyBase",{enumerable:!0,get:function(){return u.RpcClientProxyBase}});var h=n(333);Object.defineProperty(t,"RpcLoggerAdapter",{enumerable:!0,get:function(){return h.RpcLoggerAdapter}});var d=n(334);Object.defineProperty(t,"RpcConnectionClosedError",{enumerable:!0,get:function(){return d.RpcConnectionClosedError}}),Object.defineProperty(t,"RpcConnectionShutdownError",{enumerable:!0,get:function(){return d.RpcConnectionShutdownError}});var p=n(335);Object.defineProperty(t,"RpcError",{enumerable:!0,get:function(){return p.RpcError}});var f=n(542);Object.defineProperty(t,"RpcServer",{enumerable:!0,get:function(){return f.RpcServer}});var g=n(543);Object.defineProperty(t,"RpcMessageWriter",{enumerable:!0,get:function(){return g.RpcMessageWriter}});var m=n(544);Object.defineProperty(t,"DataFormat",{enumerable:!0,get:function(){return m.DataFormat}}),Object.defineProperty(t,"dataFormat",{enumerable:!0,get:function(){return m.dataFormat}});var y=n(545);Object.defineProperty(t,"RpcProxyCache",{enumerable:!0,get:function(){return y.RpcProxyCache}});var v=n(546);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return v.Channel}});const S=s(n(136));t.rpcUtils=S,o(n(336),t);var w=n(547);Object.defineProperty(t,"createDuplexRpcMessageStreams",{enumerable:!0,get:function(){return w.createDuplexRpcMessageStreams}}),t.rpcMaxMessageSize=10485760,o(n(548),t)},,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceClientBase=t.ConnectedState=void 0;var s=n(550);Object.defineProperty(t,"ConnectedState",{enumerable:!0,get:function(){return s.ConnectedState}}),r(n(551),t),r(n(552),t),r(n(553),t),r(n(554),t),r(n(573),t),r(n(574),t),r(n(575),t),r(n(576),t),r(n(348),t),r(n(349),t);var o=n(577);Object.defineProperty(t,"WorkspaceClientBase",{enumerable:!0,get:function(){return o.WorkspaceClientBase}})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBuffer=t.SshDataWriter=t.SshDataReader=void 0;const i=n(6),r=n(119),s=n(58);class o{constructor(e){this.buffer=e,this.position=0}get available(){return this.buffer.length-this.position}read(e){if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readByte(){if(0===this.available)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position];return this.position++,e}readBinary(){const e=this.readUInt32();if(this.available<e)throw new Error("Attempted to read past end of buffer.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readString(e){return this.readBinary().toString()}readList(e){const t=this.readString(e);return 0===t.length?[]:t.split(",")}readBoolean(){return 0!==this.readByte()}readUInt32(){if(this.available<4)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],i=this.buffer[this.position+3];this.position+=4;return(e<<24|t<<16|n<<8|i)>>>0}readUInt64(){if(this.available<8)throw new Error("Attempted to read past end of buffer.");const e=this.buffer[this.position+0],t=this.buffer[this.position+1],n=this.buffer[this.position+2],i=this.buffer[this.position+3],r=this.buffer[this.position+4],s=this.buffer[this.position+5],o=this.buffer[this.position+6],a=this.buffer[this.position+7];this.position+=8;return 4294967296*((e<<24|t<<16|n<<8|i)>>>0)+((r<<24|s<<16|o<<8|a)>>>0)}readBigInt(){const e=this.readBinary();return 0===e.length?s.BigInt.zero:s.BigInt.fromBytes(e)}}t.SshDataReader=o,o.mpintZero=i.Buffer.alloc(1);let a;t.SshDataWriter=class{constructor(e){this.buffer=e,this.position=0}write(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position]=e,this.position++}writeBinary(e){this.ensureCapacity(this.position+4+e.length),this.writeUInt32(e.length),e.copy(this.buffer,this.position),this.position+=e.length}writeString(e,t){this.writeBinary(i.Buffer.from(e))}writeList(e,t){this.writeString(e?e.join(","):"",t)}writeBoolean(e){this.writeByte(e?1:0)}writeUInt32(e){this.ensureCapacity(this.position+4),this.buffer[this.position+0]=e>>>24,this.buffer[this.position+1]=e>>>16,this.buffer[this.position+2]=e>>>8,this.buffer[this.position+3]=e>>>0,this.position+=4}writeUInt64(e){this.ensureCapacity(this.position+8);const t=4294967295&e,n=(e-t)/4294967296;this.buffer[this.position+0]=n>>>24,this.buffer[this.position+1]=n>>>16,this.buffer[this.position+2]=n>>>8,this.buffer[this.position+3]=n>>>0,this.buffer[this.position+4]=t>>>24,this.buffer[this.position+5]=t>>>16,this.buffer[this.position+6]=t>>>8,this.buffer[this.position+7]=t>>>0,this.position+=8}writeBigInt(e){const t=e.toBytes();1===t.length&&0===t[0]?this.writeUInt32(0):this.writeBinary(t)}writeRandom(e){this.ensureCapacity(this.position+e);const t=this.buffer.slice(this.position,this.position+e);r.SshAlgorithms.random.getBytes(t),this.position+=e}skip(e){this.ensureCapacity(this.position+e),this.position+=e}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=i.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}toBuffer(){return this.buffer.slice(0,this.position)}},t.formatBuffer=function(e,t,n){let i=`${void 0===t?"Buffer":t}[${e.length}] (${function(e){a||(a=function(){let e;const t=[];for(let n=0;n<256;n++){e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}());let t=-1;for(let n=0;n<e.length;n++)t=t>>>8^a[255&(t^e[n])];return(((-1^t)>>>0)+4294967296).toString(16).substr(-8).toUpperCase()}(e)})\n`;if(!1===n)return i;const r=Math.min(2048,e.length);for(let t=0;t<r;t+=16){t<1e3&&(i+="0"),t<100&&(i+="0"),t<10&&(i+="0"),i+=t+":";for(let n=t;n<t+16;n++)i+=n<r?" "+e.slice(n,n+1).toString("hex"):"   ";i+="  ";for(let n=t;n<t+16;n++)if(n<r){const t=e[n];i+=t>32&&t<=127?e.slice(n,n+1).toString():"."}else i+=" ";i+="\n"}return r<e.length&&(i+="...\n"),i}},function(e,t,n){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],r=0;r<e.length;r++){var s=e[r],c=t.base?s[0]+t.base:s[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var h=a(u),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:u,updater:m(d,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function p(e,t,n){var i=n.css,r=n.media,s=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,g=0;function m(e,t){var n,i,r;if(t.singleton){var s=g++;n=f||(f=l(t)),i=d.bind(null,n,s,!1),r=d.bind(null,n,s,!0)}else n=l(t),i=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=a(n[i]);o[r].references--}for(var s=c(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=s}}}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.SshChannelError=t.SshReconnectError=t.SshConnectionError=void 0;class i extends Error{constructor(e,t){super(e),this.reason=t}}t.SshConnectionError=i;class r extends Error{constructor(e,t){super(e),this.reason=t}}t.SshReconnectError=r;class s extends Error{constructor(e,t){super(e),this.reason=t}}t.SshChannelError=s;class o extends Error{constructor(e){var t,n;let i;i="string"==typeof e?e:"function"==typeof e?e.name+" disposed.":(null!==(n=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)&&void 0!==n?n:"Object ")+" disposed.",super(i)}}t.ObjectDisposedError=o},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigInt=void 0;const i=n(6),r=n(38);class s{constructor(e){if(this.buffer=e,0===e.length)throw new Error("BigInt buffer length must be greater than zero.")}get sign(){const e=this.buffer[0];return 0===e?this.buffer.length>1?1:0:0==(128&e)?1:-1}static fromInt32(e){if(0===e)return s.zero;let t=!1;e<0&&(t=!0,e=-e);const n=[];for(let t=24;t>=0;t-=8)(e>=1<<t||n.length>0)&&(n.push(e>>t),e&=~((1<<t)-1));return t&&(0==(128&n[0])?n[0]|=128:n.splice(0,0,128)),new s(i.Buffer.from(new Uint8Array(n)))}toInt32(){if(this.buffer.length>4)throw new TypeError("BigInt value cannot be converted to a 32-bit signed integer.");let e=this.buffer[0];this.sign<0&&(e&=127);for(let t=1;t<this.buffer.length;t++)e=(e<<8)+this.buffer[t];return this.sign<0&&(e=-e),e}static fromBytes(e,t){if(!i.Buffer.isBuffer(e))throw new TypeError("Buffer expected.");if(0===e.length)throw new Error("BigInt buffer length must be greater than zero.");t=null!=t?t:{};const n=0!=(128&e[0]),r=t.unsigned&&n?1:0;let o=0;for(let t=0;t<e.length-1&&0===e[t];t++)0==(128&e[t+1])&&o++;const a=i.Buffer.alloc(e.length+r-o);return e.copy(a,r,o,e.length),new s(a)}toBytes(e){e=null!=e?e:{};let t=this.buffer;if(e.unsigned){if(this.sign<0)throw new TypeError("Cannot format a negative BigInt as unsigned.");if(0===t[0]&&t.length>1&&(t=t.slice(1,t.length)),void 0!==e.length){if(t.length>e.length)throw new Error(`BigInt (${t.length} bytes) is too large for length ${e.length}.`);if(t.length<e.length){const n=i.Buffer.alloc(e.length);return t.copy(n,e.length-t.length),n}}}const n=i.Buffer.alloc(t.length);return t.copy(n,0,0,t.length),n}copyTo(e,t=0){this.buffer.copy(e,t,0,this.buffer.length)}equals(e){return e instanceof s&&this.buffer.equals(e.buffer)}toString(e){return(0,r.formatBuffer)(this.buffer,null!=e?e:"BigInt")}}t.BigInt=s,s.zero=new s(i.Buffer.alloc(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshTraceEventIds=t.TraceLevel=void 0,function(e){e.Error="error",e.Warning="warning",e.Info="info",e.Verbose="verbose"}(t.TraceLevel||(t.TraceLevel={}));class i{}t.SshTraceEventIds=i,i.unknownError=9e3,i.streamReadError=9001,i.streamWriteError=9002,i.streamCloseError=9003,i.sendMessageFailed=9004,i.receiveMessageFailed=9005,i.handleMessageFailed=9006,i.serverAuthenticationFailed=9007,i.clientAuthenticationFailed=9008,i.authenticationError=9009,i.channelWindowAdjustFailed=9010,i.channelWaitForWindowAdjust=9011,i.sessionReconnectInitFailed=9020,i.serverSessionReconnectFailed=9021,i.clientSessionReconnectFailed=9022,i.sessionRequestFailed=9023,i.channelRequestFailed=9024,i.serverListenFailed=9050,i.portForwardServerListenFailed=9051,i.portForwardRequestInvalid=9052,i.portForwardChannelInvalid=9053,i.portForwardChannelOpenFailed=9054,i.portForwardConnectionFailed=9055,i.protocolVersion=9100,i.sendingMessage=9101,i.receivingMessage=9102,i.sendingChannelData=9103,i.receivingChannelData=9104,i.sessionEncrypted=9110,i.sessionAuthenticating=9111,i.sessionAuthenticated=9112,i.sessionClosing=9113,i.sessionConnecting=9114,i.channelOpened=9120,i.channelOpenFailed=9121,i.channelEofReceived=9122,i.channelClosed=9123,i.serverListening=9150,i.serverClientConnected=9151,i.portForwardServerListening=9152,i.portForwardConnectionAccepted=9153,i.portForwardChannelOpened=9154,i.portForwardChannelClosed=9155,i.portForwardConnectionOpened=9156,i.portForwardConnectionClosed=9157,i.sessionDisconnected=9160,i.clientSessionReconnecting=9161,i.serverSessionReconnecting=9162,i.clientSessionStartReconnecting=9163,i.algorithmNegotiation=9170,i.debugMessage=9200},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionReconnectFailureMessage=t.SshReconnectFailureReason=t.SessionReconnectResponseMessage=t.SessionReconnectRequestMessage=t.SessionChannelRequestMessage=t.ExtensionInfoMessage=t.SessionRequestFailureMessage=t.SessionRequestSuccessMessage=t.SessionRequestMessage=t.ServiceAcceptMessage=t.ServiceRequestMessage=t.DebugMessage=t.UnimplementedMessage=t.IgnoreMessage=t.DisconnectMessage=t.SshDisconnectReason=void 0;const i=n(77),r=n(90);var s;!function(e){e[e.none=0]="none",e[e.hostNotAllowedToConnect=1]="hostNotAllowedToConnect",e[e.protocolError=2]="protocolError",e[e.keyExchangeFailed=3]="keyExchangeFailed",e[e.reserved=4]="reserved",e[e.macError=5]="macError",e[e.compressionError=6]="compressionError",e[e.serviceNotAvailable=7]="serviceNotAvailable",e[e.protocolVersionNotSupported=8]="protocolVersionNotSupported",e[e.hostKeyNotVerifiable=9]="hostKeyNotVerifiable",e[e.connectionLost=10]="connectionLost",e[e.byApplication=11]="byApplication",e[e.tooManyConnections=12]="tooManyConnections",e[e.authCancelledByUser=13]="authCancelledByUser",e[e.noMoreAuthMethodsAvailable=14]="noMoreAuthMethodsAvailable",e[e.illegalUserName=15]="illegalUserName"}(t.SshDisconnectReason||(t.SshDisconnectReason={}));class o extends i.SshMessage{get messageType(){return 1}onRead(e){this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),e.available>=4?this.language=e.readString("ascii"):this.language=null}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),this.language&&e.writeString(this.language,"ascii")}}t.DisconnectMessage=o;class a extends i.SshMessage{get messageType(){return 2}onRead(e){}onWrite(e){}}t.IgnoreMessage=a;class c extends i.SshMessage{get messageType(){return 3}onRead(e){this.sequenceNumber=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.sequenceNumber,"sequence number"))}toString(){return this.unimplementedMessageType?`${super.toString()} (messageType=${this.unimplementedMessageType})`:`${super.toString()} (sequenceNumber=${this.sequenceNumber})`}}t.UnimplementedMessage=c;class l extends i.SshMessage{constructor(e){super(),this.alwaysDisplay=!1,this.message=e}get messageType(){return 4}onRead(e){this.alwaysDisplay=e.readBoolean(),this.message=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){var t,n;e.writeBoolean(this.alwaysDisplay),e.writeString(null!==(t=this.message)&&void 0!==t?t:"","utf8"),e.writeString(null!==(n=this.language)&&void 0!==n?n:"","ascii")}toString(){return`${super.toString()}: ${this.message}`}}t.DebugMessage=l;class u extends i.SshMessage{get messageType(){return 5}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceRequestMessage=u;class h extends i.SshMessage{get messageType(){return 6}onRead(e){this.serviceName=e.readString("ascii")}onWrite(e){e.writeString(this.validateField(this.serviceName,"service name"),"ascii")}}t.ServiceAcceptMessage=h;class d extends i.SshMessage{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 80}onRead(e){this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}toString(){return`${super.toString()} (requestType=${this.requestType})`}}t.SessionRequestMessage=d;class p extends i.SshMessage{get messageType(){return 81}onRead(e){}onWrite(e){}}t.SessionRequestSuccessMessage=p;class f extends i.SshMessage{get messageType(){return 82}onRead(e){}onWrite(e){}}t.SessionRequestFailureMessage=f;class g extends i.SshMessage{constructor(){super(...arguments),this.extensionInfo={}}get messageType(){return 7}onRead(e){const t=e.readUInt32();this.extensionInfo={};for(let n=0;n<t;n++){const t=e.readString("ascii"),n=e.readString("utf8");this.extensionInfo[t]=n}}onWrite(e){const t=Object.keys(this.extensionInfo);e.writeUInt32(t.length);for(let n of t)e.writeString(n,"ascii"),e.writeString(this.extensionInfo[n]||"","utf8")}toString(){let e="";for(const[t,n]of Object.entries(this.extensionInfo))e&&(e+="; "),e+=t,n&&(e+="="+n);return`${super.toString()} (${e})`}}t.ExtensionInfoMessage=g,g.serverIndicator="ext-info-c",g.clientIndicator="ext-info-c";t.SessionChannelRequestMessage=class extends d{onRead(e){super.onRead(e),this.senderChannel=e.readUInt32();const t=new r.ChannelRequestMessage;t.read(e),this.request=t}onWrite(e){super.onWrite(e),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),this.validateField(this.request,"request message").write(e)}};t.SessionReconnectRequestMessage=class extends d{onRead(e){super.onRead(e),this.clientReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.clientReconnectToken,"clientReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}};t.SessionReconnectResponseMessage=class extends p{onRead(e){super.onRead(e),this.serverReconnectToken=e.readBinary(),this.lastReceivedSequenceNumber=e.readUInt64()}onWrite(e){super.onWrite(e),e.writeBinary(this.validateField(this.serverReconnectToken,"serverReconnectToken")),e.writeUInt64(this.validateField(this.lastReceivedSequenceNumber,"lastReceivedSequenceNumber"))}},function(e){e[e.none=0]="none",e[e.unknownServerFailure=1]="unknownServerFailure",e[e.sessionNotFound=2]="sessionNotFound",e[e.invalidClientReconnectToken=3]="invalidClientReconnectToken",e[e.serverDroppedMessages=4]="serverDroppedMessages",e[e.unknownClientFailure=101]="unknownClientFailure",e[e.differentServerHostKey=102]="differentServerHostKey",e[e.invalidServerReconnectToken=103]="invalidServerReconnectToken",e[e.clientDroppedMessages=104]="clientDroppedMessages"}(s=t.SshReconnectFailureReason||(t.SshReconnectFailureReason={}));t.SessionReconnectFailureMessage=class extends f{onRead(e){e.available>0&&(this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii"))}onWrite(e){e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${s[this.reasonCode||0]}: ${this.description})`}},i.SshMessage.index.set(1,o),i.SshMessage.index.set(2,a),i.SshMessage.index.set(3,c),i.SshMessage.index.set(5,u),i.SshMessage.index.set(6,h),i.SshMessage.index.set(7,g),i.SshMessage.index.set(80,d),i.SshMessage.index.set(81,p),i.SshMessage.index.set(82,f)},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(330);t.Performance=r.Performance,t.initializePerformanceInstance=r.initializePerformanceInstance,t.getOrCreatePerformance=r.getOrCreatePerformance;var s=n(534);t.logPerformanceWaterfall=s.logPerformanceWaterfall,t.mocks=i(n(538))},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);class r extends i.BaseError{constructor(){super(...arguments),this.errorType="ConnectionError"}}t.ConnectionError=r},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshMessage=void 0;const i=n(6),r=n(38);class s{get messageType(){return 0}toBuffer(){const e=new r.SshDataWriter(i.Buffer.alloc(16));return this.write(e),e.toBuffer()}read(e){this.rawBytes=e.buffer;const t=e.readByte();if(t!==this.messageType)throw new Error(`Message type ${t} is not valid.`);this.onRead(e)}write(e){e.writeByte(this.messageType),this.onWrite(e)}onRead(e){throw new Error("Not supported.")}onWrite(e){throw new Error("Not supported.")}validateField(e,t){if(void 0===e)throw new Error(`${this.constructor.name} ${t} is required.`);return e}toString(){return this.constructor.name}static create(e,t,n){const i=e.messages.get(t);if(i){const e=new i;return e.read(new r.SshDataReader(n)),e}return null}convertTo(e,t=!1){const n=new r.SshDataReader(t?i.Buffer.from(this.rawBytes):this.rawBytes);return e.read(n),e}}t.SshMessage=s,s.index=new Map},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"PerformanceObserver",(function(){return i})),n.d(t,"performance",(function(){return r}));const{PerformanceObserver:i,performance:r}=globalThis},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelFailureMessage=t.ChannelSuccessMessage=t.ChannelSignalMessage=t.CommandRequestMessage=t.ChannelRequestMessage=t.ChannelRequestType=t.ChannelCloseMessage=t.ChannelEofMessage=t.ChannelDataMessage=t.ChannelWindowAdjustMessage=t.ChannelOpenFailureMessage=t.SshChannelOpenFailureReason=t.ChannelOpenConfirmationMessage=t.ChannelOpenMessage=t.ConnectionMessage=void 0;const i=n(77),r=n(38);class s extends i.SshMessage{}t.ConnectionMessage=s;class o extends s{get messageType(){return 90}onRead(e){this.channelType=e.readString("ascii"),this.senderChannel=e.readUInt32(),this.initialWindowSize=e.readUInt32(),this.maximumPacketSize=e.readUInt32()}onWrite(e){e.writeString(this.validateField(this.channelType,"channel type"),"ascii"),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.initialWindowSize||o.defaultInitialWindowSize),e.writeUInt32(this.maximumPacketSize||o.defaultMaximumPacketSize)}}t.ChannelOpenMessage=o,o.defaultInitialWindowSize=1048576,o.defaultMaximumPacketSize=16384;class a extends s{get messageType(){return 91}onRead(e){this.recipientChannel=e.readUInt32(),this.senderChannel=e.readUInt32(),this.initialWindowSize=e.readUInt32(),this.maximumPacketSize=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel")),e.writeUInt32(this.validateField(this.senderChannel,"sender channel")),e.writeUInt32(this.validateField(this.initialWindowSize,"initial window size")),e.writeUInt32(this.validateField(this.maximumPacketSize,"max packet size"))}toString(){return`${super.toString()} (recipientChannel=${this.recipientChannel} senderChannel=${this.senderChannel})`}}var c,l;t.ChannelOpenConfirmationMessage=a,function(e){e[e.none=0]="none",e[e.administrativelyProhibited=1]="administrativelyProhibited",e[e.connectFailed=2]="connectFailed",e[e.unknownChannelType=3]="unknownChannelType",e[e.resourceShortage=4]="resourceShortage"}(c=t.SshChannelOpenFailureReason||(t.SshChannelOpenFailureReason={}));class u extends s{get messageType(){return 92}onRead(e){this.recipientChannel=e.readUInt32(),this.reasonCode=e.readUInt32(),this.description=e.readString("utf8"),this.language=e.readString("ascii")}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel")),e.writeUInt32(this.validateField(this.reasonCode,"reason code")),e.writeString(this.description||"","utf8"),e.writeString(this.language||"en","ascii")}toString(){return`${super.toString()} (${c[this.reasonCode||0]}: ${this.description})`}}t.ChannelOpenFailureMessage=u;class h extends s{get messageType(){return 93}onRead(e){this.recipientChannel=e.readUInt32(),this.bytesToAdd=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel")),e.writeUInt32(this.validateField(this.bytesToAdd,"bytes to add"))}}t.ChannelWindowAdjustMessage=h;class d extends s{get messageType(){return 94}onRead(e){this.recipientChannel=e.readUInt32(),this.data=e.readBinary()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel")),e.writeBinary(this.validateField(this.data,"data"))}toString(){return this.data?(0,r.formatBuffer)(this.data,""):"[0]"}}t.ChannelDataMessage=d;class p extends s{get messageType(){return 96}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}}t.ChannelEofMessage=p;class f extends s{get messageType(){return 97}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}}t.ChannelCloseMessage=f,function(e){e.command="exec",e.shell="shell",e.terminal="pty-req",e.signal="signal",e.exitSignal="exit-signal",e.exitStatus="exit-status"}(l=t.ChannelRequestType||(t.ChannelRequestType={}));class g extends s{constructor(e,t){super(),this.requestType=e,this.wantReply=null!=t&&t}get messageType(){return 98}onRead(e){this.recipientChannel=e.readUInt32(),this.requestType=e.readString("ascii"),this.wantReply=e.readBoolean()}onWrite(e){e.writeUInt32(this.recipientChannel||0),e.writeString(this.validateField(this.requestType,"request type"),"ascii"),e.writeBoolean(this.wantReply)}}t.ChannelRequestMessage=g;t.CommandRequestMessage=class extends g{constructor(){super(),this.requestType=l.command}onRead(e){super.onRead(e),this.command=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeString(this.validateField(this.command,"command"),"utf8")}toString(){return`${super.toString()} (requestType=${this.requestType})`}};t.ChannelSignalMessage=class extends g{constructor(){super()}get signal(){return this.signalValue}set signal(e){this.requestType=l.signal,this.signalValue=e}get exitSignal(){return this.signalValue}set exitSignal(e){this.requestType=l.exitSignal,this.signalValue=e}get errorMessage(){return this.errorMessageValue}set errorMessage(e){if(this.requestType!==l.exitSignal)throw new Error(`Error message property is only valid for ${l.exitSignal} messages.`);this.errorMessageValue=e}get exitStatus(){return this.statusValue}set exitStatus(e){this.requestType=l.exitStatus,this.statusValue=e}onRead(e){switch(super.onRead(e),this.requestType){case l.exitStatus:this.exitStatus=e.readUInt32();break;case l.signal:this.signal=e.readString("ascii");break;case l.exitSignal:this.exitSignal=e.readString("ascii"),e.readBoolean(),this.errorMessage=e.readString("utf8"),e.readString("ascii")}}onWrite(e){if(!this.requestType)throw new Error("Signal message request type not set.");switch(this.wantReply=!1,super.onWrite(e),this.requestType){case l.exitStatus:e.writeUInt32(this.validateField(this.exitStatus,"exit status"));break;case l.signal:e.writeString(this.validateField(this.signal,"signal"),"ascii");break;case l.exitSignal:e.writeString(this.validateField(this.exitSignal,"exit signal"),"ascii"),e.writeBoolean(!1),e.writeString(this.errorMessage||"","utf8"),e.writeString("","ascii");break;default:throw new Error("Unknown signal message request type: "+this.requestType)}}};class m extends s{get messageType(){return 99}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}}t.ChannelSuccessMessage=m;class y extends s{get messageType(){return 100}onRead(e){this.recipientChannel=e.readUInt32()}onWrite(e){e.writeUInt32(this.validateField(this.recipientChannel,"recipient channel"))}}t.ChannelFailureMessage=y,i.SshMessage.index.set(90,o),i.SshMessage.index.set(91,a),i.SshMessage.index.set(92,u),i.SshMessage.index.set(93,h),i.SshMessage.index.set(94,d),i.SshMessage.index.set(96,p),i.SshMessage.index.set(97,f),i.SshMessage.index.set(98,g),i.SshMessage.index.set(99,m),i.SshMessage.index.set(100,y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseCompletionSource=void 0;t.PromiseCompletionSource=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}resolve(e){}reject(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withCancellation=t.CancellationError=t.CancellationTokenSource=t.CancellationToken=void 0;const i=n(4);Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}}),Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}});class r extends Error{constructor(e){super(e||"Operation cancelled.")}}t.CancellationError=r,t.withCancellation=function(e,t){return t?Promise.race([e,new Promise((e,n)=>{t.isCancellationRequested?n(new r):t.onCancellationRequested(()=>{n(new r)})})]):e}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmNames=t.SshAlgorithms=t.Encryption=t.ECDsa=t.Rsa=t.HmacAlgorithm=t.EncryptionAlgorithm=t.PublicKeyAlgorithm=t.KeyExchangeAlgorithm=void 0;const i=n(229);Object.defineProperty(t,"KeyExchangeAlgorithm",{enumerable:!0,get:function(){return i.KeyExchangeAlgorithm}});const r=n(138);Object.defineProperty(t,"PublicKeyAlgorithm",{enumerable:!0,get:function(){return r.PublicKeyAlgorithm}});const s=n(230);Object.defineProperty(t,"EncryptionAlgorithm",{enumerable:!0,get:function(){return s.EncryptionAlgorithm}});const o=n(231);Object.defineProperty(t,"HmacAlgorithm",{enumerable:!0,get:function(){return o.HmacAlgorithm}});const a=!("object"!=typeof crypto||!crypto.subtle),c=n(555),l=n(556),u=n(557),h=n(558),d=n(232),p=n(559),f=a?c.WebDiffieHellman:n(337).NodeDiffieHellman,g=a?c.WebECDiffieHellman:n(337).NodeECDiffieHellman,m=a?l.WebRsa:n(560).NodeRsa;t.Rsa=m;const y=a?u.WebECDsa:n(561).NodeECDsa;t.ECDsa=y;const v=a?h.WebEncryption:n(562).NodeEncryption;t.Encryption=v;const S=a?d.WebHmac:n(234).NodeHmac,w=a?p.WebRandom:n(563).NodeRandom;class C{}t.SshAlgorithms=C,C.keyExchange={none:null,dhGroup14Sha256:new f("diffie-hellman-group14-sha256",2048,"SHA2-256"),dhGroup16Sha512:new f("diffie-hellman-group16-sha512",4096,"SHA2-512"),ecdhNistp256Sha256:new g("ecdh-sha2-nistp256",256,"SHA2-256"),ecdhNistp384Sha384:new g("ecdh-sha2-nistp384",384,"SHA2-384"),ecdhNistp521Sha512:new g("ecdh-sha2-nistp521",521,"SHA2-512")},C.publicKey={none:null,rsaWithSha256:new m("rsa-sha2-256","SHA2-256"),rsaWithSha512:new m("rsa-sha2-512","SHA2-512"),ecdsaSha2Nistp256:new y("ecdsa-sha2-nistp256","SHA2-256"),ecdsaSha2Nistp384:new y("ecdsa-sha2-nistp384","SHA2-384"),ecdsaSha2Nistp521:new y("ecdsa-sha2-nistp521","SHA2-512")},C.encryption={none:null,aes256Ctr:new v("aes256-ctr","AES","CTR",256),aes256Gcm:new v("aes256-gcm@openssh.com","AES","GCM",256)},C.hmac={none:null,hmacSha256:new S("hmac-sha2-256","SHA2-256"),hmacSha512:new S("hmac-sha2-512","SHA2-512"),hmacSha256Etm:new S("hmac-sha2-256-etm@openssh.com","SHA2-256",!0),hmacSha512Etm:new S("hmac-sha2-512-etm@openssh.com","SHA2-512",!0)},C.compression={none:null},C.random=new w,t.algorithmNames=function(e){return e.map(e=>e?e.name:"none")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findService=t.serviceActivation=void 0,t.serviceActivation=function(e){return t=>{t.activations||(t.activations=[]),t.activations.push(e)}},t.findService=function(e,t){for(let n of e.keys()){const e=n.activations;let i=!1;for(let r of e)if(i=!0,t(r))return n;if(!i)throw new Error(`SSH service type '${n.name}' must have one or more 'serviceActivation' decorators.`)}return null}},,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(4),o=n(224),a=n(135),c=n(331),l=n(65),u=n(225);class h extends r.DisposableClass{constructor(e,t,n={}){super(e),this.traceName=e,this.performance=t,this.options=n,this.isDisconnectedFlag=!1,this.isDisposingRef=!1,this.onConnectionChangedEventEmitter=new s.Emitter,this.connectionStatus="none",this.previousConnectionStatus="none",this.addToDisposables(this.onConnectionChangedEventEmitter)}get isDisconnected(){return this.isDisconnectedFlag}getId(e){throw new l.ConnectionError("Not implemented.")}get onConnectionChanged(){if(this.isDisposed)throw new c.ConnectionStateError("Cannot listen to `onConnectionChanged`, connection already disposed.");return this.onConnectionChangedEventEmitter.event}get isDisposing(){return this.isDisposingRef}get status(){return this.connectionStatus}get previousStatus(){return this.previousConnectionStatus}connect(){var e,t;return i(this,void 0,void 0,(function*(){try{return this.trace.info("asked to connect"),(null===(e=this.connectionSignal)||void 0===e?void 0:e.isCancelled)||(null===(t=this.connectionSignal)||void 0===t?void 0:t.isRejected)?yield this.connectionSignal.promise:(r.assert("disconnected"!==this.status,new c.ConnectionStateError("Connection already disconnected, please create a new one.")),r.assert(!this.isDisposed,new c.ConnectionStateError("Connection is already disposed, please create a new one.")),this.connectionSignal?(this.trace.info("return promise, resolved: "+this.connectionSignal.isResolved),yield this.connectionSignal.promise):(this.trace.info("creating new connection"),yield this.createConnection()))}catch(e){throw this.handleConnectionError(e),a.errorToConnectionError(e)}}))}disconnect(e){this.isDisconnectedFlag=!0,this.dispose(e)}dispose(e){this.isDisposingRef=!0,this.isDisposed||(this.onConnectionChangedHandler("disconnected",new o.ConnectionCancellationError("Disposing the connection.")),super.dispose(e))}connectWithTimeout(e){return i(this,void 0,void 0,(function*(){try{return this.trace.info(`asked to connect with timeout of ${e} ms`),isFinite(e)?yield r.timeoutPromise(this.connect(),e,new u.ConnectionTimeoutError(`Could not establish connection in ${e}ms.`)):yield this.connect()}catch(e){throw this.handleConnectionError(e),a.errorToConnectionError(e)}}))}onConnectionChangedHandler(e,t){if(e===this.connectionStatus)return;this.trace.info(`connection status changed: ${this.connectionStatus} -> ${e}, error:`,t),this.previousConnectionStatus=this.connectionStatus,this.connectionStatus=e;const n={status:e,previousStatus:this.previousConnectionStatus};this.trace.info("firing change event: ",n),this.onConnectionChangedEventEmitter.fire(n),r.assertDefined(this.connectionSignal,"No `connectionSignal` found."),this.connectionSignal.isFulfilled||("connected"===e&&(this.trace.info("🔌 connected"),this.connectionSignal.resolve(this)),"disconnected"===e&&(this.trace.info("disconnected"),this.connectionSignal.reject(a.errorToConnectionError(null!=t?t:new l.ConnectionError("Connection failed.")))))}initializeConnection(){return this.trace.info("creating connection"),this.connectionSignal=new r.Signal,this.connectionSignal.promise.catch(e=>{this.trace.verbose("signal rejected reason -> "+r.propertiesToString(e))}),this.addToDisposables(this.connectionSignal),this.onConnectionChangedHandler("connecting"),this}createConnection(){return i(this,void 0,void 0,(function*(){throw this.initializeConnection(),r.assertDefined(this.connectionSignal,new l.ConnectionError("No `connectionSignal` found.")),yield this.connectionSignal.promise,new l.ConnectionError("Not implemented.")}))}handleConnectionError(e){var t;this.trace.error("connection failed: ",e),this.onConnectionChangedHandler("disconnected",e),null===(t=this.connectionSignal)||void 0===t||t.reject(a.errorToConnectionError(e)),this.dispose()}}t.Connection=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(224),s=n(65);t.errorToConnectionError=e=>e instanceof s.ConnectionError?e:e instanceof i.CancellationError?new r.ConnectionCancellationError(e):new s.ConnectionError(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMethodNotFoundResponse=t.RpcRequestsWithContext=t.addContextToRpcMessage=t.TimedRpcMessageUtils=t.TimingFilter=t.WrappedMessageWriter=t.WrappedMessageReader=t.notifyConnections=t.onAllEvents=t.getEventPropertyName=void 0;const i=n(0),r=n(4);function s(e){return`on${e.substr(0,1).toUpperCase()}${e.substr(1)}`}t.getEventPropertyName=s,t.onAllEvents=function(e,t,n){const r=[];for(const i of t){const t=e[s(i)];r.push(t(e=>n(i,e)))}return i.createDisposable(()=>{r.forEach(e=>e.dispose())})},t.notifyConnections=function(e,t,n,i){e.forEach(r=>{try{r.sendNotification(t,n)}catch(n){null==i||i.error(`failed to send notification method:${t} index:${e.indexOf(r)}`)}})};t.WrappedMessageReader=class{constructor(e,t){this.messageReader=e,this.messageTransformer=t,this.onError=this.messageReader.onError,this.onClose=this.messageReader.onClose,this.onPartialMessage=this.messageReader.onPartialMessage}listen(e){this.messageReader.listen(t=>{e(this.messageTransformer(t))})}dispose(){this.messageReader.dispose()}};t.WrappedMessageWriter=class{constructor(e,t){this.messageWriter=e,this.messageTransformer=t,this.onError=this.messageWriter.onError,this.onClose=this.messageWriter.onClose}write(e){this.messageWriter.write(this.messageTransformer(e))}dispose(){this.messageWriter.dispose()}};t.TimingFilter=class{constructor(){this.times=new Map}filter(e,t){if("number"!=typeof t.id)return t;if(this.times.has(t.id)){const n=Date.now()-this.times.get(t.id);this.times.delete(t.id),(e||void 0!==t.times)&&(t.times=o.addTime(t.times,n))}else this.times.set(t.id,Date.now());return t}};class o{static addTime(e,t){void 0===e&&(e=[]);const n=t-o.getTotalTime(e);return e.push(n>0?n:0),e}static getLatency(e){let t=0;if(e)for(let n=1;n<e.length;n+=2)t+=e[n];return t}static getProcessingTime(e){let t=0;if(e)for(let n=0;n<e.length;n+=2)t+=e[n];return t}static getTotalTime(e){return o.getLatency(e)+o.getProcessingTime(e)}}t.TimedRpcMessageUtils=o,t.addContextToRpcMessage=function(e){if(!e)return e;const t=e.context,n=e.params;return"object"!=typeof t||"object"!=typeof n||Array.isArray(n)||n.context?e:Object.assign({},e,{params:Object.assign({context:t},n)})};t.RpcRequestsWithContext=class{constructor(){this.methods=new Set,this.readFilter=this.filterMessage.bind(this)}add(e){e&&this.methods.add(e)}filterMessage(e){const t=e;if(!t.method||!this.methods.has(t.method))return e;const n=e.context||{};return t.params?Array.isArray(t.params)&&t.params.push(n):t.params=[n],t}},t.createMethodNotFoundResponse=function(e){return new r.ResponseError(r.ErrorCodes.MethodNotFound,`method:${e} not supported`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionConfiguration=t.SshProtocolExtensionNames=void 0;const i=n(4),r=n(119),s=n(339),o=n(141),a=n(239),c=n(77);var l;!function(e){e.serverSignatureAlgorithms="server-sig-algs",e.openChannelRequest="open-channel-request@microsoft.com",e.sessionReconnect="session-reconnect@microsoft.com",e.sessionLatency="session-latency@microsoft.com"}(l=t.SshProtocolExtensionNames||(t.SshProtocolExtensionNames={}));t.SshSessionConfiguration=class{constructor(e=!0){this.protocolExtensions=[],this.services=new Map,this.messages=new Map,this.keyExchangeAlgorithms=[],this.publicKeyAlgorithms=[],this.encryptionAlgorithms=[],this.hmacAlgorithms=[],this.compressionAlgorithms=[],this.traceChannelDataValue=!1,this.configurationChangedEmitter=new i.Emitter,this.onConfigurationChanged=this.configurationChangedEmitter.event,this.maxClientAuthenticationAttempts=5,this.enableKeyExchangeGuess=!1,this.keyRotationThreshold=536870912,this.protocolExtensions.push(l.serverSignatureAlgorithms),this.protocolExtensions.push(l.openChannelRequest),this.services.set(s.KeyExchangeService,null),this.services.set(o.ConnectionService,null),this.services.set(a.AuthenticationService,null);for(let[e,t]of c.SshMessage.index)this.messages.set(e,t);e?(this.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.ecdhNistp384Sha384),this.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.ecdhNistp256Sha256),this.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.dhGroup16Sha512),this.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.dhGroup14Sha256),this.publicKeyAlgorithms.push(r.SshAlgorithms.publicKey.rsaWithSha512),this.publicKeyAlgorithms.push(r.SshAlgorithms.publicKey.rsaWithSha256),this.publicKeyAlgorithms.push(r.SshAlgorithms.publicKey.ecdsaSha2Nistp384),this.publicKeyAlgorithms.push(r.SshAlgorithms.publicKey.ecdsaSha2Nistp256),this.encryptionAlgorithms.push(r.SshAlgorithms.encryption.aes256Gcm),this.encryptionAlgorithms.push(r.SshAlgorithms.encryption.aes256Ctr),this.hmacAlgorithms.push(r.SshAlgorithms.hmac.hmacSha512Etm),this.hmacAlgorithms.push(r.SshAlgorithms.hmac.hmacSha256Etm),this.hmacAlgorithms.push(r.SshAlgorithms.hmac.hmacSha512),this.hmacAlgorithms.push(r.SshAlgorithms.hmac.hmacSha256)):(this.keyExchangeAlgorithms.push(r.SshAlgorithms.keyExchange.none),this.publicKeyAlgorithms.push(r.SshAlgorithms.publicKey.none),this.encryptionAlgorithms.push(r.SshAlgorithms.encryption.none),this.hmacAlgorithms.push(r.SshAlgorithms.hmac.none)),this.compressionAlgorithms.push(r.SshAlgorithms.compression.none)}addService(e,t){if(this.services.has(e))throw new Error("Duplicate service entry.");this.services.set(e,t)}getKeyExchangeAlgorithm(e){return this.getAlgorithm(e,this.keyExchangeAlgorithms)}getPublicKeyAlgorithm(e){return this.getAlgorithm(e,this.publicKeyAlgorithms)}getEncryptionAlgorithm(e){return this.getAlgorithm(e,this.encryptionAlgorithms)}getHmacAlgorithm(e){return this.getAlgorithm(e,this.hmacAlgorithms)}getCompressionAlgorithm(e){return this.getAlgorithm(e,this.compressionAlgorithms)}getAlgorithm(e,t){const n=t.find(t=>!!t&&t.name===e);if(!n){if("none"===e)return null;throw new Error("Algorithm not found: "+e)}return n}get traceChannelData(){return this.traceChannelDataValue}set traceChannelData(e){e!==this.traceChannelDataValue&&(this.traceChannelDataValue=e,this.configurationChangedEmitter.fire())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyAlgorithm=void 0;const i=n(6),r=n(38);t.PublicKeyAlgorithm=class{constructor(e,t,n){this.name=e,this.keyAlgorithmName=t,this.hashAlgorithmName=n}readSignatureData(e){const t=new r.SshDataReader(e),n=t.readString("ascii");if(n!==this.name)throw new Error(`Mismatched public key algorithm: got '${n}', expected '${this.name}'.`);return t.readBinary()}createSignatureData(e){const t=new r.SshDataWriter(i.Buffer.alloc(this.name.length+e.length+20));return t.writeString(this.name,"ascii"),t.writeBinary(e),t.toBuffer()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSession=void 0;const i=n(59),r=n(6),s=n(4),o=n(137),a=n(236),c=n(342),l=n(565),u=n(339),h=n(120),d=n(141),p=n(239),f=n(77),g=n(238),m=n(90),y=n(344),v=n(60),S=n(345),w=n(91),C=n(346),b=n(237),E=n(119),k=n(92),R=n(47),x=n(140);class P{constructor(e,t){if(this.config=e,this.remoteVersion=null,this.activatedServices=new Map,this.connectionService=null,this.requestHandler=null,this.blockedMessages=[],this.blockedMessagesSemaphore=new x.Semaphore(1),this.connected=!1,this.disposed=!1,this.metrics=new S.SessionMetrics,this.reconnecting=!1,this.sessionId=null,this.principalValue=null,this.authenticatingEmitter=new s.Emitter,this.onAuthenticating=this.authenticatingEmitter.event,this.closedEmitter=new s.Emitter,this.onClosed=this.closedEmitter.event,this.disconnectedEmitter=new s.Emitter,this.onDisconnected=this.disconnectedEmitter.event,this.serviceActivatedEmitter=new s.Emitter,this.onServiceActivated=this.serviceActivatedEmitter.event,this.channelOpeningEmitter=new s.Emitter,this.onChannelOpening=this.channelOpeningEmitter.event,this.requestEmitter=new s.Emitter,this.onRequest=this.requestEmitter.event,this.trace=(e,t,n,i)=>{},!e)throw new TypeError("Session configuration is required.");if(e.keyExchangeAlgorithms.find(e=>!!e))this.kexService=new u.KeyExchangeService(this,null!=t&&t);else{if(e.encryptionAlgorithms.length>0&&e.encryptionAlgorithms.indexOf(null)<0)throw new Error("Encryption requires a key-exchange algorithm to be configured.");if(e.hmacAlgorithms.length>0&&e.hmacAlgorithms.indexOf(null)<0)throw new Error("HMAC requires a key-exchange algorithm to be configured.");if(e.publicKeyAlgorithms.length>0&&e.publicKeyAlgorithms.indexOf(null)<0)throw new Error("Host authentication requires a key-exchange algorithm to be configured.");this.kexService=null}e.onConfigurationChanged(()=>{const t=this.protocol;t&&(t.traceChannelData=e.traceChannelData)})}get algorithms(){return this.protocol?this.protocol.algorithms:null}get principal(){return this.principalValue}set principal(e){this.principalValue=e}get isConnected(){return this.connected}get isClosed(){return this.disposed}get services(){return[...this.activatedServices.values()]}get channels(){var e,t;return null!==(t=null===(e=this.connectionService)||void 0===e?void 0:e.channels)&&void 0!==t?t:[]}get protocolExtensions(){var e;return(null===(e=this.protocol)||void 0===e?void 0:e.extensions)||null}getService(e){const t=this.activatedServices.get(e);return t||null}activateService(e){let t;if("function"==typeof e)t=e;else{let n=e;if(t=(0,h.findService)(this.config.services,e=>e.serviceRequest===n),!t)return null}let n=this.activatedServices.get(t);if(!n){if(!this.config.services.has(t))throw new Error("Service type not configured: "+t.name);n=new t(this,this.config.services.get(t)),t===d.ConnectionService&&(this.connectionService=n),this.activatedServices.set(t,n),this.serviceActivatedEmitter.fire(n)}return n}async connect(e,t){if(!e)throw new TypeError("A session stream is required.");if(this.disposed)throw new R.ObjectDisposedError(this);this.connectPromise||(this.connectPromise=this.doConnect(e,t)),await this.connectPromise}async doConnect(e,t){this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionConnecting,`${this} ${this.reconnecting?"re":""}connecting...`),this.protocol=new l.SshProtocol(e,this.config,this.metrics,this.trace),this.protocol.kexService=this.kexService,await this.exchangeVersions(t),this.kexService?await this.encrypt(t):(await(0,k.withCancellation)(this.versionExchangePromise,t),this.connected=!0),this.processMessages().catch(e=>{this.trace(i.TraceLevel.Error,i.SshTraceEventIds.unknownError,"Unhandled error processing messages: "+e.message,e)})}async exchangeVersions(e){const t=this.protocol.writeProtocolVersion(P.localVersion.toString(),e),n=this.protocol.readProtocolVersion(e);this.versionExchangePromise=n.then(async e=>{let t;this.trace(i.TraceLevel.Info,i.SshTraceEventIds.protocolVersion,`Local version: ${P.localVersion}, remote version: ${e}`);const n=c.SshVersionInfo.tryParse(e);if(n){if(this.remoteVersion=n,"2.0"===n.protocolVersion)return;t=`Remote SSH version ${this.remoteVersion} is not supported. This library only supports SSH v2.0.`}else t="Could not parse remote SSH version "+e;await this.close(v.SshDisconnectReason.protocolVersionNotSupported,t,new Error(t))}),await t}async encrypt(e){var t,n;const r=this.protocol;if(!r)throw new R.ObjectDisposedError(this);await r.considerReExchange(!0,e),await(0,k.withCancellation)(this.versionExchangePromise,e),this.connected=!0;let s=null;for(;!(this.isClosed||(null===(t=this.protocol)||void 0===t?void 0:t.algorithms)||s instanceof v.DisconnectMessage)&&(s=await r.receiveMessage(e),s);)await this.handleMessage(s,e);if(!(null===(n=this.protocol)||void 0===n?void 0:n.algorithms))throw new R.SshConnectionError("Session closed while encrypting.",v.SshDisconnectReason.connectionLost);this.protocol.algorithms.cipher&&this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionEncrypted,this+" encrypted.")}async processMessages(){var e;for(this.connected=!0;!this.disposed;){const t=this.protocol;if(!t)break;let n=null;try{n=await t.receiveMessage()}catch(t){if(!(t instanceof Error))throw t;let n=v.SshDisconnectReason.protocolError;t instanceof R.SshConnectionError?n=null!==(e=t.reason)&&void 0!==e?e:n:this.trace(i.TraceLevel.Error,i.SshTraceEventIds.receiveMessageFailed,"Error receiving message: "+t.message,t),await this.close(n,t.message,t)}if(!n){await this.close(v.SshDisconnectReason.connectionLost,"Connection lost.");break}try{await this.handleMessage(n)}catch(e){if(!(e instanceof Error))throw e;this.trace(i.TraceLevel.Error,i.SshTraceEventIds.handleMessageFailed,`Error handling ${n}: ${e.message}`,e),await this.close(v.SshDisconnectReason.protocolError,e.message,e)}}this.connected=!1}get canAcceptRequests(){var e;return!(this.kexService&&(!(null===(e=this.protocol)||void 0===e?void 0:e.algorithms)||this.protocol.algorithms.cipher&&!this.principal))}async sendMessage(e,t){var n,r;if(!e)throw new TypeError("Message expected.");if(t&&t.isCancellationRequested)throw new k.CancellationError;const s=this.protocol;if(!s||this.disposed)throw new R.ObjectDisposedError(this);if(this.kexService&&this.kexService.exchanging&&e.messageType>4&&(e.messageType<20||e.messageType>49))return void this.blockedMessages.push(e);let a;await this.blockedMessagesSemaphore.wait(t);try{a=await s.sendMessage(e,t),this.blockedMessagesSemaphore.release()}catch(t){if(this.blockedMessagesSemaphore.release(),t instanceof R.SshConnectionError){if(t.reason===v.SshDisconnectReason.connectionLost&&(null===(n=this.protocolExtensions)||void 0===n?void 0:n.has(o.SshProtocolExtensionNames.sessionReconnect)))return}if(!(t instanceof Error))throw t;throw this.trace(i.TraceLevel.Error,i.SshTraceEventIds.sendMessageFailed,`Error sending ${e}: ${t.message}`,t),t}if(!a&&!(null===(r=this.protocolExtensions)||void 0===r?void 0:r.has(o.SshProtocolExtensionNames.sessionReconnect)))throw new R.SshConnectionError("Session disconnected.",v.SshDisconnectReason.connectionLost)}handleMessage(e,t){var n;if(e instanceof m.ConnectionMessage&&this.connectionService)return this.connectionService.handleMessage(e,t);if(e instanceof g.NewKeysMessage)return this.handleNewKeysMessage(e,t);if(e instanceof g.KeyExchangeMessage)return this.handleKeyExchangeMessage(e,t);if(e instanceof y.AuthenticationMessage)return null===(n=this.getService(p.AuthenticationService))||void 0===n?void 0:n.handleMessage(e,t);if(e instanceof v.ServiceRequestMessage)return this.handleServiceRequestMessage(e,t);if(e instanceof v.ServiceAcceptMessage)return this.handleServiceAcceptMessage(e,t);if(e instanceof v.SessionRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof v.SessionRequestSuccessMessage)return this.handleRequestSuccessMessage(e);if(e instanceof v.SessionRequestFailureMessage)return this.handleRequestFailureMessage(e);if(e instanceof v.ExtensionInfoMessage)return this.handleExtensionInfoMessage(e,t);if(e instanceof v.UnimplementedMessage)return this.handleUnimplementedMessage(e,t);if(e instanceof v.DebugMessage)return this.handleDebugMessage(e);throw e instanceof f.SshMessage?new Error("Unhandled message type: "+e.constructor.name):new TypeError("Message argument was "+(e?"invalid type.":"null."))}async handleRequestMessage(e,t){var n;let r=!1;if("initial-channel-request@microsoft.com"===e.requestType&&this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)){const n=e.convertTo(new v.SessionChannelRequestMessage),i=n.senderChannel,s=this.channels.find(e=>e.remoteChannelId===i);s&&n.request&&(n.request.wantReply=!1,r=await s.handleRequest(n.request,t))}else if("enable-session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(o.SshProtocolExtensionNames.sessionReconnect)))this.protocol.incomingMessagesHaveReconnectInfo||(this.protocol.incomingMessagesHaveReconnectInfo=!0,this.protocol.incomingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency),r=!0);else if(this.canAcceptRequests){const n=new b.SshRequestEventArgs(e.requestType||"",e,this.principal),i=(0,h.findService)(this.config.services,t=>t.sessionRequest===e.requestType);if(i){const e=this.activateService(i);return void await e.onSessionRequest(n,t)}this.raiseSessionRequest(n),r=n.isAuthorized||!1}else this.trace(i.TraceLevel.Warning,i.SshTraceEventIds.sessionRequestFailed,"Session request blocked because the session is not yet authenticated."),r=!1;e.wantReply&&await this.sendMessage(r?new v.SessionRequestSuccessMessage:new v.SessionRequestFailureMessage,t)}raiseSessionRequest(e){this.requestEmitter.fire(e)}async handleServiceRequestMessage(e,t){}async handleServiceAcceptMessage(e,t){}async handleKeyExchangeMessage(e,t){if(!this.kexService){if(!(e instanceof g.KeyExchangeInitMessage&&this.protocol))return void await this.close(v.SshDisconnectReason.keyExchangeFailed);this.kexService=this.activateService(u.KeyExchangeService),this.protocol.kexService=this.kexService,await this.protocol.considerReExchange(!0,t)}return this.kexService.handleMessage(e,t)}async handleNewKeysMessage(e,t){try{await this.blockedMessagesSemaphore.wait(t),await this.protocol.handleNewKeys(t);try{for(;this.blockedMessages.length>0;){const e=this.blockedMessages.shift();if(!this.protocol)throw new R.ObjectDisposedError(this);await this.protocol.sendMessage(e,t)}}catch(e){if(!(e instanceof Error))throw e;await this.close(v.SshDisconnectReason.protocolError,void 0,e)}}finally{this.blockedMessagesSemaphore.release()}}async handleUnimplementedMessage(e,t){void 0!==e.unimplementedMessageType&&await this.sendMessage(e,t)}handleDebugMessage(e){e.message&&this.trace(e.alwaysDisplay?i.TraceLevel.Info:i.TraceLevel.Verbose,i.SshTraceEventIds.debugMessage,e.message)}async raiseAuthenticatingEvent(e){this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionAuthenticating,`${this} Authenticating(${e})`),this.authenticatingEmitter.fire(e);let t=e.authenticationPromise;t||(t=Promise.resolve(null));return await t}async request(e,t){if(!e)throw new TypeError("Request is required.");if(!e.wantReply)return await this.sendMessage(e,t),!0;return await this.requestResponse(e,v.SessionRequestSuccessMessage,v.SessionRequestFailureMessage,t)instanceof v.SessionRequestSuccessMessage}async requestResponse(e,t,n,i){if(!e)throw new TypeError("Request is required.");if(!t)throw new TypeError("Success response type is required.");if(!n)throw new TypeError("Failure response type is required.");if(this.requestHandler)throw new Error("Another request is already pending.");e.wantReply=!0;const r=new w.PromiseCompletionSource;if(i){if(i.isCancellationRequested)throw new k.CancellationError;i.onCancellationRequested(()=>{this.requestHandler=null,r.reject(new k.CancellationError)})}return this.requestHandler=(e,i)=>{var s,o;if(this.requestHandler=null,e)r.reject(e);else if(i instanceof v.SessionRequestFailureMessage){const e=null!==(s=null==i?void 0:i.convertTo(new n,!0))&&void 0!==s?s:null;r.resolve(e)}else if(i instanceof v.SessionRequestSuccessMessage){const e=null!==(o=null==i?void 0:i.convertTo(new t,!0))&&void 0!==o?o:null;r.resolve(e)}else r.reject(new Error("Unknown response message type."))},await this.sendMessage(e,i),await r.promise}handleRequestSuccessMessage(e){this.requestHandler&&this.requestHandler(void 0,e)}handleRequestFailureMessage(e){this.requestHandler&&this.requestHandler(void 0,e)}async acceptChannel(e,t){const n="string"==typeof e?e:void 0;t||"object"!=typeof e||(t=e),this.activateService(d.ConnectionService);const i=this.connectionService.acceptChannel(n||a.SshChannel.sessionChannelType,t);return await i}async openChannel(e,t,n){let i;if("string"==typeof e||null===e?(i=new m.ChannelOpenMessage,i.channelType=null!=e?e:a.SshChannel.sessionChannelType):e instanceof m.ChannelOpenMessage?i=e:(i=new m.ChannelOpenMessage,i.channelType=a.SshChannel.sessionChannelType,n=e),t instanceof m.ChannelRequestMessage)return await this.openChannelWithInitialRequest(i,t,n);n||null===t||(n=t),this.activateService(d.ConnectionService);const r=new w.PromiseCompletionSource;return await this.connectionService.openChannel(i,r,n),await r.promise}async openChannelWithInitialRequest(e,t,n){var i;this.activateService(d.ConnectionService);const r=new w.PromiseCompletionSource,s=await this.connectionService.openChannel(e,r,n);if(n){if(n.isCancellationRequested)throw new k.CancellationError;n.onCancellationRequested(()=>r.reject(new k.CancellationError))}let a,c;const l=this.config.protocolExtensions.includes(o.SshProtocolExtensionNames.openChannelRequest)&&(null===(i=this.protocolExtensions)||void 0===i?void 0:i.has(o.SshProtocolExtensionNames.openChannelRequest));if(!1===l)a=await r.promise,c=await a.request(t,n);else{const e=t.wantReply||void 0===l,i=new v.SessionChannelRequestMessage;i.requestType="initial-channel-request@microsoft.com",i.senderChannel=s,i.request=t,i.wantReply=e;const o=this.request(i,n);a=await r.promise,e?(c=await o,c||void 0!==l||(c=await a.request(t))):c=!0}if(!c)throw await a.close(),new Error("The initial channel request was denied.");return a}async handleChannelOpening(e,t){const n=(0,h.findService)(this.config.services,t=>t.channelType===e.channel.channelType&&!t.channelRequest);if(n){const i=this.activateService(n);await i.onChannelOpening(e,t)}else this.raiseChannelOpening(e)}raiseChannelOpening(e){this.channelOpeningEmitter.fire(e)}async sendExtensionInfo(e){const t=new v.ExtensionInfoMessage;t.extensionInfo={};for(let e of this.config.protocolExtensions)if(e===o.SshProtocolExtensionNames.serverSignatureAlgorithms){const n=Array.from(new Set((0,E.algorithmNames)(this.config.publicKeyAlgorithms))).join(",");t.extensionInfo[e]=n}else t.extensionInfo[e]="";await this.sendMessage(t,e)}async handleExtensionInfoMessage(e,t){if(!this.protocol)return;this.protocol.extensions=new Map;if(e.extensionInfo){for(let t of this.config.protocolExtensions){const n=e.extensionInfo[t];"string"==typeof n&&this.protocol.extensions.set(t,n)}this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionReconnect)&&await this.enableReconnect(t)}}async close(e,t,n){var r,s,o;if(!this.disposed&&this.connected){if(this.connected=!1,this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionClosing,`${this} Close(${v.SshDisconnectReason[e]}, "${t||""}")`),e!==v.SshDisconnectReason.connectionLost)try{const n=new v.DisconnectMessage;n.reasonCode=e,n.description=t||"",await(null===(r=this.protocol)||void 0===r?void 0:r.sendMessage(n))}catch(e){}else if(this.handleDisconnected())return null===(s=this.protocol)||void 0===s||s.dispose(),this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionDisconnected,this+" disconnected."),void this.disconnectedEmitter.fire();this.disposed=!0,n&&(null===(o=this.connectionService)||void 0===o||o.close(n)),this.closedEmitter.fire(new C.SshSessionClosedEventArgs(e,t||"Disconnected.",n||null)),this.dispose()}}handleDisconnected(){var e,t;return this.connectPromise=void 0,null===(e=this.kexService)||void 0===e||e.abortKeyExchange(),!!(null===(t=this.protocolExtensions)||void 0===t?void 0:t.has(o.SshProtocolExtensionNames.sessionReconnect))}dispose(){var e,t;this.disposed||(this.trace(i.TraceLevel.Info,i.SshTraceEventIds.sessionClosing,this+" disposed."),this.disposed=!0,this.closedEmitter.fire(new C.SshSessionClosedEventArgs(v.SshDisconnectReason.none,"SshSession disposed",null))),this.requestHandler&&this.requestHandler(new R.SshConnectionError("Connection closed.")),this.metrics.close(),null===(e=this.connectionService)||void 0===e||e.dispose();for(let e of this.activatedServices.values())e!==this.connectionService&&e.dispose();this.activatedServices.clear(),null===(t=this.protocol)||void 0===t||t.dispose(),this.protocol=void 0}async enableReconnect(e){var t;try{if(await this.blockedMessagesSemaphore.wait(),null===(t=this.kexService)||void 0===t?void 0:t.exchanging)this.trace(i.TraceLevel.Error,i.SshTraceEventIds.sessionReconnectInitFailed,"Failed to initialize session reconnect because a key-exchange was in-progress.");else{const t=new v.SessionRequestMessage("enable-session-reconnect@microsoft.com",!1);await this.protocol.sendMessage(t,e),this.protocol&&(this.protocol.outgoingMessagesHaveReconnectInfo=!0,this.protocol.outgoingMessagesHaveLatencyInfo=this.protocol.extensions.has(o.SshProtocolExtensionNames.sessionLatency))}this.blockedMessagesSemaphore.release()}catch(e){throw this.blockedMessagesSemaphore.release(),e instanceof Error&&await this.close(v.SshDisconnectReason.protocolError,void 0,e),e}}async createReconnectToken(e,t){return await this.algorithms.signer.sign(r.Buffer.concat([e,t]))}async verifyReconnectToken(e,t,n){return await this.algorithms.verifier.verify(r.Buffer.concat([e,t]),n)}toString(){return this.constructor.name}}t.SshSession=P,P.localVersion=c.SshVersionInfo.getLocalVersion()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const i=n(91),r=n(92),s=n(47);t.Semaphore=class{constructor(e=0){this.completions=[],this.disposed=!1,this.count=e}get currentCount(){return this.count}release(e=1){if(this.disposed)throw new s.ObjectDisposedError(this);const t=this.count;for(;e>0;e--)if(this.completions.length>0){this.completions.shift().resolve(!0)}else this.count++;return t}tryRelease(){try{this.release()}catch(e){if(!(e instanceof s.ObjectDisposedError))throw e}}async wait(e,t){const n="number"==typeof e?e:void 0;if(void 0===t&&"object"==typeof e&&(t=e),this.disposed)throw new s.ObjectDisposedError(this);if(null==t?void 0:t.isCancellationRequested)throw new r.CancellationError;if(this.count>0)return this.count--,!0;if(0===n)return!1;{const e=new i.PromiseCompletionSource;this.completions.push(e);const s=[e.promise];if(n&&s.push(new Promise(e=>setTimeout(()=>e(!1),n))),t){const e=new i.PromiseCompletionSource;t.onCancellationRequested(()=>{e.reject(new r.CancellationError)}),s.push(e.promise)}if(await Promise.race(s))return!0;{const t=this.completions.indexOf(e);return t>=0&&this.completions.splice(t,1),!1}}}dispose(){if(!this.disposed){this.disposed=!0;for(let e of this.completions)e.reject(new s.ObjectDisposedError(this));this.completions.splice(0,this.completions.length),this.count=0}}}},function(e,t,n){"use strict";var i,r=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionService=void 0;const s=n(179),o=n(90),a=n(91),c=n(236),l=n(92),u=n(47),h=n(343),d=n(120),p=n(59);let f=i=class extends s.SshService{constructor(e){super(e),this.channelCounter=0,this.channelMap=new Map,this.nonAcceptedChannels=new Map,this.pendingChannels=new Map,this.pendingAcceptChannels=new Map}get channels(){return Array.from(this.channelMap.values())}close(e){for(let t of this.channelMap.values())t.close(e)}dispose(){const e=[...this.channelMap.values()];let t=[...this.pendingChannels.values()].map(e=>e.completionSource);this.pendingAcceptChannels.size>0&&(t=t.concat([...this.pendingAcceptChannels.values()].reduce((e,t)=>e.concat(t))));for(let t of e)t.dispose();for(let e of t)e.reject(new u.SshConnectionError("Session closed."));super.dispose()}async acceptChannel(e,t){const n=new a.PromiseCompletionSource;let i;if(t){if(t.isCancellationRequested)throw new l.CancellationError;i=t.onCancellationRequested(()=>{const t=this.pendingAcceptChannels.get(e);if(t){const e=t.findIndex(e=>Object.is(e,n));e>=0&&t.splice(e,1)}n.reject(new l.CancellationError)})}let r=null;if(r=Array.from(this.nonAcceptedChannels.values()).find(t=>t.channelType===e)||null,r)this.nonAcceptedChannels.delete(r.channelId);else{let t=this.pendingAcceptChannels.get(e);t||(t=[],this.pendingAcceptChannels.set(e,t)),t.push(n)}try{return r||await n.promise}finally{i&&i.dispose()}}async openChannel(e,t,n){const i=++this.channelCounter;e.senderChannel=i;let r=null;if(n){if(n.isCancellationRequested)throw new l.CancellationError;r=n.onCancellationRequested(()=>{this.pendingChannels.delete(i)&&t.reject(new l.CancellationError)})}return this.pendingChannels.set(i,{openMessage:e,completionSource:t,cancellationRegistration:r}),await this.session.sendMessage(e),i}handleMessage(e,t){if(e instanceof o.ChannelDataMessage)return this.handleDataMessage(e);if(e instanceof o.ChannelWindowAdjustMessage)return this.handleAdjustWindowMessage(e);if(e instanceof o.ChannelEofMessage)return this.handleEofMessage(e);if(e instanceof o.ChannelOpenMessage)return this.handleOpenMessage(e,t);if(e instanceof o.ChannelCloseMessage)return this.handleCloseMessage(e);if(e instanceof o.ChannelOpenConfirmationMessage)return this.handleOpenConfirmationMessage(e,t);if(e instanceof o.ChannelOpenFailureMessage)return this.handleOpenFailureMessage(e);if(e instanceof o.ChannelRequestMessage)return this.handleRequestMessage(e,t);if(e instanceof o.ChannelSuccessMessage)return this.handleSuccessMessage(e);if(e instanceof o.ChannelFailureMessage)return this.handleFailureMessage(e);throw new Error("Message not implemented: "+e)}async handleOpenMessage(e,t){if(!this.session.canAcceptRequests){this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.channelOpenFailed,"Channel open request blocked because the session is not yet authenticated.");const n=new o.ChannelOpenFailureMessage;return n.recipientChannel=e.senderChannel,n.reasonCode=o.SshChannelOpenFailureReason.administrativelyProhibited,n.description="Authenticate before opening channels.",void await this.session.sendMessage(n,t)}if(!e.channelType){const n=new o.ChannelOpenFailureMessage;return n.recipientChannel=e.senderChannel,n.reasonCode=o.SshChannelOpenFailureReason.unknownChannelType,n.description="Channel type not specified.",void await this.session.sendMessage(n,t)}const n=new c.SshChannel(this,e.channelType,e.senderChannel,e.initialWindowSize,e.maximumPacketSize,++this.channelCounter),i=new h.SshChannelOpeningEventArgs(e,n,!0);try{await this.session.handleChannelOpening(i,t)}catch(e){throw n.dispose(),e}if(i.failureReason!==o.SshChannelOpenFailureReason.none){const e=new o.ChannelOpenFailureMessage;e.recipientChannel=n.remoteChannelId,e.reasonCode=i.failureReason,e.description=i.failureDescription||void 0;try{await this.session.sendMessage(e,t)}finally{n.dispose()}return}if(this.session.isClosed)return void n.dispose();this.channelMap.set(n.channelId,n);const r=new o.ChannelOpenConfirmationMessage;r.recipientChannel=n.remoteChannelId,r.senderChannel=n.channelId,r.initialWindowSize=e.initialWindowSize,r.maximumPacketSize=e.maximumPacketSize,await this.session.sendMessage(r,t);let s=!1;const a=this.pendingAcceptChannels.get(n.channelType);for(;a&&a.length>0;){a.shift().resolve(n),s=!0;break}s||this.nonAcceptedChannels.set(n.channelId,n),this.onChannelOpenCompleted(n.channelId,n),n.enableSending()}handleCloseMessage(e){const t=this.findChannelById(e.recipientChannel);t&&t.handleClose()}async handleOpenConfirmationMessage(e,t){var n;let i,r=null;const s=this.pendingChannels.get(e.recipientChannel);if(!s)throw this.channelMap.has(e.recipientChannel)?new Error("Duplicate channel ID."):new Error("Channel confirmation was not requested.");i=s.openMessage,r=s.completionSource,s.cancellationRegistration&&s.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel);const a=new c.SshChannel(this,i.channelType||c.SshChannel.sessionChannelType,e.senderChannel,e.initialWindowSize,e.maximumPacketSize,e.recipientChannel);this.channelMap.set(a.channelId,a);const l=new h.SshChannelOpeningEventArgs(i,a,!1);if(await this.session.handleChannelOpening(l,t),r){if(l.failureReason!==o.SshChannelOpenFailureReason.none)return void r.reject(new u.SshChannelError(null!==(n=l.failureDescription)&&void 0!==n?n:"Channel open failure.",l.failureReason));r.resolve(a)}else this.onChannelOpenCompleted(a.channelId,a);a.enableSending()}handleOpenFailureMessage(e){let t=null;const n=this.pendingChannels.get(e.recipientChannel);n&&(t=n.completionSource,n.cancellationRegistration&&n.cancellationRegistration.dispose(),this.pendingChannels.delete(e.recipientChannel)),null!=t?t.reject(new u.SshChannelError(e.description||"Channel open rejected.",e.reasonCode)):this.onChannelOpenCompleted(e.recipientChannel,null)}async handleRequestMessage(e,t){const n=this.findChannelById(e.recipientChannel);n?await n.handleRequest(e,t):this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.channelRequestFailed,`Invalid channel ID ${e.recipientChannel} in channel request message.`)}handleSuccessMessage(e){const t=this.findChannelById(e.recipientChannel);t?t.handleResponse(!0):this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.channelRequestFailed,`Invalid channel ID ${e.recipientChannel} in channel success message.`)}handleFailureMessage(e){const t=this.findChannelById(e.recipientChannel);t?t.handleResponse(!1):this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.channelRequestFailed,`Invalid channel ID ${e.recipientChannel} in channel failure message.`)}handleDataMessage(e){const t=this.findChannelById(e.recipientChannel);if(t)return t.handleDataReceived(e.data)}handleAdjustWindowMessage(e){const t=this.findChannelById(e.recipientChannel);t&&t.adjustRemoteWindow(e.bytesToAdd)}handleEofMessage(e){const t=this.findChannelById(e.recipientChannel);t&&t.handleEof()}onChannelOpenCompleted(e,t){t?this.trace(p.TraceLevel.Info,p.SshTraceEventIds.channelOpened,`${this.session} ChannelOpenCompleted(${t})`):this.trace(p.TraceLevel.Warning,p.SshTraceEventIds.channelOpenFailed,`${this.session} ChannelOpenCompleted(${e} failed)`)}findChannelById(e){var t;return null!==(t=this.channelMap.get(e))&&void 0!==t?t:null}_removeChannel(e){this.channelMap.delete(e.channelId),this.pendingChannels.delete(e.channelId)}};f.serviceName="ssh-connection",f=i=r([(0,d.serviceActivation)({serviceRequest:i.serviceName})],f),t.ConnectionService=f},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"HttpClient",(function(){return k})),n.d(t,"HttpError",(function(){return m})),n.d(t,"HttpClientError",(function(){return y})),n.d(t,"HttpClientAuthenticationError",(function(){return v})),n.d(t,"HttpClientResponseError",(function(){return S})),n.d(t,"HttpCancellationError",(function(){return w}));var i=n(164),r=n.n(i),s=n(361);const o={fetch:void 0,Request:void 0,AbortController:void 0},{fetch:a,Request:c,AbortController:l}="undefined"!=typeof self?self:"undefined"!=typeof window?window:o;var u=null!=a?a:r.a,h=null!=c?c:i.Request,d=null!=l?l:s.AbortController;function p(e){const t=new d;e.isCancellationRequested&&t.abort();const n=e.onCancellationRequested(()=>{n.dispose(),t.abort()});return t.signal}var f=n(4);function g(e){const t=new f.CancellationTokenSource,n=setTimeout(()=>{t.cancel()},e);return{cancel:t.cancel.bind(t),dispose(){clearTimeout(n),t.dispose()},token:t.token}}class m extends Error{constructor(){super(...arguments),this.errorType="HttpError"}}class y extends m{constructor(e){if(super(e),this.errorType="HttpClientError",e instanceof y)return e;let t;t=e instanceof Error?e.message:"string"==typeof e?e:"",this.message=t,this.name="HttpClientError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,y)}}class v extends m{constructor(e){super(`Request failed with status code ${e.status}.`),this.response=e,this.errorType="HttpClientAuthenticationError",this.name="HttpClientAuthenticationError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,v)}}class S extends m{constructor(e){super(`Request failed with status code ${e.status}.`),this.response=e,this.errorType="HttpClientResponseError",this.name="HttpClientResponseError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,S)}}class w extends m{constructor(e){super(e),this.errorType="HttpCancellationError",this.name="CancellationError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}}class C{constructor(e,t,n,i,r){var s;this.logger=e,this.configuration=t,this.request=n,this.init=i,this.cancellationToken=r,this.retry=0,this.input=this.request instanceof URL?this.request.toString():this.request;let o="GET";"string"!=typeof this.input&&(o=this.input.method),(null===(s=this.init)||void 0===s?void 0:s.method)&&(o=this.init.method),this.method=o,this.url="string"==typeof this.input?this.input:this.input.url}then(e,t){return this.fetch().then(e,t)}async text(){const e=await this.fetchWithCancellationCheck();return await e.text()}async json(){const e=await this.fetchWithCancellationCheck();return await e.json()}async arrayBuffer(){const e=await this.fetchWithCancellationCheck();return await e.arrayBuffer()}async blob(){const e=await this.fetchWithCancellationCheck();return await e.blob()}async formData(){const e=await this.fetchWithCancellationCheck();return await e.formData()}async value(){return await this.json()}async fetch(){var e;if(this.logger.verbose(this.method+" - fetch start"),null===(e=this.cancellationToken)||void 0===e?void 0:e.isCancellationRequested)throw new w;const t=await this.prepareRequest();return this.ongoingPromise=this.retryRequest(t),await this.ongoingPromise}async fetchWithCancellationCheck(){var e;const t=await this.fetch();if(null===(e=this.cancellationToken)||void 0===e?void 0:e.isCancellationRequested)throw new w;return t}async makeRequest(e){let t;try{t=await u(e),this.logger.verbose(`${this.method} - fetch response. (url=${this.url};status=${t.status})`)}catch(e){if("AbortError"===e.name)throw this.logger.verbose(`${this.method} - fetch cancelled. (url=${this.url};cancelled=true)`),new w(e.message);throw this.logger.verbose(`${this.method} - fetch failed. (url=${this.url};reason=${e.message};failed=true)`),new y(e)}if(this.configuration.throwOnErrorStatus&&(401===t.status||403===t.status))throw new v(t);if(this.configuration.throwOnErrorStatus&&!t.ok)throw new S(t);return t}async retryRequest(e){try{return await this.makeRequest(e)}catch(t){if(!this.shouldRetry(t))throw t;const n=await this.prepareRetryRequest(e,t.response);return await this.delayRetry(t),this.retry++,await this.retryRequest(n)}}shouldRetry(e){return!(this.retry>=this.configuration.retryCount)&&!!(e instanceof S&&e.response&&this.configuration.retryStatusCodes.includes(e.response.status))}delayRetry(e){let t=1e3*this.retry;if(e instanceof S){const n=e.response.headers.get("Retry-After");if(null!==n){let e=Number(n);isNaN(e)?e=Math.max(Date.parse(n)-Date.now(),0):e*=1e3,isNaN(e)||(t=Math.max(t,e))}}return new Promise(e=>{setTimeout(e,t)})}async prepareRequest(){var e;let t=new h(this.input,Object.assign({credentials:"same-origin"},this.init));this.configuration.beforeRequest&&(t=await this.configuration.beforeRequest(t));const n=null!==(e=this.cancellationToken)&&void 0!==e?e:g(this.configuration.timeout).token;return new h(t,{signal:p(n)})}async prepareRetryRequest(e,t){var n;let i=e;if(this.configuration.beforeRetry){const n=await this.configuration.beforeRetry(e,t,this.retry);Array.isArray(n)?(this.retry=n[1],i=n[0]):i=n}const r=null!==(n=this.cancellationToken)&&void 0!==n?n:g(this.configuration.timeout).token;return new h(i,{signal:p(r)})}}const b={requestNumber:1},E={timeout:3e4,throwOnErrorStatus:!0,beforeRequest:void 0,beforeRetry:void 0,retryCount:2,retryStatusCodes:[429,500,503]};class k{constructor(e,t={}){this.logger=e,this.configuration=Object.assign(Object.assign({},E),t)}fetch(e,t,n){return new C(this.logger.withName("FetchRequest:"+b.requestNumber++),this.configuration,e,t,n)}method(e,t,n,i){return this.fetch(t,Object.assign(Object.assign({},n),{method:e}),i)}get(e,t,n){return this.method("GET",e,t,n)}post(e,t,n){return this.method("POST",e,t,n)}put(e,t,n){return this.method("PUT",e,t,n)}patch(e,t,n){return this.method("PATCH",e,t,n)}head(e,t,n){return this.method("HEAD",e,t,n)}delete(e,t,n){return this.method("DELETE",e,t,n)}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(529)},function(e,t,n){"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.curves=void 0,t.curves=[{shortName:"P-256",name:"nistp256",oid:"1.2.840.10045.3.1.7",keySize:256},{shortName:"P-384",name:"nistp384",oid:"1.3.132.0.34",keySize:384},{shortName:"P-521",name:"nistp521",oid:"1.3.132.0.35",keySize:521}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;class i{constructor(){this.array=new Array,this.first=0,this.count=0,this.version=0}get size(){return this.count}enqueue(e){if(this.count===this.array.length){const e=new Array(Math.max(16,2*this.count));for(let t=0;t<this.count;t++)e[t]=this.array[(this.first+t)%this.count];this.array=e,this.first=0}this.array[(this.first+this.count)%this.array.length]=e,this.count++,this.version++}dequeue(){if(0===this.count)return;const e=this.array[this.first];return this.array[this.first]=void 0,this.first=(this.first+1)%this.array.length,this.count--,this.version++,e}peek(){if(0===this.count)return;return this.array[this.first]}clear(){this.first=0,this.count=0,this.array.fill(void 0),this.version++}*[Symbol.iterator](){const e=this.version;for(let t=0;t<this.count;t++){const n=this.array[(this.first+t)%this.array.length];if(yield n,this.version!==e)throw new Error("Iterator is invalid due to changes in the collection.")}}}t.Queue=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshService=void 0;const i=n(4);t.SshService=class{constructor(e){this.session=e,this.disposed=!1,this.disposedEmitter=new i.Emitter,this.onDisposed=this.disposedEmitter.event}get trace(){return this.session.trace}dispose(){this.disposed||(this.disposed=!0,this.disposedEmitter.fire())}async onSessionRequest(e,t){this.session.raiseSessionRequest(e)}async onChannelOpening(e,t){this.session.raiseChannelOpening(e)}async onChannelRequest(e,t,n){}async sendMessage(e,t){await this.session.sendMessage(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCODE_SERVER_PORT_NAME="VSCodeServerInternal",t.CODESPACES_PORT_NAME="CodespacesInternal"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceHubClient=void 0;var i=n(605);Object.defineProperty(t,"WorkspaceHubClient",{enumerable:!0,get:function(){return i.WorkspaceHubClient}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(65);class r extends i.ConnectionError{constructor(){super(...arguments),this.errorType="ConnectionCancellationError"}}t.ConnectionCancellationError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(65);class r extends i.ConnectionError{constructor(){super(...arguments),this.errorType="ConnectionTimeoutError"}}t.ConnectionTimeoutError=r},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(10),o=n(36),a=n(578),c=n(351),l=n(65),u=n(134),h=n(241),d=n(135);class p extends u.Connection{constructor(e,t,n){super(e.createChild("liveshare"),t),this.performance=t,this.options=n}getId(e){const{workspaceId:t}=e;return t}get type(){return c.TConnectionTypes.MainThread}get workspaceClient(){return r.assertDefined(this.workspaceClientReference,"No `WorkspaceClient` found."),this.workspaceClientReference}getRpcService(e){return this.workspaceClient.getServiceProxy(e)}dispose(e){super.dispose(e),this.workspaceClientReference=void 0,this.workspaceSessionInfoReference=void 0}get workspaceSessionInfo(){return this.workspaceSessionInfoReference}createWorkspaceClient(){return i(this,void 0,void 0,(function*(){return new a.WorkspaceClient(this.trace.createChild("WorkspaceClient"),void 0,{enabled:!0,retryTimeout:.25*r.TIME_SECOND_MS,maxTimeReconnect:10*r.TIME_SECOND_MS})}))}setWorkspaceSessionInfo(e){this.workspaceSessionInfoReference=e}createConnection(){return i(this,void 0,void 0,(function*(){try{this.initializeConnection(),this.trace.info("creating workspace client",this.options);const e=yield this.createWorkspaceClient();this.addToDisposables({dispose:()=>{e.dispose("Disposed from LiveShareConnection")}});const t=yield this.performance.measure({id:h.PerformanceEventIds.LiveshareJoinWorkspace,name:"join LiveShare session"},()=>i(this,void 0,void 0,(function*(){return yield e.join(Object.assign(Object.assign({},this.options),{performance:this.performance.createGroup(`${this.trace.name}:${this.options.workspaceId}`),checkConnectionOptions:{enabled:!0}}))})));return this.workspaceClientReference=e,this.setWorkspaceSessionInfo(t),this.trace.info("LS session joined and authenticated"),yield this.performance.measure({name:"create workspace service"},()=>i(this,void 0,void 0,(function*(){const t=e.getServiceProxy(s.vsls.WorkspaceService);r.assertDefined(t,"WorkspaceService not set."),yield e.rpcClient.onClose(()=>{this.onConnectionChangedHandler("disconnected",new l.ConnectionError("RPC client closed."))}),this.addToDisposables(t.onConnectionStatusChanged(e=>{e.connectionStatus===s.vsls.WorkspaceConnectionStatus.Disconnected&&this.onConnectionChangedHandler("disconnected",new l.ConnectionError(`Workspace service disconnected with status: "${e.disconnectedReason}".`))}))}))),this.onConnectionChangedHandler("connected"),e.onHostConnectionChanged(e=>{this.trace.info(`host connection changed to "${o.ConnectedState[e.state]}"`),e.state===o.ConnectedState.Reconnecting?this.initializeConnection():e.state===o.ConnectedState.Reconnected?this.onConnectionChangedHandler("connected"):e.state===o.ConnectedState.Closed&&this.onConnectionChangedHandler("disconnected")}),this}catch(e){throw this.handleConnectionError(e),d.errorToConnectionError(e)}}))}}t.LiveShareConnection=p},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcClientProxy=t.RpcClientProxyBase=void 0;const r=n(17),s=n(0);class o extends s.DisposableClass{constructor(e){super(e)}sendNotification(e,t,n){return i(this,void 0,void 0,(function*(){const i=yield this.ensureConnectionAsync(),s=r.LoggerSettings.disableObfuscation?JSON.stringify(n):"";e.verbose(`sendNotification-> ${t}: ${s}`),Array.isArray(n)?i.sendNotification(t,...n):i.sendNotification(t,n)}))}sendRequest(e,t,n,o,...a){return i(this,void 0,void 0,(function*(){let i=!1;const c=yield Promise.race([this.ensureConnectionAsync(),new Promise((e,t)=>{if(o){if(o.isCancellationRequested)return t(new s.CancellationError("The request was cancelled."));o.onCancellationRequested(()=>{i||t(new s.CancellationError("The request was cancelled."))})}})]);i=!0;let l="";r.LoggerSettings.disableObfuscation&&(l=JSON.stringify(a),l=l.substr(1,l.length-2)),e.verbose(`< ${t}(${l})`);const u=Date.now();let h;try{let e;n&&(n.cancellation=o,a.progress=n),e=o?c.sendRequest(t,a,o):c.sendRequest(t,a),h=yield e}catch(n){throw this.isDisposed,e.error(`> ${t}() error: `+n.data),n}const d=(Date.now()-u).toFixed(1);return r.LoggerSettings.disableObfuscation?e.verbose(`> ${t}() => ${JSON.stringify(h)} t:${d}`):e.verbose(`> ${t}() succeeded t:${d}`),h}))}}t.RpcClientProxyBase=o;class a extends o{constructor(e,t){super(t),this.promise=e,this.initPromise=Promise.resolve()}static fromRpcConnection(e,t){return new a(Promise.resolve(e),t)}static fromPromise(e,t){return new a(e,t)}ensureConnectionAsync(){return this.promise}}t.RpcClientProxy=a},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcServiceHandler=t.RpcServiceHandlerBase=t.methodProgress=void 0;const o=s(n(4)),a=n(0),c=n(136),l=n(333),u=n(136);t.methodProgress="$/progress";class h extends a.DisposableClass{constructor(e){super(e),this.rpcRequestsWithContext=new c.RpcRequestsWithContext,this.rpcReadFilters=[this.rpcRequestsWithContext.readFilter],this.rpcWriteFilters=[],this.progressHandlers=new Map,this.requests=new Map,this.requestsWithProgress=new Set,this.notifications=new Map,this.notificationsCookies=0,this.handleNoneRequestCallbacks=new a.CallbackContainer,this.handleNoneNotificationCallbacks=new a.CallbackContainer,this.addProgressFilters()}get serviceNames(){const e=new Set,t=t=>{for(const n of t)e.add(n.split(".")[0])};return t(this.requests.keys()),t(this.notifications.keys()),Array.from(e)}clear(){this.requests.clear(),this.requestsWithProgress.clear(),this.notifications.clear(),this.handleNoneRequestCallbacks.clear(),this.handleNoneNotificationCallbacks.clear()}onHandleNoneRequest(e){return this.handleNoneRequestCallbacks.add(e)}onHandleNoneNotification(e){return this.handleNoneNotificationCallbacks.add(e)}createRpcConnection(e,t){return o.createMessageConnection(this.createFilteredMessageReader(e.reader),this.createFilteredMessageWriter(e.writer),new l.RpcLoggerAdapter(t))}addReadFilter(e){return d(this.rpcReadFilters,e)}addWriteFilter(e){return d(this.rpcWriteFilters,e)}addRequestMethod(e,t){this.requests.set(e,t)}addRequestMethodWithContext(e,t){this.addRequestMethod(e,t),this.rpcRequestsWithContext.add(e)}addRequestMethodWithProgress(e,t){this.addRequestMethod(e,t),this.requestsWithProgress.add(e)}removeRequestMethod(e){this.requests.delete(e),this.requestsWithProgress.delete(e)}addNotificationHandler(e,t){let n=this.notifications.get(e);n||(n=[],this.notifications.set(e,n));const i={cookie:++this.notificationsCookies,notificationHandler:t};return n.push(i),i.cookie}removeNotificationHandler(e,t){const n=this.notifications.get(e);if(n){const e=n.findIndex(e=>e.cookie===t);if(-1!==e)return n.splice(e,1)[0].notificationHandler}}onRequest(e,n,i,...r){const s=this.requests.get(i);if(!s){for(const e of this.handleNoneRequestCallbacks.items){const t=e(n,i,...r);if(void 0!==t)return t}return Promise.resolve(u.createMethodNotFoundResponse(i))}const[o]=r.splice(0,1);if(this.requestsWithProgress.has(i)){const e={report:e=>{n.sendNotification(t.methodProgress,{id:o,value:e})}};r.splice(r.length-1,0,e)}return e?e(s,...r):s(...r)}onNotification(e,n,...i){if(n!==t.methodProgress||"object"!=typeof i[0])if(this.notifications.has(n))this.notifications.get(n).forEach(e=>{e.notificationHandler(...i)});else for(const t of this.handleNoneNotificationCallbacks.items)t(e,n,...i)}createFilteredMessageReader(e){return new c.WrappedMessageReader(e,e=>h.filterMessage(e,this.rpcReadFilters))}createFilteredMessageWriter(e){return new c.WrappedMessageWriter(e,e=>h.filterMessage(e,this.rpcWriteFilters))}static filterMessage(e,t){for(const n of t)e=n(e);return e}addProgressFilters(){this.rpcReadFilters.push(e=>{const n=e,i=n.id;if(void 0!==i)Array.isArray(n.params)?n.params.splice(0,0,i):void 0!==n.params?n.params=[i,n.params]:n.params=[i],void 0===n.result&&void 0===n.error||this.progressHandlers.delete(i);else if(n.method===t.methodProgress){let e=n.params;void 0===e.id&&(e=n.params[0]);const t=this.progressHandlers.get(e.id);t&&t.report(e.value,e.id)}return e}),this.rpcWriteFilters.push(e=>{const t=e,n=t.id,i=t.params;if(void 0!==n&&i&&i.progress&&"function"==typeof i.progress.report){this.progressHandlers.set(t.id,t.params.progress);const e=i.progress.cancellation;e&&e.onCancellationRequested(()=>{this.progressHandlers.delete(n)}),delete i.progress}return e})}}t.RpcServiceHandlerBase=h;function d(e,t){return e.push(t),{dispose:()=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}t.RpcServiceHandler=class extends h{registerRpcService(e,t,n,i){if(!e)throw new Error("service argument is missing or undefined");if(!t)throw new Error("serviceInfo argument is missing or undefined");if(n&&n.filter(e=>t.methods.indexOf(e)<0).length>0)throw new Error("invalid context method");const r=t.name;if(!r)throw new Error("serviceInfo.serviceName is empty or undefined");let s=!0;const o=new Set,a=new Map;let c=[];const l={dispose:()=>{s=!1;for(const e of c)e.dispose();c=[];for(const e of o)this.removeRequestMethod(e);o.clear();for(const[e,t]of a)this.removeNotificationHandler(e,t);a.clear()}},h=e.$RestrictedHandlers$;try{for(const s of t.methods){const a=`${r}.${s}`,c=h&&h.get(s);if(c){this.addRequestMethodWithContext(a,(...t)=>c.apply(e,t)),o.add(a);continue}const l=e[s]||e[s+"Async"];if("function"==typeof l)n&&n.indexOf(s)>=0?this.addRequestMethodWithContext(a,(...t)=>l.apply(e,t)):this.addRequestMethod(a,(...t)=>l.apply(e,t)),o.add(a);else if(i||void 0===i)throw new Error(`Object ${t.name} does not implement method '${s}' of service '${r}'.`)}if(t.voidMethods)for(const n of t.voidMethods){const s=`${r}.${n}`;if(h&&h.get(n))throw new Error(`Restricted operation check is not supported yet for notification methods. Object ${t.name} restricts notification '${n}' of service '${r}'.`);const o=this[n]||e[n];if("function"!=typeof o){if(i)throw new Error(`Object ${t.name} does not implement notification '${n}' of service '${r}'.`);continue}const c=this.addNotificationHandler(s,(...t)=>o.apply(e,t));a.set(s,c)}if(t.events)for(const n of t.events){if(!n)continue;const t=u.getEventPropertyName(n),i=e[t];"function"==typeof i&&i(e=>{s&&this.sendNotification(this.trace,`${r}.${n}`,e).catch(e=>this.trace.error(`Failed to send notification:${r}.${n}`,e))},c)}}catch(e){throw l.dispose(),e}return l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeAlgorithm=void 0;t.KeyExchangeAlgorithm=class{constructor(e,t,n,i){this.name=e,this.keySizeInBits=t,this.hashAlgorithmName=n,this.hashDigestLength=i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionAlgorithm=void 0;t.EncryptionAlgorithm=class{constructor(e){this.name=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HmacAlgorithm=void 0;t.HmacAlgorithm=class{constructor(e,t,n,i){this.name=e,this.algorithmName=t,this.keyLength=n,this.digestLength=i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebHmac=void 0;const i=n(6),r=n(231);class s extends r.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,s.getHashKeyLength(t),s.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){const t=new o(this.algorithmName,!0,this.digestLength,this.encryptThenMac);return await t.init(e),t}async createVerifier(e){const t=new o(this.algorithmName,!1,this.digestLength,this.encryptThenMac);return await t.init(e),t}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error("Unsupported hash algorithm: "+e)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getWebHashAlgorithmName(e){if("SHA2-512"===e)return"SHA-512";if("SHA2-384"===e)return"SHA-384";if("SHA2-256"===e)return"SHA-256";throw new Error("Unsupported hash algorithm: "+e)}}t.WebHmac=s;class o{constructor(e,t,n,i){this.algorithmName=e,this.isSigning=t,this.digestLength=n,this.encryptThenMac=i}async init(e){try{const t=this.algorithmName.replace("SHA2-","SHA-");this.key=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:t}},!1,this.isSigning?["sign"]:["verify"])}catch(e){throw new Error("Failed to initialize HMAC: "+e)}}async sign(e){return i.Buffer.from(await crypto.subtle.sign({name:"HMAC",hash:{name:this.algorithmName}},this.key,e))}async verify(e,t){return await crypto.subtle.verify({name:"HMAC",hash:{name:this.algorithmName}},this.key,t,e)}dispose(){}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonWebKeyFormatter=void 0;const i=n(58),r=n(177);class s{static formatRsa(e,t){const n=s.formatBigInt;let i;if(!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi)i={kty:"RSA",n:n(e.modulus),e:n(e.exponent),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)};else{if(t)throw new Error("Missing private key parameters.");i={kty:"RSA",n:n(e.modulus),e:n(e.exponent)}}return i}static parseRsa(e,t){if("RSA"!==(null==e?void 0:e.kty)||!e.n||!e.e)throw new Error("Invalid RSA JWK.");const n=s.parseBigInt;let i;return i=!1!==t&&e.d&&e.p&&e.q&&e.dp&&e.dq&&e.qi?{modulus:n(e.n),exponent:n(e.e),d:n(e.d),p:n(e.p),q:n(e.q),dp:n(e.dp),dq:n(e.dq),qi:n(e.qi)}:{modulus:n(e.n),exponent:n(e.e)},i}static formatEC(e,t){const n=s.formatBigInt,i=r.curves.find(t=>t.oid===e.curve.oid||t.name===e.curve.name||t.shortName===e.curve.name),o=Math.ceil(i.keySize/8),a={kty:"EC",crv:e.curve.name,x:n(e.x,o),y:n(e.y,o)};if(!1!==t&&e.d)a.d=n(e.d,o);else if(t)throw new Error("Missing private key parameters.");return a}static parseEC(e,t){if("EC"!==(null==e?void 0:e.kty)||!(e.crv&&e.x&&e.y))throw new Error("Invalid EC JWK.");const n=s.parseBigInt,i={curve:{name:e.crv},x:n(e.x),y:n(e.y)};return!1!==t&&e.d&&(i.d=n(e.d)),i}static formatBigInt(e,t){return s.base64UrlEncode(e.toBytes({unsigned:!0,length:t}))}static parseBigInt(t){return i.BigInt.fromBytes(e.from(t,"base64"),{unsigned:!0})}static base64UrlEncode(e){return e.toString("base64").replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}t.JsonWebKeyFormatter=s}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHmac=void 0;const i=n(56),r=n(6),s=n(231);class o extends s.HmacAlgorithm{constructor(e,t,n=!1){super(e,t,o.getHashKeyLength(t),o.getHashDigestLength(t)),this.encryptThenMac=n}async createSigner(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}async createVerifier(e){return new a(o.getNodeHashAlgorithmName(this.algorithmName),this.digestLength,this.encryptThenMac,e)}static getHashKeyLength(e){if("SHA2-512"===e)return 64;if("SHA2-384"===e)return 48;if("SHA2-256"===e)return 32;throw new Error("Unsupported hash algorithm: "+e)}static getHashDigestLength(e){return this.getHashKeyLength(e)}static getNodeHashAlgorithmName(e){if("SHA2-512"===e)return"sha512";if("SHA2-384"===e)return"sha384";if("SHA2-256"===e)return"sha256";throw new Error("Unsupported hash algorithm: "+e)}}t.NodeHmac=o;class a{constructor(e,t,n,s){this.algorithmName=e,this.digestLength=t,this.encryptThenMac=n,this.key=i.createSecretKey?i.createSecretKey(s):r.Buffer.from(s)}async sign(e){const t=i.createHmac(this.algorithmName,this.key);t.update(e);return t.digest()}async verify(e,t){const n=i.createHmac(this.algorithmName,this.key);n.update(e);return n.digest().equals(t)}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DerWriter=t.DerReader=void 0;const i=n(6),r=n(58);class s{constructor(e,t=48){this.buffer=e,this.position=0,this.readType(t);const n=this.readLength();if(n>this.buffer.length-this.position)throw new Error("Read out of bounds.");this.buffer=this.buffer.slice(0,this.position+n)}get available(){return this.buffer.length-this.position}readNull(){if(this.readType(5),0!==this.readByte())throw new Error("Expected a 0 after Null type.")}readInteger(){this.readType(2);const e=this.readLength(),t=this.readBytes(e);return new r.BigInt(t)}readOctetString(){this.readType(4);const e=this.readLength();return this.readBytes(e)}readBitString(){this.readType(3);const e=this.readLength();if(0!==this.readByte())throw new Error("Padded bit strings are not supported.");return this.readBytes(e-1)}readObjectIdentifier(e){this.readType(6);const t=this.readLength(),n=this.position+t,i=[],r=this.readByte();i.push(Math.trunc(r/40)),i.push(r%40);let s=0;for(;this.position<n;){const e=this.readByte();0!=(128&e)?s=128*s+(127&e):(s=128*s+e,i.push(s),s=0)}if(0!==s)throw new Error("Invalid OID format.");const o=i.join(".");if(e&&o!==e)throw new Error(`Expected OID ${e}, found: ${o}`);return o}readSequence(){const e=this.position;this.readType(48);const t=this.readLength();return this.position+=t,new s(this.buffer.slice(e,this.position))}tryReadTagged(e){if(this.position>=this.buffer.length)return null;const t=this.buffer[this.position];if(0==(160&t)||(-161&t)!==e)return null;const n=this.position;this.position++;const i=this.readLength();this.position+=i;return new s(this.buffer.slice(n,this.position),t)}peek(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position]}readLength(){let e=this.readByte();if(128===e)throw new Error("Indefinite-length encoding is not supported.");if(e>127){const t=127&e;if(t>4)throw new Error(`DER length size is ${t} and cannot be more than 4 bytes.`);e=0;for(let n=0;n<t;n++){e=(e<<8)+this.readByte()}if(e<0)throw new Error("Corrupted data - negative length found")}return e}readByte(){if(this.position>=this.buffer.length)throw new Error("Read out of bounds.");return this.buffer[this.position++]}readBytes(e){if(this.position+e>this.buffer.length)throw new Error("Read out of bounds.");const t=this.buffer.slice(this.position,this.position+e);return this.position+=e,t}readType(e){const t=this.readByte();if(t!==e)throw new Error(`Expected ${e} data type, found : ${t}`)}}t.DerReader=s;class o{constructor(e,t=48){this.buffer=e,this.dataType=t,this.position=0,this.buffer=e}toBuffer(){const e=this.position,t=o.getLength(e);this.ensureCapacity(1+t.length+e);const n=this.buffer.slice(0,1+t.length+e);return this.buffer.copy(n,1+t.length),n[0]=this.dataType,t.copy(n,1,0),this.buffer=this.buffer.slice(1+t.length,n.length),this.position=e,n}writeSequence(e){this.writeBytes(e.toBuffer())}writeTagged(e,t){if(e>15)throw new Error("Invalid DER tag.");this.writeByte(160|e);const n=o.getLength(t.position);this.writeBytes(n),this.writeBytes(t.buffer.slice(0,t.position))}writeNull(){this.writeByte(5),this.writeByte(0)}writeInteger(e){this.writeByte(2);const t=e.toBytes(),n=o.getLength(t.length);this.writeBytes(n),this.writeBytes(t)}writeOctetString(e){this.writeByte(4);const t=o.getLength(e.length);this.writeBytes(t),this.writeBytes(e)}writeBitString(e){this.writeByte(3);const t=o.getLength(1+e.length);this.writeBytes(t),this.writeByte(0),this.writeBytes(e)}writeObjectIdentifier(e){if(!e)throw new TypeError("OID value is null or empty.");const t=e.split(".").map(Number);if(t.length<2||t[0]>3||t[1]>=40)throw new Error("Invalid OID: "+e);this.writeByte(6);let n=t.length-1;for(let e=2;e<t.length;e++){let i=t[e];for(;i>128;)n++,i/=128}const i=o.getLength(n);this.writeBytes(i),this.writeByte(40*t[0]+t[1]);for(let e=2;e<t.length;e++){let n=t[e];if(n>=128){let e=[];for(e.push(127&n);n>=128;)n/=128,e.push(128|127&n);for(;e.length>0;)this.writeByte(e.pop())}else this.writeByte(n)}}static getLength(e){if(e>127){let t=1;for(let n=e>>8;0!==n;n>>=8)t++;const n=o.lengthBuffer.slice(0,t+1);n[0]=128|t;for(let i=8*(t-1),r=1;i>=0;i-=8,r++)n[r]=e>>i;return n}{const t=o.lengthBuffer.slice(0,1);return t[0]=e,t}}writeByte(e){this.ensureCapacity(this.position+1),this.buffer[this.position++]=e}writeBytes(e){this.ensureCapacity(this.position+e.length),e.copy(this.buffer,this.position),this.position+=e.length}ensureCapacity(e){if(this.buffer.length<e){let t=Math.max(512,2*this.buffer.length);for(;t<e;)t*=2;const n=i.Buffer.alloc(t);this.buffer.copy(n,0,0,this.position),this.buffer=n}}}t.DerWriter=o,o.lengthBuffer=i.Buffer.alloc(10)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannel=void 0;const i=n(4),r=n(120),s=n(90),o=n(60),a=n(340),c=n(91),l=n(47),u=n(237),h=n(341),d=n(92),p=n(140),f=n(59);class g{constructor(e,t,n,r,s,o){this.connectionService=e,this.channelType=t,this.remoteChannelId=n,this.remoteWindowSize=r,this.remoteMaxPacketSize=s,this.channelId=o,this.remoteClosed=!1,this.localClosed=!1,this.sentEof=!1,this.disposed=!1,this.openSendingWindowCompletionSource=null,this.requestCompletionSource=null,this.sendSemaphore=new p.Semaphore(0),this.metrics=new a.ChannelMetrics,this.dataReceivedEmitter=new i.Emitter,this.onDataReceived=this.dataReceivedEmitter.event,this.eofEmitter=new i.Emitter,this.onEof=this.eofEmitter.event,this.closedEmitter=new i.Emitter,this.onClosed=this.closedEmitter.event,this.requestEmitter=new i.Emitter,this.onRequest=this.requestEmitter.event,this.windowSize=g.initialWindowSize,this.maxPacketSize=g.dataPacketSize}get session(){return this.connectionService.session}get isClosed(){return this.localClosed||this.remoteClosed}async request(e,t){if(!e)throw new TypeError("Request is required.");if(this.disposed)throw new l.ObjectDisposedError(this);if(e.recipientChannel=this.remoteChannelId,!e.wantReply)return await this.session.sendMessage(e,t),!0;if(null!=this.requestCompletionSource)throw new Error("Another request is already pending.");const n=new c.PromiseCompletionSource;if(this.requestCompletionSource=n,t){if(t.isCancellationRequested)throw new d.CancellationError;t.onCancellationRequested(()=>{n.reject(new d.CancellationError)})}return await this.session.sendMessage(e,t),await n.promise}async send(t,n){if(this.disposed)throw new l.ObjectDisposedError(this);if(0!==t.length){if(this.sentEof)throw new Error("Cannot send more data after EOF.");await this.sendSemaphore.wait(n);try{let i=0,r=t.length;for(;r>0;){let o=Math.min(Math.min(this.remoteWindowSize,this.remoteMaxPacketSize),r);for(;0===o;)this.openSendingWindowCompletionSource||(this.openSendingWindowCompletionSource=new c.PromiseCompletionSource),this.session.trace(f.TraceLevel.Warning,f.SshTraceEventIds.channelWaitForWindowAdjust,this+" send window is full. Waiting for window adjustment before sending."),await(0,d.withCancellation)(this.openSendingWindowCompletionSource.promise,n),this.openSendingWindowCompletionSource=null,o=Math.min(Math.min(this.remoteWindowSize,this.remoteMaxPacketSize),r);const a=new s.ChannelDataMessage;a.recipientChannel=this.remoteChannelId,a.data=e.from(t.slice(i,i+o)),await this.session.sendMessage(a,n),this.remoteWindowSize-=o,r-=o,i+=o,this.metrics.addBytesSent(o)}}finally{this.sendSemaphore.tryRelease()}}else await this.sendEof()}enableSending(){this.sendSemaphore.tryRelease()}async sendEof(e){if(!this.sentEof){await this.sendSemaphore.wait(e);try{this.sentEof=!0;const t=new s.ChannelEofMessage;t.recipientChannel=this.remoteChannelId,await this.session.sendMessage(t,e)}finally{this.sendSemaphore.tryRelease()}}}async handleRequest(e,t){if(!e.requestType)throw new l.SshConnectionError("Channel request type not specified.",o.SshDisconnectReason.protocolError);if(e.requestType===s.ChannelRequestType.exitStatus){const t=new s.ChannelSignalMessage;return e.convertTo(t),this.exitStatus=t.exitStatus,!0}if(e.requestType===s.ChannelRequestType.exitSignal){const t=new s.ChannelSignalMessage;return e.convertTo(t),this.exitSignal=t.exitSignal,this.exitErrorMessage=t.errorMessage,!0}if(e.requestType===s.ChannelRequestType.signal){const t=new s.ChannelSignalMessage;e.convertTo(t)}const n=new u.SshRequestEventArgs(e.requestType,e,this.session.principal),i=(0,r.findService)(this.session.config.services,t=>(!t.channelType||t.channelType===this.channelType)&&t.channelRequest===e.requestType);await this.sendSemaphore.wait(t);try{if(i){const e=this.session.activateService(i);await e.onChannelRequest(this,n,t)}else this.requestEmitter.fire(n);if(e.wantReply){let e;if(n.isAuthorized){const t=new s.ChannelSuccessMessage;t.recipientChannel=this.remoteChannelId,e=t}else{const t=new s.ChannelFailureMessage;t.recipientChannel=this.remoteChannelId,e=t}await this.session.sendMessage(e,t)}}finally{this.sendSemaphore.tryRelease()}return n.isAuthorized||!1}handleResponse(e){this.requestCompletionSource&&(this.requestCompletionSource.resolve(e),this.requestCompletionSource=null)}handleDataReceived(e){this.metrics.addBytesReceived(e.length),this.dataReceivedEmitter.fire(e)}adjustWindow(e){if(!this.disposed&&(this.windowSize-=e,this.windowSize<=this.maxPacketSize)){const e=new s.ChannelWindowAdjustMessage;e.recipientChannel=this.remoteChannelId,e.bytesToAdd=g.initialWindowSize-this.windowSize,this.windowSize=g.initialWindowSize,this.session.sendMessage(e).catch(e=>{this.session.trace(f.TraceLevel.Error,f.SshTraceEventIds.channelWindowAdjustFailed,"Error sending window adjust message: "+e.message,e)})}}adjustRemoteWindow(e){this.remoteWindowSize+=e,this.openSendingWindowCompletionSource&&this.openSendingWindowCompletionSource.resolve(void 0)}handleEof(){this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelEofReceived,this+" EOF received."),this.eofEmitter.fire()}close(e,t,n){if(e instanceof Error){const t=e;return this.localClosed||(this.localClosed=!0,this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,`${this} Closed: ${t.message}`),this.closedEmitter.fire(new h.SshChannelClosedEventArgs(t))),void this.disposeInternal()}return"number"==typeof e?this.closeWithStatus(e,t):"string"==typeof e?this.closeWithSignal(e,t,n):this.closeDefault(e)}async closeDefault(e){var t;if(!this.remoteClosed&&!this.localClosed){this.remoteClosed=!0,await this.sendSemaphore.wait(e);try{const e=new s.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,await this.session.sendMessage(e)}catch(e){}finally{this.sendSemaphore.tryRelease()}}if(!this.localClosed){this.localClosed=!0;const e=this.raiseClosedEvent();null===(t=this.requestCompletionSource)||void 0===t||t.reject(new l.SshChannelError(e))}this.disposeInternal()}async closeWithStatus(e,t){if(!this.remoteClosed&&!this.localClosed){this.exitStatus=e;const t=new s.ChannelSignalMessage;t.recipientChannel=this.remoteChannelId,t.exitStatus=e,await this.session.sendMessage(t)}await this.closeDefault(t)}async closeWithSignal(e,t,n){if(!this.remoteClosed&&!this.localClosed){this.exitSignal=e,this.exitErrorMessage=t;const n=new s.ChannelSignalMessage;n.recipientChannel=this.remoteChannelId,n.exitSignal=e,n.errorMessage=t,await this.session.sendMessage(n)}await this.closeDefault(n)}handleClose(){var e;if(!this.localClosed){this.localClosed=!0;const t=this.raiseClosedEvent(!0);null===(e=this.requestCompletionSource)||void 0===e||e.reject(new l.SshChannelError(t))}this.disposeInternal()}raiseClosedEvent(e=!1){const t=` (S: ${this.metrics.bytesSent}, R: ${this.metrics.bytesReceived})`,n=e?"remotely":"locally";let i,r;return void 0!==this.exitStatus?(r=new h.SshChannelClosedEventArgs(this.exitStatus),i=`${this} closed ${n}: status=${this.exitStatus}`):void 0!==this.exitSignal?(r=new h.SshChannelClosedEventArgs(this.exitSignal,this.exitErrorMessage),i=`${this} closed ${n}: signal=${this.exitSignal} ${this.exitErrorMessage}`):(r=new h.SshChannelClosedEventArgs,i=`${this} closed ${n}.`),this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,i+t),this.closedEmitter.fire(r),i}dispose(){var e;if(!this.disposed&&!this.localClosed){if(!this.remoteClosed){this.remoteClosed=!0;const e=new s.ChannelCloseMessage;e.recipientChannel=this.remoteChannelId,this.session.sendMessage(e).catch(e=>{})}const t=this.session.isClosed?this.session+" closed.":this+" disposed.";this.session.trace(f.TraceLevel.Info,f.SshTraceEventIds.channelClosed,t);const n=new h.SshChannelClosedEventArgs("SIGABRT",t);this.localClosed=!0,this.closedEmitter.fire(n),null===(e=this.requestCompletionSource)||void 0===e||e.reject(new l.SshChannelError(t))}this.disposeInternal()}disposeInternal(){var e;this.disposed||(this.disposed=!0,null===(e=this.requestCompletionSource)||void 0===e||e.reject(new l.ObjectDisposedError(this)),this.connectionService._removeChannel(this),this.sendSemaphore.dispose())}toString(){return`SshChannel(Type: ${this.channelType}, Id: ${this.channelId}, RemoteId: ${this.remoteChannelId})`}}t.SshChannel=g,g.sessionChannelType="session",g.dataPacketSize=32768,g.initialWindowSize=32*g.dataPacketSize}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRequestEventArgs=void 0;t.SshRequestEventArgs=class{constructor(e,t,n){this.requestType=e,this.request=t,this.principal=n}toString(){return"RequestType: "+this.requestType+this.request?" Request: "+this.request:""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewKeysMessage=t.KeyExchangeDhReplyMessage=t.KeyExchangeDhInitMessage=t.KeyExchangeInitMessage=t.KeyExchangeMessage=void 0;const i=n(6),r=n(77),s=n(119);class o extends r.SshMessage{}t.KeyExchangeMessage=o;class a extends o{get messageType(){return 20}onRead(e){this.cookie=e.read(16),this.keyExchangeAlgorithms=e.readList("ascii"),this.serverHostKeyAlgorithms=e.readList("ascii"),this.encryptionAlgorithmsClientToServer=e.readList("ascii"),this.encryptionAlgorithmsServerToClient=e.readList("ascii"),this.macAlgorithmsClientToServer=e.readList("ascii"),this.macAlgorithmsServerToClient=e.readList("ascii"),this.compressionAlgorithmsClientToServer=e.readList("ascii"),this.compressionAlgorithmsServerToClient=e.readList("ascii"),this.languagesClientToServer=e.readList("ascii"),this.languagesServerToClient=e.readList("ascii"),this.firstKexPacketFollows=e.readBoolean(),this.reserved=e.readUInt32()}onWrite(e){this.cookie||(this.cookie=i.Buffer.alloc(16),s.SshAlgorithms.random.getBytes(this.cookie)),e.write(this.cookie),e.writeList(this.keyExchangeAlgorithms||[],"ascii"),e.writeList(this.serverHostKeyAlgorithms||[],"ascii"),e.writeList(this.encryptionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.encryptionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.macAlgorithmsClientToServer||[],"ascii"),e.writeList(this.macAlgorithmsServerToClient||[],"ascii"),e.writeList(this.compressionAlgorithmsClientToServer||[],"ascii"),e.writeList(this.compressionAlgorithmsServerToClient||[],"ascii"),e.writeList(this.languagesClientToServer||[],"ascii"),e.writeList(this.languagesServerToClient||[],"ascii"),e.writeBoolean(this.validateField(this.firstKexPacketFollows,"first KEX package follows")),e.writeUInt32(this.reserved||0)}}t.KeyExchangeInitMessage=a;class c extends o{get messageType(){return 30}onRead(e){this.e=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.e,"E"))}}t.KeyExchangeDhInitMessage=c;class l extends o{get messageType(){return 31}onRead(e){this.hostKey=e.readBinary(),this.f=e.readBinary(),this.signature=e.readBinary()}onWrite(e){e.writeBinary(this.validateField(this.hostKey,"host key")),e.writeBinary(this.validateField(this.f,"F")),e.writeBinary(this.validateField(this.signature,"signature"))}}t.KeyExchangeDhReplyMessage=l;class u extends o{get messageType(){return 21}onRead(e){}onWrite(e){}}t.NewKeysMessage=u,r.SshMessage.index.set(20,a),r.SshMessage.index.set(30,c),r.SshMessage.index.set(31,l),r.SshMessage.index.set(21,u)},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationService=void 0;const s=n(179),o=n(344),a=n(4),c=n(38),l=n(60),u=n(240),h=n(141),d=n(120),p=n(178),f=n(59);let g=i=class extends s.SshService{constructor(e){var t;super(e),this.authenticationFailureCount=0,this.disposeCancellationSource=new a.CancellationTokenSource;const n=null===(t=e.algorithms)||void 0===t?void 0:t.publicKeyAlgorithmName;if(!n)throw new Error("Algorithms not initialized.");this.publicKeyAlgorithmName=n}handleMessage(e,t){if(e instanceof o.AuthenticationSuccessMessage)return this.handleSuccessMessage(e);if(e instanceof o.AuthenticationFailureMessage)return this.handleFailureMessage(e);if(e instanceof o.AuthenticationRequestMessage)return this.handleAuthenticationRequestMessage(e,t);throw new Error("Message not implemented: "+e)}async handleAuthenticationRequestMessage(e,t){if(this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticating,"Authentication request: "+e.methodName),"publickey"===e.methodName||"hostbased"===e.methodName)return this.handlePublicKeyRequestMessage(e.convertTo(new o.PublicKeyRequestMessage),t);if("password"===e.methodName)return this.handlePasswordRequestMessage(e.convertTo(new o.PasswordRequestMessage),t);if("none"===e.methodName)return this.handleAuthenticating(e,new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientNone,{username:e.username},t));{const e=new o.AuthenticationFailureMessage;e.methodNames=["publickey","password","hostbased"],await this.session.sendMessage(e,t)}}async handlePublicKeyRequestMessage(t,n){var i,r,s;const a=this.session.config.getPublicKeyAlgorithm(t.keyAlgorithmName);if(!a){const e=new o.AuthenticationFailureMessage;return e.methodNames=["publickey","password"],void await this.session.sendMessage(e,n)}const l=a.createKeyPair();let h;if(await l.setPublicKeyBytes(t.publicKey),"hostbased"===t.methodName)h=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientHostBased,{username:null!==(i=t.username)&&void 0!==i?i:"",publicKey:l,clientHostname:t.clientHostname,clientUsername:t.clientUsername});else if(t.hasSignature){const i=a.readSignatureData(t.signature),r=this.session.sessionId;if(null==r)throw new Error("Session ID not initialized.");const o=new c.SshDataWriter(e.alloc(r.length+t.payloadWithoutSignature.length+20));o.writeBinary(r),o.write(t.payloadWithoutSignature);const d=o.toBuffer(),p=a.createVerifier(l);await p.verify(d,i)||await this.handleAuthenticationFailure("Public key authentication failed: invalid signature.",n),h=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKey,{username:null!==(s=t.username)&&void 0!==s?s:"",publicKey:l})}else h=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPublicKeyQuery,{username:null!==(r=t.username)&&void 0!==r?r:"",publicKey:l});await this.handleAuthenticating(t,h,n)}async handlePasswordRequestMessage(e,t){var n,i;const r=new u.SshAuthenticatingEventArgs(u.SshAuthenticationType.clientPassword,{username:null!==(n=e.username)&&void 0!==n?n:"",password:null!==(i=e.password)&&void 0!==i?i:""});await this.handleAuthenticating(e,r,t)}async handleAuthenticating(e,t,n){var i;let r=null;try{r=await this.session.raiseAuthenticatingEvent(t)}catch(e){if(!(e instanceof Error))throw e;this.trace(f.TraceLevel.Error,f.SshTraceEventIds.authenticationError,"Error while authenticating client: "+e.message,e),r=null}if(r)if(t.authenticationType===u.SshAuthenticationType.clientPublicKeyQuery){const t=e,i=new o.PublicKeyOKMessage;i.keyAlgorithmName=t.keyAlgorithmName,i.publicKey=t.publicKey,await this.session.sendMessage(i,n)}else this.session.principal=r,e.serviceName&&this.session.activateService(e.serviceName),this.trace(f.TraceLevel.Info,f.SshTraceEventIds.sessionAuthenticated,u.SshAuthenticationType[t.authenticationType]+" authentication succeeded."),await this.session.sendMessage(new o.AuthenticationSuccessMessage,n),null===(i=this.session)||void 0===i||i.handleClientAuthenticated();else await this.handleAuthenticationFailure(u.SshAuthenticationType[t.authenticationType]+" authentication failed.")}async handleAuthenticationFailure(e,t){this.authenticationFailureCount++,this.trace(f.TraceLevel.Warning,f.SshTraceEventIds.clientAuthenticationFailed,e);const n=new o.AuthenticationFailureMessage;n.methodNames=["publickey","password","hostbased"],await this.session.sendMessage(n,t),this.authenticationFailureCount>=this.session.config.maxClientAuthenticationAttempts&&await this.session.close(l.SshDisconnectReason.noMoreAuthMethodsAvailable,"Authentication failed.")}async authenticateClient(e,t){var n,i,r,s;this.clientAuthenticationMethods=new p.Queue;for(let t of null!==(n=e.publicKeys)&&void 0!==n?n:[]){if(!t)continue;const n=null!==(i=e.username)&&void 0!==i?i:"";let r=t;const s=e.privateKeyProvider;this.clientAuthenticationMethods.enqueue(async e=>{if(!r.hasPrivateKey){if(null==s)throw new Error("A private key provider is required.");r=await s(t,null!=e?e:a.CancellationToken.None)}r?await this.requestPublicKeyAuthentication(n,r,e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)})}const o=e.passwordProvider;if(o)this.clientAuthenticationMethods.enqueue(async e=>{var t;const n=o(null!=e?e:a.CancellationToken.None),i=n?await n:null;i?await this.requestPasswordAuthentication(null!==(t=i[0])&&void 0!==t?t:"",i[1],e):await this.session.close(l.SshDisconnectReason.authCancelledByUser)});else if(e.password){const t=null!==(r=e.username)&&void 0!==r?r:"",n=e.password;this.clientAuthenticationMethods.enqueue(async e=>{await this.requestPasswordAuthentication(t,n,e)})}if(0===this.clientAuthenticationMethods.size){const t=null!==(s=e.username)&&void 0!==s?s:"";this.clientAuthenticationMethods.enqueue(async e=>{await this.requestUsernameAuthentication(t,e)})}const c=this.clientAuthenticationMethods.dequeue();await c(t)}async requestUsernameAuthentication(e,t){const n=new o.AuthenticationRequestMessage;n.serviceName=h.ConnectionService.serviceName,n.methodName="none",n.username=e,await this.session.sendMessage(n,t),this.session.activateService(h.ConnectionService)}async requestPublicKeyAuthentication(e,t,n){const i=this.session.config.publicKeyAlgorithms.find(e=>(null==e?void 0:e.keyAlgorithmName)===t.keyAlgorithmName);if(!i)throw new Error(`Public key algorithm '${t.keyAlgorithmName}' is not in session config.`);const r=new o.PublicKeyRequestMessage;r.serviceName=h.ConnectionService.serviceName,r.username=e,r.keyAlgorithmName=i.name,r.publicKey=await t.getPublicKeyBytes(i.name),r.signature=await this.createAuthenticationSignature(r,i,t),await this.session.sendMessage(r,n),0===this.clientAuthenticationMethods.size&&this.session.activateService(h.ConnectionService)}async requestPasswordAuthentication(e,t,n){const i=new o.PasswordRequestMessage;i.serviceName=h.ConnectionService.serviceName,i.username=e,i.password=t,await this.session.sendMessage(i,n),this.session.activateService(h.ConnectionService)}handleFailureMessage(e){this.session.onAuthenticationComplete(!1)}handleSuccessMessage(e){this.session.activateService(h.ConnectionService),this.session.onAuthenticationComplete(!0)}async createAuthenticationSignature(t,n,i){const r=this.session.sessionId;if(null==r)throw new Error("Session ID not initialized.");const s=new c.SshDataWriter(e.alloc(t.publicKey.length+(t.username||"").length+400));s.writeBinary(r),s.writeByte(t.messageType),s.writeString(t.username||"","utf8"),s.writeString(t.serviceName||"","ascii"),s.writeString("publickey","ascii"),s.writeBoolean(!0),s.writeString(t.keyAlgorithmName,"ascii"),s.writeBinary(t.publicKey);const o=n.createSigner(i),a=await o.sign(s.toBuffer());return n.createSignatureData(a)}};g.serviceName="ssh-userauth",g=i=r([(0,d.serviceActivation)({serviceRequest:i.serviceName})],g),t.AuthenticationService=g}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshAuthenticatingEventArgs=t.SshAuthenticationType=void 0;const i=n(4);var r;!function(e){e[e.clientNone=0]="clientNone",e[e.clientHostBased=1]="clientHostBased",e[e.clientPassword=2]="clientPassword",e[e.clientPublicKeyQuery=3]="clientPublicKeyQuery",e[e.clientPublicKey=4]="clientPublicKey",e[e.serverPublicKey=10]="serverPublicKey"}(r=t.SshAuthenticationType||(t.SshAuthenticationType={}));t.SshAuthenticatingEventArgs=class{constructor(e,{username:t,password:n,publicKey:s,clientHostname:o,clientUsername:a},c){this.authenticationType=e;const l=({usernameRequired:e,passwordRequired:i,publicKeyRequired:r,clientHostnameRequired:c,clientUsernameRequired:l})=>"string"==typeof t==!!e&&("string"==typeof n==!!i&&(!!s==!!r&&("string"==typeof o==!!c&&"string"==typeof a==!!l)));let u;switch(e){case r.clientNone:u=l({usernameRequired:!0});break;case r.clientHostBased:u=l({usernameRequired:!0,publicKeyRequired:!0,clientHostnameRequired:!0,clientUsernameRequired:!0});break;case r.clientPassword:u=l({usernameRequired:!0,passwordRequired:!0});break;case r.clientPublicKeyQuery:case r.clientPublicKey:u=l({usernameRequired:!0,publicKeyRequired:!0});break;case r.serverPublicKey:u=l({publicKeyRequired:!0});break;default:throw new Error("Invalid authentication type: "+e)}if(!u)throw new Error("Invalid arguments for authentication type: "+e);this.username=null!=t?t:null,this.password=null!=n?n:null,this.publicKey=null!=s?s:null,this.clientHostname=null!=o?o:null,this.clientUsername=null!=a?a:null,this.cancellationValue=null!=c?c:i.CancellationToken.None}get cancellation(){return this.cancellationValue}set cancellation(e){this.cancellationValue=e}toString(){return this.password?(this.username?'"'+this.username+'" ':"")+"[password]":this.publicKey?`${this.username?'"'+this.username+'" ':""}[${this.publicKey.keyAlgorithmName}]`:`"${this.username}"`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LiveshareJoinWorkspace="LiveshareJoinWorkspace",e.VSCodeServerStartupServerStart="VSCodeServerStartupServerStart",e.VSCodeServerStartupServerTcpPortForwarding="VSCodeServerStartupServerTCPPortForwarding"}(t.PerformanceEventIds||(t.PerformanceEventIds={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(0),o=n(134),a=n(65);class c extends o.Connection{constructor(){super(...arguments),this.onConnectionChangedEventEmitterMock=this.onConnectionChangedEventEmitter}getId(e){const{id:t,someProp:n,numericProp:i}=e;return`${t}_${n}_${i}`}onConnectionChangedHandlerMock(e,t){return this.onConnectionChangedHandler(e,t)}get connectionSignalMock(){return this.connectionSignal}finish(e){return r.assertDefined(this.connectionSignal,"No `Connection Signal` found."),e?(this.connectionSignal.reject(e),this):(this.connectionSignal.resolve(this),this)}finishWithDelay(e,t=0){return t?(s.defer(()=>{this.finish(e)},t),this):this.finish(e)}createConnection(){return i(this,void 0,void 0,(function*(){return this.initializeConnection(),r.assertDefined(this.connectionSignal,new a.ConnectionError("No `connectionSignal` found.")),yield this.connectionSignal.promise,this.onConnectionChangedHandler("connected"),this}))}initializeConnectionMock(){return this.initializeConnection()}get performanceMock(){return this.performance}}t.ConnectionMock=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,c=o(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))r.call(n,u)&&(c[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)s.call(n,a[h])&&(c[a[h]]=n[a[h]])}}return c}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(83),s=n(4),o=n(0),a=n(532),c=n(533);class l{constructor(e,t,n="start"){this.name=e,this.groupId=t,this.pathString=n,this.groups=[],this.onAnyEventEmitter=new s.Emitter,this.onAnyEvent=this.onAnyEventEmitter.event,this.createGroup=(e,t=l.groupCount++)=>{const n=`${this.pathString}.${e}.${this.groupId}`,i=new l(e,t,n);return i.setMainPerformance(this.main),i.onAnyEvent(e=>{this.onAnyEventEmitter.fire(e)}),this.groups.push(i),i},this.markBlock=e=>(this.blocks.markBlock(e),this),this.markBlockStart=(e,t=!1)=>{try{this.blocks.markBlockStart(e)}catch(e){if(!t)throw e}return this},this.markBlockEnd=(e,t=!1)=>{try{this.blocks.markBlockEnd(e)}catch(e){if(!t)throw e}return this},this.measure=(e,t)=>i(this,void 0,void 0,(function*(){return yield this.blocks.measure(e,t)})),this.measureSync=(e,t)=>this.blocks.measureSync(e,t),this.getWaterfall=()=>{r.performance.measure(this.pathString,this.pathString);const[e]=r.performance.getEntriesByName(this.pathString);return new a.WaterfallNode(this.groupId,this.name,this.pathString,e,this.blocks.measures(),this.groups)},this.getBlockMeasure=(e,t)=>{if((t=null!=t?t:this.main.getWaterfall()).id===e)return t;for(let n of t.groups){const t=this.getBlockMeasure(e,n);if(t)return t}return null},this.getBlock=e=>this.blocks.getBlock(e),this.getBlockStartTime=e=>{const t=this.main.getBlockMeasure(e);if(!t)return null;const{measure:n}=t;return n.startTime},this.getBlockEndTime=e=>{const t=this.main.getBlockMeasure(e);if(!t)return null;const{measure:n}=t;return n.startTime+n.duration},this.getBlockDurationTime=e=>{const t=this.main.getBlockMeasure(e);if(!t)return null;const{measure:n}=t;return n.duration},this.blocks=new c.PerformanceBlocks(n),r.performance.mark(n),this.mainPerformanceReference=this,this.blocks.onAnyEvent(e=>{this.onAnyEventEmitter.fire(e)})}setMainPerformance(e){this.mainPerformanceReference=e}get main(){if(!this.mainPerformanceReference)throw new Error("No main performance found.");return this.mainPerformanceReference}onEvent(e,t){return this.blocks.onEvent(e,e=>{const{id:n,type:i}=e;if("start"===i)return t(e),this;const r=this.getBlockMeasure(n);if(!r)throw new Error(`Cannot find "${n}" block.`);t(e,r)}),this}onMeasure(e,t){return this.blocks.onEvent(e,e=>{const{id:n,type:i}=e;if("start"===i)return t(e),this;const r=this.getBlockMeasure(n);if(!r)throw new Error(`Cannot find "${n}" block.`);t(e,r)}),this}}t.Performance=l,l.groupCount=0,t.initializePerformanceInstance=(e,t=l)=>{const n=new t("start",e);return n.setMainPerformance(n),n},t.getOrCreatePerformance=o.onlyOnce(e=>t.initializePerformanceInstance(e),"extension:start")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(65);class r extends i.ConnectionError{constructor(){super(...arguments),this.errorType="ConnectionStateError"}}t.ConnectionStateError=r},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcProxy=t.RpcErrorCodes=void 0;const o=s(n(4)),a=n(227),c=n(17),l=n(136);!function(e){e[e.ParseError=o.ErrorCodes.ParseError]="ParseError",e[e.InvalidRequest=o.ErrorCodes.InvalidRequest]="InvalidRequest",e[e.MethodNotFound=o.ErrorCodes.MethodNotFound]="MethodNotFound",e[e.InvalidParams=o.ErrorCodes.InvalidParams]="InvalidParams",e[e.InternalError=o.ErrorCodes.InternalError]="InternalError",e[e.ServerNotInitialized=o.ErrorCodes.ServerNotInitialized]="ServerNotInitialized",e[e.UnknownErrorCode=o.ErrorCodes.UnknownErrorCode]="UnknownErrorCode",e[e.RequestCancelled=o.ErrorCodes.RequestCancelled]="RequestCancelled",e[e.MessageWriteError=o.ErrorCodes.MessageWriteError]="MessageWriteError",e[e.MessageReadError=o.ErrorCodes.MessageReadError]="MessageReadError",e[e.ServiceNotAvailable=-32099]="ServiceNotAvailable",e[e.InvocationException=-32098]="InvocationException",e[e.MessageTooLarge=-32097]="MessageTooLarge"}(t.RpcErrorCodes||(t.RpcErrorCodes={}));class u{constructor(e,t,n){this.client=e,this.serviceName=t,this.logger=n}static create(e,t,n){if(!e||!e.name)throw new Error("Missing RPC service name.");const i=new u(t,e.name,n);for(const t of e.methods){i[t+"Async"]=function(){let e,n=arguments[arguments.length-1];n&&"object"==typeof n&&"boolean"==typeof n.isCancellationRequested?e=Array.prototype.slice.call(arguments,0,arguments.length-1):(e=Array.prototype.slice.call(arguments,0,arguments.length),n=null);let r=e[e.length-1];r&&"object"==typeof r&&"function"==typeof r.report?e.splice(e.length-1,1):r=null;const s=i.serviceName+"."+t;return i.client.sendRequest(this.logger,s,r,n,...e)}}for(const t of e.voidMethods||[])i[t]=function(){const e=Array.prototype.slice.call(arguments,0,arguments.length),n=i.serviceName+"."+t;i.client.sendNotification(this.logger,n,e).then().catch()};for(const t of e.events){const e=new o.Emitter,n=l.getEventPropertyName(t);i[n]=e.event;const r=i.serviceName+"."+t;i.client.ensureConnectionAsync().then(t=>{t.onNotification(r,(...t)=>{const n=t[0],s=c.LoggerSettings.disableObfuscation?JSON.stringify(n):"";i.logger.log(c.LogLevel.Debug,`> ${r}: ${s}`),e.fire(n)})}).catch(e=>{})}return i}static createWithConnection(e,t,n){return u.create(e,a.RpcClientProxy.fromRpcConnection(t,n),n)}static createWithPromise(e,t,n){return u.create(e,a.RpcClientProxy.fromPromise(t,n),n)}static notifyAsync(e,t,n){const i=e,r=i.serviceName+"."+t;return i.client.sendNotification(i.logger,r,n)}}t.RpcProxy=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcLoggerAdapter=void 0;t.RpcLoggerAdapter=class{constructor(e){this.trace=e}error(e){this.trace.error(e)}warn(e){this.trace.warning(e)}info(e){this.trace.info(e)}log(e){this.trace.verbose(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcConnectionShutdownError=t.RpcConnectionClosedError=void 0;const i=n(335);class r extends i.RpcError{constructor(){super("RPC connection closed."),this.code=r.code,Object.setPrototypeOf(this,r.prototype)}}t.RpcConnectionClosedError=r,r.code="EPIPE";class s extends i.RpcError{constructor(){super("RPC connection closed due to client shut down."),this.code=s.code,Object.setPrototypeOf(this,s.prototype)}}t.RpcConnectionShutdownError=s,s.code="ECONNRESET"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcError=void 0;class i extends Error{constructor(e){super(e),this.code=i.code}}t.RpcError=i,i.code="RpcError"},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sendRpcRequest=t.normalizeRpcParameters=t.getRawRpcParameters=void 0;const r=n(17);function s(e){const t=[...e];return o(t),t}function o(e){const t=e.splice(0,1)[0];if(e.length>0){const n=e[e.length-1];if(n&&"isCancellationRequested"in n&&"onCancellationRequested"in n){return[t,e.splice(e.length-1,1)[0]]}}return[t,null]}t.getRawRpcParameters=s,t.normalizeRpcParameters=o,t.sendRpcRequest=function(e,t,n,o){return i(this,void 0,void 0,(function*(){try{const i=Date.now(),a=yield e.sendRequest(t,s(n)),c=(Date.now()-i).toFixed(1);return null==o||o.info(`remote rpc request method: "${t}" result: "${r.TraceFormat.stringify(a)}\n            t:${c}`),a}catch(e){throw null==o||o.error("failed to handle request for method:"+t,e),e}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeECDiffieHellman=t.NodeDiffieHellman=void 0;const i=n(56),r=n(6),s=n(229),o=n(234),a=n(58);class c extends s.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new l(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.NodeDiffieHellman=c;class l{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=i.getDiffieHellman("modp2");break;case 2048:this.dh=i.getDiffieHellman("modp14");break;case 4096:this.dh=i.getDiffieHellman("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=i.createHash(this.hashAlgorithmName);return t.update(e),r.Buffer.from(t.digest())}dispose(){}}class u extends s.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.NodeHmac.getHashDigestLength(n))}createKeyExchange(){return new h(this.keySizeInBits,o.NodeHmac.getNodeHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.NodeECDiffieHellman=u;class h{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 256:this.ecdh=i.createECDH("prime256v1");break;case 384:this.ecdh=i.createECDH("secp384r1");break;case 521:this.ecdh=i.createECDH("secp521r1");break;default:throw new Error("Invalid ECDH bit length.")}}startKeyExchange(){const e=this.ecdh.generateKeys();return Promise.resolve(e)}decryptKeyExchange(e){const t=this.ecdh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=i.createHash(this.hashAlgorithmName);return t.update(e),r.Buffer.from(t.digest())}dispose(){}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Sec1KeyFormatter=t.Pkcs1KeyFormatter=t.parsePem=t.formatPem=void 0;const i=n(58),r=n(235),s=n(177);t.formatPem=function(e,t){return`-----BEGIN ${t}-----\n`+e.toString("base64").match(/.{1,64}/g).join("\n")+"\n"+`-----END ${t}-----\n`},t.parsePem=function(t){const n=t.replace(/-+[^-\n]+KEY-+/g,"").replace(/\s/g,"");return e.from(n,"base64")};t.Pkcs1KeyFormatter=class{static formatRsaPublic(t){const n=new r.DerWriter(e.alloc(1024));return n.writeInteger(t.modulus),n.writeInteger(t.exponent),n.toBuffer()}static formatRsaPrivate(t){if(!(t.d&&t.p&&t.q&&t.dp&&t.dq&&t.qi))throw new Error("Missing private key parameters.");const n=new r.DerWriter(e.alloc(2048));return n.writeInteger(i.BigInt.fromInt32(0)),n.writeInteger(t.modulus),n.writeInteger(t.exponent),n.writeInteger(t.d),n.writeInteger(t.p),n.writeInteger(t.q),n.writeInteger(t.dp),n.writeInteger(t.dq),n.writeInteger(t.qi),n.toBuffer()}static parseRsaPublic(e){const t=new r.DerReader(e);return{modulus:t.readInteger(),exponent:t.readInteger()}}static parseRsaPrivate(e){const t=new r.DerReader(e);t.readInteger();return{modulus:t.readInteger(),exponent:t.readInteger(),d:t.readInteger(),p:t.readInteger(),q:t.readInteger(),dp:t.readInteger(),dq:t.readInteger(),qi:t.readInteger()}}};class o{static formatECPublic(t){const n=s.curves.find(e=>e.oid===t.curve.oid),i=Math.ceil(n.keySize/8),a=new r.DerWriter(e.alloc(512)),c=new r.DerWriter(e.alloc(100));c.writeObjectIdentifier(o.ecPublicKeyOid),c.writeObjectIdentifier(t.curve.oid),a.writeSequence(c);const l=t.x.toBytes({unsigned:!0,length:i}),u=t.y.toBytes({unsigned:!0,length:i}),h=e.alloc(1+l.length+u.length);return h[0]=4,l.copy(h,1),u.copy(h,1+l.length),a.writeBitString(h),a.toBuffer()}static formatECPrivate(t){const n=s.curves.find(e=>e.oid===t.curve.oid),o=Math.ceil(n.keySize/8),a=new r.DerWriter(e.alloc(512));a.writeInteger(i.BigInt.fromInt32(1)),a.writeOctetString(t.d.toBytes({unsigned:!0,length:o}));const c=new r.DerWriter(e.alloc(100));c.writeObjectIdentifier(t.curve.oid),a.writeTagged(0,c);const l=t.x.toBytes({unsigned:!0,length:o}),u=t.y.toBytes({unsigned:!0,length:o}),h=e.alloc(1+l.length+u.length);h[0]=4,l.copy(h,1),u.copy(h,1+l.length);const d=new r.DerWriter(e.alloc(512));return d.writeBitString(h),a.writeTagged(1,d),a.toBuffer()}static parseECPublic(e){var t;const n=new r.DerReader(e),a=n.readSequence(),c=a.readObjectIdentifier();if(c!==o.ecPublicKeyOid)throw new Error("Unexpected key type OID: "+c);const l=a.readObjectIdentifier(),u=null===(t=s.curves.find(e=>e.oid===l))||void 0===t?void 0:t.name,h=n.readBitString();if(h.length%2!=1)throw new Error("Unexpected key data length: "+h.length);const d=i.BigInt.fromBytes(h.slice(1,1+(h.length-1)/2),{unsigned:!0}),p=i.BigInt.fromBytes(h.slice(1+(h.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:d,y:p}}static parseECPrivate(e){var t;const n=new r.DerReader(e),o=n.readInteger().toInt32();if(1!==o)throw new Error("Unsupported SEC1 format version: "+o);const a=i.BigInt.fromBytes(n.readOctetString(),{unsigned:!0}),c=n.tryReadTagged(0);if(!c)throw new Error("SEC1 curve info not found.");const l=c.readObjectIdentifier(),u=null===(t=s.curves.find(e=>e.oid===l))||void 0===t?void 0:t.name,h=n.tryReadTagged(1);if(!h)throw new Error("SEC1 public key data not found.");const d=h.readBitString();if(d.length%2!=1)throw new Error("Unexpected key data length: "+d.length);const p=i.BigInt.fromBytes(d.slice(1,1+(d.length-1)/2),{unsigned:!0}),f=i.BigInt.fromBytes(d.slice(1+(d.length-1)/2),{unsigned:!0});return{curve:{name:u,oid:l},x:p,y:f,d:a}}}t.Sec1KeyFormatter=o,o.ecPublicKeyOid="1.2.840.10045.2.1"}).call(this,n(6).Buffer)},function(e,t,n){"use strict";var i,r=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyExchangeService=void 0;const s=n(6),o=n(139),a=n(179),c=n(58),l=n(238),u=n(119),h=n(38),d=n(47),p=n(60),f=n(566),g=n(4),m=n(120),y=n(59);class v{}let S=i=class extends a.SshService{constructor(e,t){super(e),this.isClientSession=t,this.isInitialExchange=!1,this.exchangeContext=null}get exchanging(){return!!this.exchangeContext}async startKeyExchange(e){this.isInitialExchange=e,this.exchangeContext=new v;const t=this.createKeyExchangeInitMessage();let n=null;return this.isClientSession?(e&&this.session.config.enableKeyExchangeGuess&&(n=await this.createKeyExchangeGuessMessage(),t.firstKexPacketFollows=!!n),this.exchangeContext.clientKexInitPayload=t.toBuffer()):this.exchangeContext.serverKexInitPayload=t.toBuffer(),[t,n]}finishKeyExchange(){const e=this.exchangeContext.newAlgorithms;return this.exchangeContext=null,e}abortKeyExchange(){this.exchangeContext=null}createKeyExchangeInitMessage(){const e=this.isClientSession?"ext-info-c":"ext-info-s",t=this.session.config,n=new l.KeyExchangeInitMessage;return n.keyExchangeAlgorithms=(0,u.algorithmNames)(t.keyExchangeAlgorithms).concat(e),n.serverHostKeyAlgorithms=this.getPublicKeyAlgorithms(),n.encryptionAlgorithmsClientToServer=n.encryptionAlgorithmsServerToClient=(0,u.algorithmNames)(t.encryptionAlgorithms),n.macAlgorithmsClientToServer=n.macAlgorithmsServerToClient=(0,u.algorithmNames)(t.hmacAlgorithms),n.compressionAlgorithmsClientToServer=n.compressionAlgorithmsServerToClient=(0,u.algorithmNames)(t.compressionAlgorithms),n.languagesClientToServer=[""],n.languagesServerToClient=[""],n.firstKexPacketFollows=!1,n.reserved=0,n}getPublicKeyAlgorithms(){var e,t;let n=[...this.session.config.publicKeyAlgorithms];if(n.length>1&&!this.isClientSession){const i=null===(t=null===(e=this.session.credentials)||void 0===e?void 0:e.publicKeys)||void 0===t?void 0:t.map(e=>e.keyAlgorithmName);i&&(n=n.filter(e=>e&&i.includes(e.keyAlgorithmName)))}return(0,u.algorithmNames)(n)}async createKeyExchangeGuessMessage(){if(!this.exchangeContext)throw new Error("Key exchange was not started.");const e=this.session.config.keyExchangeAlgorithms[0];if(!e)return null;this.exchangeContext.keyExchange=e.name,this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const t=new l.KeyExchangeDhInitMessage;return t.e=this.exchangeContext.exchangeValue,t}handleMessage(e,t){if(e instanceof l.KeyExchangeInitMessage)return this.handleInitMessage(e,t);if(e instanceof l.KeyExchangeDhInitMessage)return this.handleDhInitMessage(e,t);if(e instanceof l.KeyExchangeDhReplyMessage)return this.handleDhReplyMessage(e,t);throw new Error("Message not implemented: "+e)}async handleInitMessage(e,t){var n,i,r,s,o;if(!this.exchangeContext)throw new Error("Key exchange was not started.");const a=this.session.config;if(this.exchangeContext.keyExchange=this.chooseAlgorithm("KeyExchange",(0,u.algorithmNames)(a.keyExchangeAlgorithms),e.keyExchangeAlgorithms),"none"===this.exchangeContext.keyExchange)return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,"Client and server negotiated no security. Cancelling key-exchange."),this.exchangeContext.newAlgorithms=new f.SshSessionAlgorithms,void await this.session.handleNewKeysMessage(new l.NewKeysMessage,t);let c;if(this.exchangeContext.publicKey=this.chooseAlgorithm("PublicKey",this.getPublicKeyAlgorithms(),e.serverHostKeyAlgorithms),this.exchangeContext.clientEncryption=this.chooseAlgorithm("ClientEncryption",(0,u.algorithmNames)(a.encryptionAlgorithms),e.encryptionAlgorithmsClientToServer),this.exchangeContext.serverEncryption=this.chooseAlgorithm("ServerEncryption",(0,u.algorithmNames)(a.encryptionAlgorithms),e.encryptionAlgorithmsServerToClient),this.exchangeContext.clientHmac=this.chooseAlgorithm("ClientHmac",(0,u.algorithmNames)(a.hmacAlgorithms),e.macAlgorithmsClientToServer),this.exchangeContext.serverHmac=this.chooseAlgorithm("ServerHmac",(0,u.algorithmNames)(a.hmacAlgorithms),e.macAlgorithmsServerToClient),this.exchangeContext.clientCompression=this.chooseAlgorithm("ClientCompression",(0,u.algorithmNames)(a.compressionAlgorithms),e.compressionAlgorithmsClientToServer),this.exchangeContext.serverCompression=this.chooseAlgorithm("ServerCompression",(0,u.algorithmNames)(a.compressionAlgorithms),e.compressionAlgorithmsServerToClient),this.isClientSession){this.exchangeContext.serverKexInitPayload=e.toBuffer();const i=!!this.exchangeContext.exchangeValue,r=this.exchangeContext.keyExchange===(null===(n=a.keyExchangeAlgorithms[0])||void 0===n?void 0:n.name);if(!i||!r){const e=a.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);this.exchangeContext.exchange=e.createKeyExchange(),this.exchangeContext.exchangeValue=await this.exchangeContext.exchange.startKeyExchange();const n=new l.KeyExchangeDhInitMessage;n.e=this.exchangeContext.exchangeValue,await this.session.sendMessage(n,t)}c="ext-info-s"}else{if(e.firstKexPacketFollows){const t=this.exchangeContext.keyExchange===(null===(i=e.keyExchangeAlgorithms)||void 0===i?void 0:i[0]),n=t?"correct":"incorrect";if(this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,`Client's KeyExchange guess was ${n}.`),this.exchangeContext.discardGuessedInit=!t,t&&this.session.remoteVersion.isVsSsh&&(null===(r=this.session.remoteVersion.version)||void 0===r?void 0:r.startsWith("2."))){(null===(s=e.keyExchangeAlgorithms)||void 0===s?void 0:s[0])===(null===(o=a.keyExchangeAlgorithms[0])||void 0===o?void 0:o.name)||(this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.algorithmNegotiation,"Ignoring correct guess for compatibility with older client."),this.exchangeContext.discardGuessedInit=!0)}}this.exchangeContext.clientKexInitPayload=e.toBuffer(),c="ext-info-c"}this.isInitialExchange&&e.keyExchangeAlgorithms.includes(c)&&await this.session.sendExtensionInfo(t)}async handleDhInitMessage(e,t){var n,i,r,o,a,c,u;if(this.isClientSession)return;const h=this.session;if(!this.exchangeContext||!this.exchangeContext.keyExchange||!this.exchangeContext.publicKey)throw new d.SshConnectionError("Key exchange not started.",p.SshDisconnectReason.protocolError);if(this.exchangeContext.discardGuessedInit)return void(this.exchangeContext.discardGuessedInit=!1);const m=this.session.config.getKeyExchangeAlgorithm(this.exchangeContext.keyExchange);if(!m)throw new d.SshConnectionError("Key exchange not supported for algorithm: "+this.exchangeContext.keyExchange,p.SshDisconnectReason.keyExchangeFailed);const y=this.session.config.getPublicKeyAlgorithm(this.exchangeContext.publicKey);if(!y)throw new d.SshConnectionError("Public key algorithm not supported: "+this.exchangeContext.publicKey,p.SshDisconnectReason.keyExchangeFailed);let v=null;if(null===(n=h.credentials)||void 0===n?void 0:n.publicKeys){const e=h.credentials.publicKeys.find(e=>e.keyAlgorithmName===y.keyAlgorithmName);if(v=null!=e?e:null,!1===(null==v?void 0:v.hasPrivateKey)){if(!h.credentials.privateKeyProvider)throw new Error("A private key provider is required.");v=await h.credentials.privateKeyProvider(e,null!=t?t:g.CancellationToken.None)}}if(null==v)throw new d.SshConnectionError("Private key not found for algorithm: "+this.exchangeContext.publicKey,p.SshDisconnectReason.keyExchangeFailed);const S=this.session.config.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),w=this.session.config.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),C=this.session.config.getHmacAlgorithm(this.exchangeContext.serverHmac),b=this.session.config.getHmacAlgorithm(this.exchangeContext.clientHmac),E=m.createKeyExchange(),k=e.e||s.Buffer.alloc(0),R=await E.startKeyExchange(),x=await E.decryptKeyExchange(k),P=await v.getPublicKeyBytes(y.name);if(!P)throw new d.SshConnectionError("Public key not set.",p.SshDisconnectReason.keyExchangeFailed);const T=await this.computeExchangeHash(E,P,k,R,x);this.session.sessionId||(this.session.sessionId=T);const[M,A,O,N,I,F]=await this.computeKeys(E,x,T,S,w,b,C),_=null!==(i=await(null==w?void 0:w.createCipher(!0,N,A)))&&void 0!==i?i:null,D=null!==(r=await(null==S?void 0:S.createCipher(!1,O,M)))&&void 0!==r?r:null,j=null!==(o=await(null==C?void 0:C.createSigner(F)))&&void 0!==o?o:null,B=null!==(a=await(null==b?void 0:b.createVerifier(I)))&&void 0!==a?a:null,L=new f.SshSessionAlgorithms;L.publicKeyAlgorithmName=this.exchangeContext.publicKey,L.cipher=_,L.decipher=D,L.signer=j,L.verifier=B,L.messageSigner=(null===(c=_)||void 0===c?void 0:c.authenticatedEncryption)?_:j,L.messageVerifier=(null===(u=D)||void 0===u?void 0:u.authenticatedEncryption)?D:B,L.compressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.serverCompression),L.decompressor=this.session.config.getCompressionAlgorithm(this.exchangeContext.clientCompression),this.exchangeContext.newAlgorithms=L,M&&M.fill(0),O&&O.fill(0),I&&I.fill(0),A&&A.fill(0),N&&N.fill(0),F&&F.fill(0);const W=y.createSigner(v);let q=await W.sign(T);q=y.createSignatureData(q);const H=new l.KeyExchangeDhReplyMessage;H.hostKey=P,H.f=R,H.signature=q,await this.session.sendMessage(H,t),await this.session.sendMessage(new l.NewKeysMessage,t)}async handleDhReplyMessage(e,t){var n,i,r,s,o,a;if(!this.isClientSession)return;if(!this.exchangeContext)throw new d.SshConnectionError("Key exchange was not started.",p.SshDisconnectReason.protocolError);const c=this.session.config,u=this.exchangeContext.exchange,h=this.exchangeContext.publicKey,g=c.getPublicKeyAlgorithm(h),m=c.getEncryptionAlgorithm(this.exchangeContext.clientEncryption),v=c.getEncryptionAlgorithm(this.exchangeContext.serverEncryption),S=c.getHmacAlgorithm(this.exchangeContext.serverHmac),w=c.getHmacAlgorithm(this.exchangeContext.clientHmac),C=this.exchangeContext.exchangeValue,b=e.f;if(!u||!C)throw new d.SshConnectionError("Failed to initialize crypto after key exchange.",p.SshDisconnectReason.keyExchangeFailed);this.hostKey=g.createKeyPair(),await this.hostKey.setPublicKeyBytes(e.hostKey);const E=await u.decryptKeyExchange(b),k=e.hostKey,R=await this.computeExchangeHash(u,k,C,b,E),x=g.readSignatureData(e.signature),P=g.createVerifier(this.hostKey);let T;try{T=await P.verify(R,x)}catch(e){if(!(e instanceof Error))throw e;throw this.trace(y.TraceLevel.Error,y.SshTraceEventIds.serverAuthenticationFailed,"Server public key verification error: "+e.message,e),new d.SshConnectionError("Server public key verification failed: "+e.message,p.SshDisconnectReason.hostKeyNotVerifiable)}if(!T)throw this.trace(y.TraceLevel.Warning,y.SshTraceEventIds.serverAuthenticationFailed,"Server public key verification failed."),new d.SshConnectionError("Server public key verification failed.",p.SshDisconnectReason.hostKeyNotVerifiable);this.trace(y.TraceLevel.Verbose,y.SshTraceEventIds.sessionAuthenticated,"Server public key verification succeeded."),null==this.session.sessionId&&(this.session.sessionId=R);const[M,A,O,N,I,F]=await this.computeKeys(u,E,R,m,v,w,S),_=null!==(n=await(null==m?void 0:m.createCipher(!0,O,M)))&&void 0!==n?n:null,D=null!==(i=await(null==v?void 0:v.createCipher(!1,N,A)))&&void 0!==i?i:null,j=null!==(r=await(null==w?void 0:w.createSigner(I)))&&void 0!==r?r:null,B=null!==(s=await(null==S?void 0:S.createVerifier(F)))&&void 0!==s?s:null,L=new f.SshSessionAlgorithms;L.publicKeyAlgorithmName=h,L.cipher=_,L.decipher=D,L.signer=j,L.verifier=B,L.messageSigner=(null===(o=_)||void 0===o?void 0:o.authenticatedEncryption)?_:j,L.messageVerifier=(null===(a=D)||void 0===a?void 0:a.authenticatedEncryption)?D:B,L.compressor=c.getCompressionAlgorithm(this.exchangeContext.clientCompression),L.decompressor=c.getCompressionAlgorithm(this.exchangeContext.serverCompression),this.exchangeContext.newAlgorithms=L,M&&M.fill(0),O&&O.fill(0),I&&I.fill(0),A&&A.fill(0),N&&N.fill(0),F&&F.fill(0),await this.session.sendMessage(new l.NewKeysMessage,t)}chooseAlgorithm(e,t,n){var i;let r,s;this.isClientSession?(r=n||[],s=t):(r=t,s=n||[]);const o=e+" negotiation: "+`Server (${r.join(", ")}) `+`Client (${s.join(", ")})`;if(this.session.remoteVersion.isVsSsh&&(null===(i=this.session.remoteVersion.version)||void 0===i?void 0:i.startsWith("2."))){const e=r;r=s,s=e}for(let e of s)for(let t of r)if(t===e){const e=t;return this.trace(y.TraceLevel.Info,y.SshTraceEventIds.algorithmNegotiation,`${o} => ${e}`),e}throw new Error("Failed "+o)}async computeExchangeHash(e,t,n,i,r){if(!this.session.remoteVersion)throw new Error("Key exchange not completed.");const a=new h.SshDataWriter(s.Buffer.alloc(2048));this.isClientSession?(a.writeString(o.SshSession.localVersion.toString(),"ascii"),a.writeString(this.session.remoteVersion.toString(),"ascii")):(a.writeString(this.session.remoteVersion.toString(),"ascii"),a.writeString(o.SshSession.localVersion.toString(),"ascii")),a.writeBinary(this.exchangeContext.clientKexInitPayload),a.writeBinary(this.exchangeContext.serverKexInitPayload),a.writeBinary(t),a.writeBigInt(c.BigInt.fromBytes(n,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(i,{unsigned:!0})),a.writeBigInt(c.BigInt.fromBytes(r,{unsigned:!0}));return await e.sign(a.toBuffer())}async computeKeys(e,t,n,i,r,o,a){var c,l;const u=new h.SshDataWriter(s.Buffer.alloc(4+t.length+n.length+Math.max(1+(null!==(l=null===(c=this.session.sessionId)||void 0===c?void 0:c.length)&&void 0!==l?l:0),e.digestLength)));u.writeBinary(t),u.write(n);const d=u.position;return[i&&await this.computeKey(e,u,d,i.blockLength,"A"),r&&await this.computeKey(e,u,d,r.blockLength,"B"),i&&await this.computeKey(e,u,d,i.keyLength,"C"),r&&await this.computeKey(e,u,d,r.keyLength,"D"),o&&await this.computeKey(e,u,d,o.keyLength,"E"),a&&await this.computeKey(e,u,d,a.keyLength,"F")]}async computeKey(e,t,n,i,r){const o=s.Buffer.alloc(i);let a=0,c=0,l=null;if(!this.session.sessionId)throw new Error("Session ID not set.");for(;a<i;)t.position=n,l?t.write(l):(t.writeByte(r.charCodeAt(0)),t.write(this.session.sessionId)),l=await e.sign(t.toBuffer()),c=Math.min(l.length,i-a),l.copy(o,a),a+=c;return l&&l.fill(0),o}};S.serviceName="ssh-keyexchange",S=i=r([(0,m.serviceActivation)({serviceRequest:i.serviceName})],S),t.KeyExchangeService=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelMetrics=void 0;t.ChannelMetrics=class{constructor(){this.bytesSentSum=0,this.bytesReceivedSum=0}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}addBytesSent(e){this.bytesSentSum+=e}addBytesReceived(e){this.bytesReceivedSum+=e}toString(){return`Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; `}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelClosedEventArgs=void 0;t.SshChannelClosedEventArgs=class{constructor(e,t){"number"==typeof e?this.exitStatus=e:"string"==typeof e?(this.exitSignal=e,this.errorMessage=t):e instanceof Error&&(this.error=e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshVersionInfo=void 0;const i=n(564),r=i.name.replace(/^@\w+\//,""),s=i.version;class o{constructor(e,t,n,i){this.versionString=e,this.protocolVersion=t,this.name=n,this.version=i}static tryParse(e){if(!e)throw new TypeError("Version string expected.");if(!e.startsWith("SSH-"))return null;const t=e.indexOf("-",4);if(t<=0)return null;const n=e.substring(4,t);if(!/^\d+\.\d+$/.test(n))return null;let i,r;const s=e.substring(t+1),a=s.indexOf(" "),c=s.lastIndexOf("_",a>=0?a:s.length-1);if(c>=0){i=s.substring(0,c).replace(/_/g," "),r=s.substring(c+1);for(let e=0;e<r.length;e++){const t=r[e];if(!(t>="0"&&t<="9")&&"."!==t){r=r.substring(0,e);break}}/^\d+(\.\d+)*$/.test(r)||(r=null)}else i=s,r=null;return new o(e,n,i,r)}static getLocalVersion(){return new o(`SSH-2.0-${r}_${s}`,"2.0",r,s)}toString(){return this.versionString}get isVsSsh(){return this.isVsSshCS||this.isVsSshTS}get isVsSshCS(){return"Microsoft.VisualStudio.Ssh"===this.name}get isVsSshTS(){return"vs-ssh"===this.name}}t.SshVersionInfo=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshChannelOpeningEventArgs=void 0;const i=n(90);t.SshChannelOpeningEventArgs=class{constructor(e,t,n){if(this.request=e,this.channel=t,this.isRemoteRequest=n,this.failureReason=i.SshChannelOpenFailureReason.none,this.failureDescription=null,!e)throw new TypeError("A channel open message is required.");if(!t)throw new TypeError("A channel is required.")}toString(){return`${this.channel.toString()}${this.failureReason?" "+i.SshChannelOpenFailureReason[this.failureReason]:""}`}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationSuccessMessage=t.AuthenticationFailureMessage=t.PasswordRequestMessage=t.PublicKeyOKMessage=t.PublicKeyRequestMessage=t.AuthenticationRequestMessage=t.AuthenticationMessage=void 0;const i=n(77);class r extends i.SshMessage{}t.AuthenticationMessage=r;class s extends r{get messageType(){return 50}onRead(e){this.username=e.readString("utf8"),this.serviceName=e.readString("ascii"),this.methodName=e.readString("ascii")}onWrite(e){e.writeString(this.username||"","utf8"),e.writeString(this.serviceName||"","ascii"),e.writeString(this.validateField(this.methodName,"method name"),"ascii")}}t.AuthenticationRequestMessage=s;t.PublicKeyRequestMessage=class extends s{constructor(){super(),this.methodName="publickey"}get hasSignature(){return!!(this.signature&&this.signature.length>0)}onRead(e){super.onRead(e);const t=e.readBoolean();this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary(),t?(this.signature=e.readBinary(),this.payloadWithoutSignature=this.rawBytes.slice(0,this.rawBytes.length-this.signature.length-4)):this.signature=void 0}onWrite(t){var n,i;if(super.onWrite(t),!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if("hostbased"===this.methodName){if(t.writeString(this.keyAlgorithmName,"ascii"),t.writeBinary(this.publicKey||e.alloc(0)),t.writeString(null!==(n=this.clientHostname)&&void 0!==n?n:"","ascii"),t.writeString(null!==(i=this.clientUsername)&&void 0!==i?i:"","ascii"),!this.hasSignature)throw new Error("A signature is required for a host-based authentcation request.");t.writeBinary(this.signature)}else t.writeBoolean(this.hasSignature),t.writeString(this.keyAlgorithmName,"ascii"),t.writeBinary(this.publicKey||e.alloc(0)),this.hasSignature&&t.writeBinary(this.signature)}};t.PublicKeyOKMessage=class extends r{get messageType(){return 60}onRead(e){this.keyAlgorithmName=e.readString("ascii"),this.publicKey=e.readBinary()}onWrite(e){if(!this.keyAlgorithmName)throw new Error("Key algorithm name not set.");if(!this.publicKey)throw new Error("Public key not set.");e.writeString(this.keyAlgorithmName,"ascii"),e.writeBinary(this.publicKey)}};t.PasswordRequestMessage=class extends s{constructor(){super(),this.methodName="password"}onRead(e){super.onRead(e),e.readBoolean(),this.password=e.readString("utf8")}onWrite(e){super.onWrite(e),e.writeBoolean(!1),e.writeString(this.password||"","utf8")}};class o extends r{constructor(){super(...arguments),this.partialSuccess=!1}get messageType(){return 51}onRead(e){this.methodNames=e.readList("ascii"),this.partialSuccess=e.readBoolean()}onWrite(e){e.writeList(this.methodNames||[],"ascii"),e.writeBoolean(this.partialSuccess)}}t.AuthenticationFailureMessage=o;class a extends r{get messageType(){return 52}onRead(e){}onWrite(e){}}t.AuthenticationSuccessMessage=a,i.SshMessage.index.set(50,s),i.SshMessage.index.set(51,o),i.SshMessage.index.set(52,a)}).call(this,n(6).Buffer)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMetrics=void 0;const i=n(4);t.SessionMetrics=class{constructor(){this.startTime=0,this.messagesSentCount=0,this.messagesReceivedCount=0,this.bytesSentSum=0,this.bytesReceivedSum=0,this.reconnectionsCount=0,this.currentLatency=0,this.minLatency=0,this.maxLatency=0,this.latencySum=0,this.latencyCount=0,this.messageSentEmitter=new i.Emitter,this.onMessageSent=this.messageSentEmitter.event,this.messageReceivedEmitter=new i.Emitter,this.onMessageReceived=this.messageReceivedEmitter.event,this.latencyUpdatedEmitter=new i.Emitter,this.onLatencyUpdated=this.latencyUpdatedEmitter.event,this.sessionClosedEmitter=new i.Emitter,this.onSessionClosed=this.sessionClosedEmitter.event,"object"==typeof performance&&performance.now?Object.defineProperty(this,"time",{get:this.browserTime}):"object"==typeof e&&e.hrtime&&Object.defineProperty(this,"time",{get:this.nodejsTime}),this.startTime=this.time}get time(){return Date.now()-this.startTime}browserTime(){return performance.now()-this.startTime}nodejsTime(){const[t,n]=e.hrtime();return 1e3*t+n/1e6-this.startTime}get messagesSent(){return this.messagesSentCount}get messagesReceived(){return this.messagesReceivedCount}get bytesSent(){return this.bytesSentSum}get bytesReceived(){return this.bytesReceivedSum}get reconnections(){return this.reconnectionsCount}get latencyAverageMs(){return 0===this.latencyCount?0:this.latencySum/this.latencyCount}get latencyMinMs(){return this.minLatency}get latencyMaxMs(){return this.maxLatency}get latencyCurrentMs(){return this.currentLatency}addMessageSent(e){this.messagesSentCount++,this.bytesSentSum+=e,this.messageSentEmitter.fire({time:this.time,size:e})}addMessageReceived(e){this.messagesReceivedCount++,this.bytesReceivedSum+=e,this.messageReceivedEmitter.fire({time:this.time,size:e})}addReconnection(){this.reconnectionsCount++}updateLatency(e){if(e<0)throw new Error("Measured latency cannot be negative.");this.currentLatency=e,0!==e&&((0===this.minLatency||e<this.minLatency)&&(this.minLatency=e),(0===this.maxLatency||e>this.maxLatency)&&(this.maxLatency=e),this.latencySum+=e,this.latencyCount++,this.latencyUpdatedEmitter.fire({time:this.time,latency:e}))}close(){this.currentLatency=0,this.sessionClosedEmitter.fire()}toString(){let e=`Messages S/R: ${this.messagesSent} / ${this.messagesReceived}; Bytes S/R: ${this.bytesSent} / ${this.bytesReceived}; Reconnections: ${this.reconnections}; `;const t=this.minLatency>=10?1:this.minLatency>=1?10:100;if(this.maxLatency>0){e+=`Latency Min-Avg-Max: ${Math.round(this.minLatency*t)/t} - ${Math.round(this.latencySum/this.latencyCount*t)/t} - ${Math.round(this.maxLatency*t)/t} ms; `}if(this.currentLatency>0){e+=`Current Latency: ${Math.round(this.currentLatency*t)/t} ms; `}return e}}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionClosedEventArgs=void 0;const i=n(60);t.SshSessionClosedEventArgs=class{constructor(e,t,n){if(this.reason=e,this.message=t,this.error=n,!t)throw new TypeError("A disconnect message is required.")}toString(){return`${i.SshDisconnectReason[this.reason]}: ${this.message}`}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SshStream=void 0;const i=n(91),r=n(265);class s extends r.Duplex{constructor(t){let n=null;super({async write(n,i,r){let s;try{let r;if("string"==typeof n)r=e.from(n,i);else{if(!(n instanceof e))throw new Error("Unsupported chunk type: "+typeof n);r=n}await t.send(r)}catch(e){if(!(e instanceof Error))throw e;s=e}r&&r(s)},async writev(n,i){let r;try{if(1===n.length)return this.write(n[0].chunk,n[0].encoding,i);{const i=n.reduce((function(t,n){if(n.chunk instanceof e)return t+n.chunk.length;throw new Error("Unsupported chunk type: "+typeof n.chunk)}),0),r=e.alloc(i);let s=0;for(let e=0;e<n.length;e++)n[e].chunk.copy(r,s),s+=n[e].chunk.length;await t.send(r)}}catch(e){if(!(e instanceof Error))throw e;r=e}i&&i(r)},async final(e){let n;try{await t.close()}catch(e){if(!(e instanceof Error))throw e;n=e}e&&e(n)},read(){n&&(n.resolve(),n=null)}});const r=this;t.onDataReceived(async s=>{const o=e.alloc(s.length);s.copy(o);r.push(o)||(n||(n=new i.PromiseCompletionSource),await n.promise),t.adjustWindow(o.length)}),t.onClosed(()=>{r.push(null)}),this.channel=t}destroy(){this.channel.close().catch(),super.destroy()}toString(){return`SshStream(Channel Type: ${this.channel.channelType}, Id: ${this.channel.channelId}, RemoteId: ${this.channel.remoteChannelId})`}}t.SshStream=s}).call(this,n(6).Buffer)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.checkConnectionWithTimeout=t.failedtoCheckConnectionMessage=void 0;const r=n(0),s=10*r.TIME_SECOND_MS;t.failedtoCheckConnectionMessage="failed to check connection";t.checkConnectionWithTimeout=(e,t,n,o)=>i(void 0,void 0,void 0,(function*(){const i=Date.now(),a=()=>(Date.now()-i).toFixed(1);try{return null==t||t.verbose("checkConnectionWithTimeout -> 'started'"),yield r.timeoutPromise(e.checkConnection(),null!=n?n:s,void 0,o),null==t||t.verbose("checkConnectionWithTimeout -> 'succeeded' t:"+a()),!0}catch(e){return e instanceof r.CancellationError?(null==t||t.verbose("checkConnectionWithTimeout -> 'cancelled' t:"+a()),!0):(null==t||t.error("checkConnectionWithTimeout -> 'failed' t:"+a(),e),!1)}}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.checkWorkspaceClient=void 0;const r=n(0),s=n(348),o=n(4),a=5*r.TIME_SECOND_MS;let c=0;t.checkWorkspaceClient=function(e,t,n,r,l){let u;n=null!=n?n:a,(t=t.createChild(""+ ++c)).info("Start checking connection timeout:"+n);const h=()=>{u=setTimeout(m,n)},d=()=>{clearTimeout(u)};let p=!1;const f=new o.CancellationTokenSource,g=()=>f.token.isCancellationRequested,m=()=>i(this,void 0,void 0,(function*(){g()||(p=!0,l&&!l()||(yield s.checkConnectionWithTimeout(e,t,r,f))?h():(t.info("Failed check -> isDisposed:"+g()),null==y||y.dispose(),g()||e.dispose(s.failedtoCheckConnectionMessage)),p=!1)}));e.rpcClient.onDispose(()=>{d()});const y=e.onWorkspaceMetricsUpdated(e=>{d(),p||h()});return h(),{dispose:()=>{t.info("Stop checking connection"),f.cancel(),null==y||y.dispose()}}}},function(e,t,n){"use strict";(function(e,i){var r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=t.SshHelpers=void 0;const l=o(n(23)),u=n(581),h=n(17),d=n(36),p=c(n(585));class f{static getRelayUri(e,t){if(!e.relayLink)throw new Error("Workspace does not have a relay endpoint.");return e.relayLink.replace("sb:","wss:").replace(".net/",".net:443/$hc/")+`?sb-hc-action=${t}&sb-hc-token=`+encodeURIComponent(e.relaySas||"")}static openConnection(e,n){const i=f.getRelayUri(e,"connect");return n.log(h.LogLevel.Debug,"connecting to relay link:"+e.relayLink),t.isNode()?(n.log(h.LogLevel.Debug,"creating node SSH..."),f.nodeSshStreamFactory(i,e)):(n.log(h.LogLevel.Debug,"creating web SSH..."),f.webSshStreamFactory(new WebSocket(i)))}static createSshClientSession(){return f.createSshSession(e=>new l.SshClientSession(e))}static createSshServerSession(e){return f.createSshSession(t=>new l.SshServerSession(t,e))}static authenticate(e,t,n,i,r){return a(this,void 0,void 0,(function*(){const s={username:"",password:n.sessionToken};if(e.onAuthenticating(e=>{e.authenticationPromise=f.authenticateServer(t,e.publicKey)}),yield e.connect(i),!(yield e.authenticateServer()))throw new Error("Live Share server authentication failed.");if(r)yield e.authenticateClient(s,(e,t)=>{e||t||(e=new Error("Live Share client authentication failed.")),e?r.reject(e):r.resolve(e)});else if(!(yield e.authenticateClient(s)))throw new Error("Live Share client authentication failed.");return e}))}static createWebSocketStreamAdapter(e){return new l.WebSocketStream(new g(e))}static webSshStreamFactory(e){return e.binaryType="arraybuffer",new Promise((t,n)=>{e.onopen=()=>{t(new l.WebSocketStream(e))},e.onerror=()=>{setTimeout(()=>n(new Error("Failed to connect to relay url")),100)},e.onclose=e=>{1e3!==e.code&&n(new Error(`Failed to connect to relay url Code: ${e.code} Reason: ${e.reason}`))}})}static createSshSession(e){const t=new l.SshSessionConfiguration;return t.keyExchangeAlgorithms.splice(0),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.ecdhNistp384Sha384),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.ecdhNistp256Sha256),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.dhGroup14Sha256),t.protocolExtensions.push(l.SshProtocolExtensionNames.sessionReconnect),t.protocolExtensions.push(l.SshProtocolExtensionNames.sessionLatency),e(t)}static nodeSshStreamFactory(e,t){const n=new u.client;return new Promise((i,r)=>{n.on("connect",e=>{i(new l.WebSocketStream(new g(e)))}),n.on("connectFailed",e=>{e.message&&e.message.startsWith("Error: ")&&(e.message=e.message.substr(7));let n=d.RelayErrorType.ServerError;/status: 401/.test(e.message)?(e.message=p.default["error.relaySasInvalid"],n=d.RelayErrorType.SasInvalid):/status: 404 Endpoint does not exist/.test(e.message)?(e.message=p.default["error.relayEndpointNotFound"],n=d.RelayErrorType.EndpointNotFound):/status: 404 There are no listeners connected/.test(e.message)?(e.message=p.default["error.relayListenerOffline"],n=d.RelayErrorType.ListenerOffline):/status: 500/.test(e.message)?(e.message=p.default["error.relayServerError"],n=d.RelayErrorType.ServerError):e.message=p.default["error.relayConnectionError"]+" "+e.message,r(new d.RelayConnectionError(e.message,{errorType:n,workspaceConnectionInfo:t}))}),n.connect(e,void 0,void 0,void 0,{agent:t.proxyAgent})})}static authenticateServer(t,n){return a(this,void 0,void 0,(function*(){const i=l.SshAlgorithms.publicKey.rsaWithSha512,r=yield n.getPublicKeyBytes();for(const n of t&&t.hostPublicKeys||[]){const t=i.createKeyPair();yield t.setPublicKeyBytes(e.from(n,"base64"));const s=yield t.getPublicKeyBytes();if(r.equals(s)){return{}}}return null}))}}t.SshHelpers=f;class g{constructor(e){this.connection=e}set onmessage(e){e&&this.connection.on("message",t=>{e({data:t.binaryData})})}set onclose(e){e&&this.connection.on("close",(t,n)=>{e({code:t,reason:n,wasClean:!(t||n)})})}send(t){e.isBuffer(t)?this.connection.sendBytes(t):this.connection.sendBytes(e.from(t))}close(e,t){e||t?this.connection.drop(e,t):this.connection.close()}}t.isNode=()=>void 0!==i&&void 0!==i.release&&"node"===i.release.name}).call(this,n(6).Buffer,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MainThread="MainThread",e.ServiceWorker="ServiceWorker",e.WorkspaceHub="WorkspaceHub"}(t.TConnectionTypes||(t.TConnectionTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VSCodeServerStartup="VSCodeServerStartup"}(t.PerformanceGroupIds||(t.PerformanceGroupIds={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vscodeServerHostRPCService={name:"IVSCodeServerHostService",methods:["startRemoteServer","startRemoteServerResult","exportLogs","shutDownRemoteServer","getVMTerminalFilePath","getContainerTerminalFilePath","getStateFolderPath","getSharedFolderPath","getCodespaceStateFilePath","getDevcontainerStateFilePath","getSharedFile","getContainerPersistedFolderPath","isRecoveryContainer","terminateOryxTask","downloadVsCodeServerByCommitId","getPerformanceData","getCreationLogStatus"],events:["configurationFinished","devContainerConfigChanged","codespaceStopping","codespaceAvailable","creationLogUpdated"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(180);t.getVSCodeServerSessionName=e=>e?`${i.VSCODE_SERVER_PORT_NAME}_${e}`:i.VSCODE_SERVER_PORT_NAME},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(180);t.isVSCodeServerSession=e=>e.startsWith(i.VSCODE_SERVER_PORT_NAME)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(4),o=n(593),a=n(225),c=n(594),l=n(135),u=e=>Object.assign(Object.assign({},o.HUB_CONNECTION_DEFAULT_OPTIONS),e);class h extends r.DisposableClass{constructor(e,t,n,l=[]){super(e),this.performance=t,this.connectionClass=n,this.childConnectionHubs=l,this.onConnectionEmitter=new s.Emitter,this.onConnection=this.onConnectionEmitter.event,this.getConnectionId=e=>new this.connectionClass(this.trace,this.performance,e).getId(e),this.connectOnce=(e,t={})=>i(this,void 0,void 0,(function*(){const{trace:n=this.trace}=t;return n.info("requested to connect once",e,t),yield this.connect(e,Object.assign(Object.assign({},o.HUB_NO_RETRY_OPTIONS),t))})),this.connections={},this.retrySignals={},this.createConnectionWithTimeout=(e,t)=>i(this,void 0,void 0,(function*(){const{timeout:n}=t;if(!isFinite(n))return this.trace.verbose("creating connection without a timeout"),yield this.createConnection(e,t);this.trace.verbose(`creating connection with timeout of ${n}ms`);return yield r.timeoutPromise(this.createConnection(e,t),n,new a.ConnectionTimeoutError(`Could not establish connection in ${n}ms.`))})),this.createConnection=(e,t)=>i(this,void 0,void 0,(function*(){const{retries:n,retryDelay:i,performance:s=this.performance,trace:o=this.trace}=t,a=e,l=this.getConnectionId(a);try{this.trace.info("creating connection",t);const n=new this.connectionClass(o.createChild("connection:"+l),s.createGroup(`${o.name}:${r.hashString(l)}`),a,this.childConnectionHubs),i=new c.ConnectionHubRecord(this.trace.createChild("connection-record"),n,e,t,n.onConnectionChanged(this.onConnectionChanged.bind(this,l)));this.connections[l]=i;const u=yield n.connect();return this.addToDisposables(i),r.defer(()=>{this.onConnectionEmitter.fire(u)},0),u}catch(s){if(this.trace.warning(`disposing connection "${l}" due to an error`,s),this.disposeConnection(l),n<1)throw s;this.trace.info("connection failed, retrying "+n);const o=new r.Signal;return this.retrySignals[l]=o,yield Promise.race([o.promise,r.wait(i)]),yield this.createConnection(e,Object.assign(Object.assign({},t),{retries:n-1}))}}))}get childHubs(){return[...this.childConnectionHubs]}getConnection(e){const t=this.getConnectionId(e),n=this.connections[t];if(n){const{connection:e}=n;return e}}connect(e,t={}){return i(this,void 0,void 0,(function*(){const{trace:n=this.trace}=t;n.info("requested to connect",e,t);try{const i=this.getConnectionId(e),r=this.connections[i],s=n.createChild(""+i);if(s.info("connection record: "+!!r),!r)return s.info("creating new connection"),yield this.createConnectionWithTimeout(e,u(t));const{connection:o}=r;if(!o)return s.info("no connection on connection record, creating"),yield this.createConnectionWithTimeout(e,u(t));if("disconnected"===o.status)return s.info("disposed, creating"),this.disposeConnection(i),yield this.createConnectionWithTimeout(e,u(t));if("connected"===o.status)return s.info("return connected"),o;const{timeout:a=1/0}=t;s.info(`connecting with timeout - ${a} ms`);return yield o.connectWithTimeout(a)}catch(e){throw n.warning("error during connection",e),l.errorToConnectionError(e)}}))}disconnect(e,t){return i(this,void 0,void 0,(function*(){this.trace.info("requested disconnect",e);const n=this.getConnectionId(e),i=this.retrySignals[n];i&&(i.cancel(),this.retrySignals[n]=void 0);const r=this.connections[n];return!!r&&(yield r.disconnect(t),this.connections[n]=void 0,!0)}))}onConnectionChanged(e,t){return i(this,void 0,void 0,(function*(){const n=this.trace.createChild("onConnectionChanged:"+e),{status:i,previousStatus:r}=t;if(n.info(`${r} -> ${i}`),"disconnected"!==i)return;const s=this.connections[e];if(!s)return void n.info("no connection record found");if(n.info("disposing the connection"),this.disposeConnection(e),this.connections[e]=void 0,"connected"!==r)return;const{hubConnectionOptions:o,connectionOptions:a,connection:c}=s;if(o.shouldReconnect&&!c.isDisposing)return n.info("reconnecting.."),yield this.connect(a,o);n.info("not reconnecting")}))}disposeConnection(e){try{this.trace.info(`disposing ${e} connection`);const t=this.connections[e];if(!t)return;t.dispose("connection record disposed by ConnectionHub"),this.connections[e]=void 0}catch(t){this.trace.warning(`error while disposing ${e} connection`,t)}}}t.ConnectionHub=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(61),r=n(0),s=n(17);t.PerformanceMock=i.mocks.PerformanceMock,t.getRandomConnectionMockOptions=()=>({id:r.randomString(),someProp:r.randomString(),numericProp:r.randomInt(100)}),t.testTrace=new s.TraceSource("test-trace");const o=new t.PerformanceMock("test-performance","test-start");t.getConnectionMockOptions=(e={})=>{const{trace:n=t.testTrace}=e;return[n,o,Object.assign({},t.getRandomConnectionMockOptions())]}},function(e,t,n){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createDuplexStreams=void 0;const a=s(n(23));t.createDuplexStreams=function(){return c.createStreams()};class c extends a.BaseStream{constructor(){super()}static createStreams(){const e=new c,t=new c;return e.other=t,t.other=e,[e,t]}write(t,n){return o(this,void 0,void 0,(function*(){if(!t)throw new TypeError("Data is required.");this.other.onData(e.from(t))}))}close(e,t){return o(this,void 0,void 0,(function*(){e?(this.onError(e),this.dispose(),this.other.onError(e),this.other.dispose()):(this.dispose(),this.other.onEnd(),this.other.dispose())}))}dispose(){super.dispose(),this.other.isDisposed||(this.other.onError(new Error("Stream disposed.")),this.other.dispose())}}}).call(this,n(6).Buffer)},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createMultiChannelRpcClient=void 0;const a=s(n(23)),c=n(31);t.createMultiChannelRpcClient=function(e,t,n=!0){return o(this,void 0,void 0,(function*(){const i=new a.MultiChannelStream(e),r=yield i.openChannel(),s=new l(i,r,t);return s.addToDisposables(i,{dispose:()=>e.close()}),n&&s.rpcConnection.listen(),s}))};class l extends c.RpcClient{constructor(e,t,n){super({},n),this.multiChannelStream=e;const i=new a.SshRpcMessageStream(t);this.setConnection(this.createRpcConnection(i,n))}get rpcConnection(){return this.connection}}},,function(e,t,n){"use strict";const{AbortController:i,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=i,e.exports.AbortSignal=r,e.exports.default=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";
/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(329),r="function"==typeof Symbol&&Symbol.for,s=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,c=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S={};function w(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||v}function C(){}function b(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=w.prototype;var E=b.prototype=new C;E.constructor=b,i(E,w.prototype),E.isPureReactComponent=!0;var k={current:null},R=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var i,r={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)R.call(t,i)&&!x.hasOwnProperty(i)&&(r[i]=t[i]);var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===r[i]&&(r[i]=c[i]);return{$$typeof:s,type:e,key:o,ref:a,props:r,_owner:k.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var M=/\/+/g,A=[];function O(e,t,n,i){if(A.length){var r=A.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function I(e,t,n){return null==e?0:function e(t,n,i,r){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case s:case o:c=!0}}if(c)return i(r,t,""===n?"."+F(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var u=n+F(a=t[l],l);c+=e(a,u,i,r)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=m&&t[m]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),l=0;!(a=t.next()).done;)c+=e(a=a.value,u=n+F(a,l++),i,r);else if("object"===a)throw i=""+t,Error(y(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return c}(e,"",t,n)}function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function _(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,i,n,(function(e){return e})):null!=e&&(T(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),i.push(e))}function j(e,t,n,i,r){var s="";null!=n&&(s=(""+n).replace(M,"$&/")+"/"),I(e,D,t=O(t,s,i,r)),N(t)}var B={current:null};function L(){var e=B.current;if(null===e)throw Error(y(321));return e}var W={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:function(e,t,n){if(null==e)return e;var i=[];return j(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;I(e,_,t=O(null,null,t,n)),N(t)},count:function(e){return I(e,(function(){return null}),null)},toArray:function(e){var t=[];return j(e,t,null,(function(e){return e})),t},only:function(e){if(!T(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=a,t.Profiler=l,t.PureComponent=b,t.StrictMode=c,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var r=i({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)R.call(t,u)&&!x.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:s,type:e.type,key:o,ref:a,props:r,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="16.14.0"},function(e,t,n){"use strict";
/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(1),r=n(329),s=n(530);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(o(227));function a(e,t,n,i,r,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var c=!1,l=null,u=!1,h=null,d={onError:function(e){c=!0,l=e}};function p(e,t,n,i,r,s,o,u,h){c=!1,l=null,a.apply(d,arguments)}var f=null,g=null,m=null;function y(e,t,n){var i=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,i,r,s,a,d,f){if(p.apply(this,arguments),c){if(!c)throw Error(o(198));var g=l;c=!1,l=null,u||(u=!0,h=g)}}(i,t,void 0,e),e.currentTarget=null}var v=null,S={};function w(){if(v)for(var e in S){var t=S[e],n=v.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!b[n]){if(!t.extractEvents)throw Error(o(97,e));for(var i in b[n]=t,n=t.eventTypes){var r=void 0,s=n[i],a=t,c=i;if(E.hasOwnProperty(c))throw Error(o(99,c));E[c]=s;var l=s.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&C(l[r],a,c);r=!0}else s.registrationName?(C(s.registrationName,a,c),r=!0):r=!1;if(!r)throw Error(o(98,i,e))}}}}function C(e,t,n){if(k[e])throw Error(o(100,e));k[e]=t,R[e]=t.eventTypes[n].dependencies}var b=[],E={},k={},R={};function x(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!S.hasOwnProperty(t)||S[t]!==i){if(S[t])throw Error(o(102,t));S[t]=i,n=!0}}n&&w()}var P=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),T=null,M=null,A=null;function O(e){if(e=g(e)){if("function"!=typeof T)throw Error(o(280));var t=e.stateNode;t&&(t=f(t),T(e.stateNode,e.type,t))}}function N(e){M?A?A.push(e):A=[e]:M=e}function I(){if(M){var e=M,t=A;if(A=M=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function F(e,t){return e(t)}function _(e,t,n,i,r){return e(t,n,i,r)}function D(){}var j=F,B=!1,L=!1;function W(){null===M&&null===A||(D(),I())}function q(e,t,n){if(L)return e(t,n);L=!0;try{return j(e,t,n)}finally{L=!1,W()}}var H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K=Object.prototype.hasOwnProperty,U={},$={};function z(e,t,n,i,r,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){V[e]=new z(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];V[t]=new z(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){V[e]=new z(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){V[e]=new z(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){V[e]=new z(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){V[e]=new z(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){V[e]=new z(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){V[e]=new z(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){V[e]=new z(e,5,!1,e.toLowerCase(),null,!1)}));var G=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(G,Q);V[t]=new z(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(G,Q);V[t]=new z(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(G,Q);V[t]=new z(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){V[e]=new z(e,1,!1,e.toLowerCase(),null,!1)})),V.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){V[e]=new z(e,1,!1,e.toLowerCase(),null,!0)}));var J=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Y(e,t,n,i){var r=V.hasOwnProperty(t)?V[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!K.call($,e)||!K.call(U,e)&&(H.test(e)?$[e]=!0:(U[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,ie=Z?Symbol.for("react.strict_mode"):60108,re=Z?Symbol.for("react.profiler"):60114,se=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ce=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ue=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,pe=Z?Symbol.for("react.block"):60121,fe="function"==typeof Symbol&&Symbol.iterator;function ge(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=fe&&e[fe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case re:return"Profiler";case ie:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case se:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return me(e.type);case pe:return me(e.render);case de:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,r=e._debugSource,s=me(e.type);n=null,i&&(n=me(i.type)),i=s,s="",r?s=" (at "+r.fileName.replace(X,"")+":"+r.lineNumber+")":n&&(s=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+s}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Se(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=Se(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Se(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function be(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ke(e,t){null!=(t=t.checked)&&Y(e,"checked",t,!1)}function Re(e,t){ke(e,t);var n=ve(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pe(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function xe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Te(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Me(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Ne(e,t){var n=ve(t.value),i=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function Ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Fe="http://www.w3.org/1999/xhtml",_e="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,Le=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==_e||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function We(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var He={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Ke={},Ue={};function $e(e){if(Ke[e])return Ke[e];if(!He[e])return e;var t,n=He[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ue)return Ke[e]=n[t];return e}P&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete He.animationend.animation,delete He.animationiteration.animation,delete He.animationstart.animation),"TransitionEvent"in window||delete He.transitionend.transition);var ze=$e("animationend"),Ve=$e("animationiteration"),Ge=$e("animationstart"),Qe=$e("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new("function"==typeof WeakMap?WeakMap:Map);function Xe(e){var t=Ye.get(e);return void 0===t&&(t=new Map,Ye.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(o(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return tt(r),e;if(s===i)return tt(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=s;break}if(c===i){a=!0,i=r,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,i=r;break}if(c===i){a=!0,i=s,n=r;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function rt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function ot(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)y(e,t[i],n[i]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function at(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(rt(e,ot),st)throw Error(o(95));if(u)throw e=h,u=!1,h=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!P)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ut=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ut.length&&ut.push(e)}function dt(e,t,n,i){if(ut.length){var r=ut.pop();return r.topLevelType=e,r.eventSystemFlags=i,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,eventSystemFlags:i,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Pn(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var r=ct(e.nativeEvent);i=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var a=null,c=0;c<b.length;c++){var l=b[c];l&&(l=l.extractEvents(i,t,s,r,o))&&(a=it(a,l))}at(a)}}function ft(e,t,n){if(!n.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Vt(e,t)}n.set(e,null)}}var gt,mt,yt,vt=!1,St=[],wt=null,Ct=null,bt=null,Et=new Map,kt=new Map,Rt=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Pt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Tt(e,t,n,i,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r,container:i}}function Mt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":bt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function At(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e=Tt(t,n,i,r,s),null!==t&&(null!==(t=Tn(t))&&mt(t)),e):(e.eventSystemFlags|=i,e)}function Ot(e){var t=Pn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Tn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function It(e,t,n){Nt(e)&&n.delete(t)}function Ft(){for(vt=!1;0<St.length;){var e=St[0];if(null!==e.blockedOn){null!==(e=Tn(e.blockedOn))&&gt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:St.shift()}null!==wt&&Nt(wt)&&(wt=null),null!==Ct&&Nt(Ct)&&(Ct=null),null!==bt&&Nt(bt)&&(bt=null),Et.forEach(It),kt.forEach(It)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ft)))}function Dt(e){function t(t){return _t(t,e)}if(0<St.length){_t(St[0],e);for(var n=1;n<St.length;n++){var i=St[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==wt&&_t(wt,e),null!==Ct&&_t(Ct,e),null!==bt&&_t(bt,e),Et.forEach(t),kt.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var jt={},Bt=new Map,Lt=new Map,Wt=["abort","abort",ze,"animationEnd",Ve,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Qe,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1],s="on"+(r[0].toUpperCase()+r.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[i],eventPriority:t},Lt.set(i,t),Bt.set(i,s),jt[r]=s}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(Wt,2);for(var Ht="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<Ht.length;Kt++)Lt.set(Ht[Kt],0);var Ut=s.unstable_UserBlockingPriority,$t=s.unstable_runWithPriority,zt=!0;function Vt(e,t){Gt(t,e,!1)}function Gt(e,t,n){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Qt.bind(null,t,1,e);break;case 1:i=Jt.bind(null,t,1,e);break;default:i=Yt.bind(null,t,1,e)}n?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function Qt(e,t,n,i){B||D();var r=Yt,s=B;B=!0;try{_(r,e,t,n,i)}finally{(B=s)||W()}}function Jt(e,t,n,i){$t(Ut,Yt.bind(null,e,t,n,i))}function Yt(e,t,n,i){if(zt)if(0<St.length&&-1<xt.indexOf(e))e=Tt(null,e,t,n,i),St.push(e);else{var r=Xt(e,t,n,i);if(null===r)Mt(e,i);else if(-1<xt.indexOf(e))e=Tt(r,e,t,n,i),St.push(e);else if(!function(e,t,n,i,r){switch(t){case"focus":return wt=At(wt,e,t,n,i,r),!0;case"dragenter":return Ct=At(Ct,e,t,n,i,r),!0;case"mouseover":return bt=At(bt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Et.set(s,At(Et.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,kt.set(s,At(kt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i)){Mt(e,i),e=dt(e,i,null,t);try{q(pt,e)}finally{ht(e)}}}}function Xt(e,t,n,i){if(null!==(n=Pn(n=ct(i)))){var r=Ze(n);if(null===r)n=null;else{var s=r.tag;if(13===s){if(null!==(n=et(r)))return n;n=null}else if(3===s){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}e=dt(e,i,n,t);try{q(pt,e)}finally{ht(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=tn(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62,""))}}function on(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=Fe;function cn(e,t){var n=Xe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=R[t];for(var i=0;i<t.length;i++)ft(t[i],e,n)}function ln(){}function un(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,i=hn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hn(i)}}function pn(){for(var e=window,t=un();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=un((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gn=null,mn=null;function yn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"==typeof setTimeout?setTimeout:void 0,wn="function"==typeof clearTimeout?clearTimeout:void 0;function Cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function bn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),kn="__reactInternalInstance$"+En,Rn="__reactEventHandlers$"+En,xn="__reactContainere$"+En;function Pn(e){var t=e[kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[kn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bn(e);null!==e;){if(n=e[kn])return n;e=bn(e)}return t}n=(e=n).parentNode}return null}function Tn(e){return!(e=e[kn]||e[xn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Mn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function An(e){return e[Rn]||null}function On(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Nn(e,t){var n=e.stateNode;if(!n)return null;var i=f(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}function In(e,t,n){(t=Nn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Fn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=On(t);for(t=n.length;0<t--;)In(n[t],"captured",e);for(t=0;t<n.length;t++)In(n[t],"bubbled",e)}}function _n(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Nn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Dn(e){e&&e.dispatchConfig.registrationName&&_n(e._targetInst,null,e)}function jn(e){rt(e,Fn)}var Bn=null,Ln=null,Wn=null;function qn(){if(Wn)return Wn;var e,t,n=Ln,i=n.length,r="value"in Bn?Bn.value:Bn.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Wn=r.slice(e,1<t?1-t:void 0)}function Hn(){return!0}function Kn(){return!1}function Un(e,t,n,i){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Hn:Kn,this.isPropagationStopped=Kn,this}function $n(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function zn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Vn(e){e.eventPool=[],e.getPooled=$n,e.release=zn}r(Un.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){this.isPersistent=Hn},isPersistent:Kn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Kn,this._dispatchInstances=this._dispatchListeners=null}}),Un.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Un.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var s=new t;return r(s,n.prototype),n.prototype=s,n.prototype.constructor=n,n.Interface=r({},i.Interface,e),n.extend=i.extend,Vn(n),n},Vn(Un);var Gn=Un.extend({data:null}),Qn=Un.extend({data:null}),Jn=[9,13,27,32],Yn=P&&"CompositionEvent"in window,Xn=null;P&&"documentMode"in document&&(Xn=document.documentMode);var Zn=P&&"TextEvent"in window&&!Xn,ei=P&&(!Yn||Xn&&8<Xn&&11>=Xn),ti=String.fromCharCode(32),ni={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ii=!1;function ri(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function si(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var oi=!1;var ai={eventTypes:ni,extractEvents:function(e,t,n,i){var r;if(Yn)e:{switch(e){case"compositionstart":var s=ni.compositionStart;break e;case"compositionend":s=ni.compositionEnd;break e;case"compositionupdate":s=ni.compositionUpdate;break e}s=void 0}else oi?ri(e,n)&&(s=ni.compositionEnd):"keydown"===e&&229===n.keyCode&&(s=ni.compositionStart);return s?(ei&&"ko"!==n.locale&&(oi||s!==ni.compositionStart?s===ni.compositionEnd&&oi&&(r=qn()):(Ln="value"in(Bn=i)?Bn.value:Bn.textContent,oi=!0)),s=Gn.getPooled(s,t,n,i),r?s.data=r:null!==(r=si(n))&&(s.data=r),jn(s),r=s):r=null,(e=Zn?function(e,t){switch(e){case"compositionend":return si(t);case"keypress":return 32!==t.which?null:(ii=!0,ti);case"textInput":return(e=t.data)===ti&&ii?null:e;default:return null}}(e,n):function(e,t){if(oi)return"compositionend"===e||!Yn&&ri(e,t)?(e=qn(),Wn=Ln=Bn=null,oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ei&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Qn.getPooled(ni.beforeInput,t,n,i)).data=e,jn(t)):t=null,null===r?t:null===t?r:[r,t]}},ci={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ci[e.type]:"textarea"===t}var ui={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hi(e,t,n){return(e=Un.getPooled(ui.change,e,t,n)).type="change",N(n),jn(e),e}var di=null,pi=null;function fi(e){at(e)}function gi(e){if(Ce(Mn(e)))return e}function mi(e,t){if("change"===e)return t}var yi=!1;function vi(){di&&(di.detachEvent("onpropertychange",Si),pi=di=null)}function Si(e){if("value"===e.propertyName&&gi(pi))if(e=hi(pi,e,ct(e)),B)at(e);else{B=!0;try{F(fi,e)}finally{B=!1,W()}}}function wi(e,t,n){"focus"===e?(vi(),pi=n,(di=t).attachEvent("onpropertychange",Si)):"blur"===e&&vi()}function Ci(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gi(pi)}function bi(e,t){if("click"===e)return gi(t)}function Ei(e,t){if("input"===e||"change"===e)return gi(t)}P&&(yi=lt("input")&&(!document.documentMode||9<document.documentMode));var ki={eventTypes:ui,_isInputEventSupported:yi,extractEvents:function(e,t,n,i){var r=t?Mn(t):window,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type)var o=mi;else if(li(r))if(yi)o=Ei;else{o=Ci;var a=wi}else(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=bi);if(o&&(o=o(e,t)))return hi(o,n,i);a&&a(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Pe(r,"number",r.value)}},Ri=Un.extend({view:null,detail:null}),xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xi[e])&&!!t[e]}function Ti(){return Pi}var Mi=0,Ai=0,Oi=!1,Ni=!1,Ii=Ri.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ti,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Mi;return Mi=e.screenX,Oi?"mousemove"===e.type?e.screenX-t:0:(Oi=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ai;return Ai=e.screenY,Ni?"mousemove"===e.type?e.screenY-t:0:(Ni=!0,0)}}),Fi=Ii.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),_i={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Di={eventTypes:_i,extractEvents:function(e,t,n,i,r){var s="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(s&&0==(32&r)&&(n.relatedTarget||n.fromElement)||!o&&!s)return null;(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Pn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var a=Ii,c=_i.mouseLeave,l=_i.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Fi,c=_i.pointerLeave,l=_i.pointerEnter,u="pointer");if(e=null==o?s:Mn(o),s=null==t?s:Mn(t),(c=a.getPooled(c,o,n,i)).type=u+"leave",c.target=e,c.relatedTarget=s,(n=a.getPooled(l,t,n,i)).type=u+"enter",n.target=s,n.relatedTarget=e,u=t,(i=o)&&u)e:{for(l=u,o=0,e=a=i;e;e=On(e))o++;for(e=0,t=l;t;t=On(t))e++;for(;0<o-e;)a=On(a),o--;for(;0<e-o;)l=On(l),e--;for(;o--;){if(a===l||a===l.alternate)break e;a=On(a),l=On(l)}a=null}else a=null;for(l=a,a=[];i&&i!==l&&(null===(o=i.alternate)||o!==l);)a.push(i),i=On(i);for(i=[];u&&u!==l&&(null===(o=u.alternate)||o!==l);)i.push(u),u=On(u);for(u=0;u<a.length;u++)_n(a[u],"bubbled",c);for(u=i.length;0<u--;)_n(i[u],"captured",n);return 0==(64&r)?[c]:[c,n]}};var ji="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Bi=Object.prototype.hasOwnProperty;function Li(e,t){if(ji(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Bi.call(t,n[i])||!ji(e[n[i]],t[n[i]]))return!1;return!0}var Wi=P&&"documentMode"in document&&11>=document.documentMode,qi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hi=null,Ki=null,Ui=null,$i=!1;function zi(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $i||null==Hi||Hi!==un(n)?null:("selectionStart"in(n=Hi)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Ui&&Li(Ui,n)?null:(Ui=n,(e=Un.getPooled(qi.select,Ki,e,t)).type="select",e.target=Hi,jn(e),e))}var Vi={eventTypes:qi,extractEvents:function(e,t,n,i,r,s){if(!(s=!(r=s||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument)))){e:{r=Xe(r),s=R.onSelect;for(var o=0;o<s.length;o++)if(!r.has(s[o])){r=!1;break e}r=!0}s=!r}if(s)return null;switch(r=t?Mn(t):window,e){case"focus":(li(r)||"true"===r.contentEditable)&&(Hi=r,Ki=t,Ui=null);break;case"blur":Ui=Ki=Hi=null;break;case"mousedown":$i=!0;break;case"contextmenu":case"mouseup":case"dragend":return $i=!1,zi(n,i);case"selectionchange":if(Wi)break;case"keydown":case"keyup":return zi(n,i)}return null}},Gi=Un.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qi=Un.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ji=Ri.extend({relatedTarget:null});function Yi(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},er=Ri.extend({key:function(e){if(e.key){var t=Xi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yi(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ti,charCode:function(e){return"keypress"===e.type?Yi(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yi(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),tr=Ii.extend({dataTransfer:null}),nr=Ri.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ti}),ir=Un.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),rr=Ii.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sr={eventTypes:jt,extractEvents:function(e,t,n,i){var r=Bt.get(e);if(!r)return null;switch(e){case"keypress":if(0===Yi(n))return null;case"keydown":case"keyup":e=er;break;case"blur":case"focus":e=Ji;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=tr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=nr;break;case ze:case Ve:case Ge:e=Gi;break;case Qe:e=ir;break;case"scroll":e=Ri;break;case"wheel":e=rr;break;case"copy":case"cut":case"paste":e=Qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fi;break;default:e=Un}return jn(t=e.getPooled(r,t,n,i)),t}};if(v)throw Error(o(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),f=An,g=Tn,m=Mn,x({SimpleEventPlugin:sr,EnterLeaveEventPlugin:Di,ChangeEventPlugin:ki,SelectEventPlugin:Vi,BeforeInputEventPlugin:ai});var or=[],ar=-1;function cr(e){0>ar||(e.current=or[ar],or[ar]=null,ar--)}function lr(e,t){ar++,or[ar]=e.current,e.current=t}var ur={},hr={current:ur},dr={current:!1},pr=ur;function fr(e,t){var n=e.type.contextTypes;if(!n)return ur;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gr(e){return null!=(e=e.childContextTypes)}function mr(){cr(dr),cr(hr)}function yr(e,t,n){if(hr.current!==ur)throw Error(o(168));lr(hr,t),lr(dr,n)}function vr(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in e))throw Error(o(108,me(t)||"Unknown",s));return r({},n,{},i)}function Sr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,pr=hr.current,lr(hr,e),lr(dr,dr.current),!0}function wr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=vr(e,t,pr),i.__reactInternalMemoizedMergedChildContext=e,cr(dr),cr(hr),lr(hr,e)):cr(dr),lr(dr,n)}var Cr=s.unstable_runWithPriority,br=s.unstable_scheduleCallback,Er=s.unstable_cancelCallback,kr=s.unstable_requestPaint,Rr=s.unstable_now,xr=s.unstable_getCurrentPriorityLevel,Pr=s.unstable_ImmediatePriority,Tr=s.unstable_UserBlockingPriority,Mr=s.unstable_NormalPriority,Ar=s.unstable_LowPriority,Or=s.unstable_IdlePriority,Nr={},Ir=s.unstable_shouldYield,Fr=void 0!==kr?kr:function(){},_r=null,Dr=null,jr=!1,Br=Rr(),Lr=1e4>Br?Rr:function(){return Rr()-Br};function Wr(){switch(xr()){case Pr:return 99;case Tr:return 98;case Mr:return 97;case Ar:return 96;case Or:return 95;default:throw Error(o(332))}}function qr(e){switch(e){case 99:return Pr;case 98:return Tr;case 97:return Mr;case 96:return Ar;case 95:return Or;default:throw Error(o(332))}}function Hr(e,t){return e=qr(e),Cr(e,t)}function Kr(e,t,n){return e=qr(e),br(e,t,n)}function Ur(e){return null===_r?(_r=[e],Dr=br(Pr,zr)):_r.push(e),Nr}function $r(){if(null!==Dr){var e=Dr;Dr=null,Er(e)}zr()}function zr(){if(!jr&&null!==_r){jr=!0;var e=0;try{var t=_r;Hr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),_r=null}catch(t){throw null!==_r&&(_r=_r.slice(e+1)),br(Pr,$r),t}finally{jr=!1}}}function Vr(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Gr(e,t){if(e&&e.defaultProps)for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Qr={current:null},Jr=null,Yr=null,Xr=null;function Zr(){Xr=Yr=Jr=null}function es(e){var t=Qr.current;cr(Qr),e.type._context._currentValue=t}function ts(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ns(e,t){Jr=e,Xr=Yr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ao=!0),e.firstContext=null)}function is(e,t){if(Xr!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Xr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yr){if(null===Jr)throw Error(o(308));Yr=t,Jr.dependencies={expirationTime:0,firstContext:t,responders:null}}else Yr=Yr.next=t;return e._currentValue}var rs=!1;function ss(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function as(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function cs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ls(e,t){var n=e.alternate;null!==n&&os(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function us(e,t,n,i){var s=e.updateQueue;rs=!1;var o=s.baseQueue,a=s.shared.pending;if(null!==a){if(null!==o){var c=o.next;o.next=a.next,a.next=c}o=a,s.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=a))}if(null!==o){c=o.next;var l=s.baseState,u=0,h=null,d=null,p=null;if(null!==c)for(var f=c;;){if((a=f.expirationTime)<i){var g={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===p?(d=p=g,h=l):p=p.next=g,a>u&&(u=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),sc(a,f.suspenseConfig);e:{var m=e,y=f;switch(a=t,g=n,y.tag){case 1:if("function"==typeof(m=y.payload)){l=m.call(g,l,a);break e}l=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(a="function"==typeof(m=y.payload)?m.call(g,l,a):m))break e;l=r({},l,a);break e;case 2:rs=!0}}null!==f.callback&&(e.effectTag|=32,null===(a=s.effects)?s.effects=[f]:a.push(f))}if(null===(f=f.next)||f===c){if(null===(a=s.shared.pending))break;f=o.next=a.next,a.next=c,s.baseQueue=o=a,s.shared.pending=null}}null===p?h=l:p.next=d,s.baseState=h,s.baseQueue=p,oc(u),e.expirationTime=u,e.memoizedState=l}}function hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=r,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ds=J.ReactCurrentBatchConfig,ps=(new i.Component).refs;function fs(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:r({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=za(),r=ds.suspense;(r=as(i=Va(i,e,r),r)).payload=t,null!=n&&(r.callback=n),cs(e,r),Ga(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=za(),r=ds.suspense;(r=as(i=Va(i,e,r),r)).tag=1,r.payload=t,null!=n&&(r.callback=n),cs(e,r),Ga(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=za(),i=ds.suspense;(i=as(n=Va(n,e,i),i)).tag=2,null!=t&&(i.callback=t),cs(e,i),Ga(e,n)}};function ms(e,t,n,i,r,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Li(n,i)||!Li(r,s))}function ys(e,t,n){var i=!1,r=ur,s=t.contextType;return"object"==typeof s&&null!==s?s=is(s):(r=gr(t)?pr:hr.current,s=(i=null!=(i=t.contextTypes))?fr(e,r):ur),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function vs(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function Ss(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ps,ss(e);var s=t.contextType;"object"==typeof s&&null!==s?r.context=is(s):(s=gr(t)?pr:hr.current,r.context=fr(e,s)),us(e,n,r,i),r.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(fs(e,t,s,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&gs.enqueueReplaceState(r,r.state,null),us(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var ws=Array.isArray;function Cs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=i.refs;t===ps&&(t=i.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bs(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Es(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.effectTag=2,n):i:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Mc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=Cs(e,t,n),i.return=e,i):((i=Pc(n.type,n.key,n.props,null,e.mode,i)).ref=Cs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ac(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Tc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Cs(e,null,t),n.return=e,n;case te:return(t=Ac(t,e.mode,n)).return=e,t}if(ws(t)||ge(t))return(t=Tc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:c(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===r?n.type===ne?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case te:return n.key===r?u(e,t,n,i):null}if(ws(n)||ge(n))return null!==r?null:h(e,t,n,i,null);bs(e,n)}return null}function f(e,t,n,i,r){if("string"==typeof i||"number"==typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case ee:return e=e.get(null===i.key?n:i.key)||null,i.type===ne?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case te:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(ws(i)||ge(i))return h(t,e=e.get(n)||null,i,r,null);bs(t,i)}return null}function g(r,o,a,c){for(var l=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(r,h,a[g],c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),o=s(y,o,g),null===u?l=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),l;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],c))&&(o=s(h,o,g),null===u?l=h:u.sibling=h,u=h);return l}for(h=i(r,h);g<a.length;g++)null!==(m=f(h,r,g,a[g],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?l=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),l}function m(r,a,c,l){var u=ge(c);if("function"!=typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,y=null,v=c.next();null!==g&&!v.done;m++,v=c.next()){g.index>m?(y=g,g=null):y=g.sibling;var S=p(r,g,v.value,l);if(null===S){null===g&&(g=y);break}e&&g&&null===S.alternate&&t(r,g),a=s(S,a,m),null===h?u=S:h.sibling=S,h=S,g=y}if(v.done)return n(r,g),u;if(null===g){for(;!v.done;m++,v=c.next())null!==(v=d(r,v.value,l))&&(a=s(v,a,m),null===h?u=v:h.sibling=v,h=v);return u}for(g=i(r,g);!v.done;m++,v=c.next())null!==(v=f(g,r,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),u}return function(e,i,s,c){var l="object"==typeof s&&null!==s&&s.type===ne&&null===s.key;l&&(s=s.props.children);var u="object"==typeof s&&null!==s;if(u)switch(s.$$typeof){case ee:e:{for(u=s.key,l=i;null!==l;){if(l.key===u){switch(l.tag){case 7:if(s.type===ne){n(e,l.sibling),(i=r(l,s.props.children)).return=e,e=i;break e}break;default:if(l.elementType===s.type){n(e,l.sibling),(i=r(l,s.props)).ref=Cs(e,l,s),i.return=e,e=i;break e}}n(e,l);break}t(e,l),l=l.sibling}s.type===ne?((i=Tc(s.props.children,e.mode,c,s.key)).return=e,e=i):((c=Pc(s.type,s.key,s.props,null,e.mode,c)).ref=Cs(e,i,s),c.return=e,e=c)}return a(e);case te:e:{for(l=s.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(e,i.sibling),(i=r(i,s.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ac(s,e.mode,c)).return=e,e=i}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,s)).return=e,e=i):(n(e,i),(i=Mc(s,e.mode,c)).return=e,e=i),a(e);if(ws(s))return g(e,i,s,c);if(ge(s))return m(e,i,s,c);if(u&&bs(e,s),void 0===s&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,i)}}var ks=Es(!0),Rs=Es(!1),xs={},Ps={current:xs},Ts={current:xs},Ms={current:xs};function As(e){if(e===xs)throw Error(o(174));return e}function Os(e,t){switch(lr(Ms,t),lr(Ts,e),lr(Ps,xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:je(null,"");break;default:t=je(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}cr(Ps),lr(Ps,t)}function Ns(){cr(Ps),cr(Ts),cr(Ms)}function Is(e){As(Ms.current);var t=As(Ps.current),n=je(t,e.type);t!==n&&(lr(Ts,e),lr(Ps,n))}function Fs(e){Ts.current===e&&(cr(Ps),cr(Ts))}var _s={current:0};function Ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function js(e,t){return{responder:e,props:t}}var Bs=J.ReactCurrentDispatcher,Ls=J.ReactCurrentBatchConfig,Ws=0,qs=null,Hs=null,Ks=null,Us=!1;function $s(){throw Error(o(321))}function zs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ji(e[n],t[n]))return!1;return!0}function Vs(e,t,n,i,r,s){if(Ws=s,qs=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Bs.current=null===e||null===e.memoizedState?yo:vo,e=n(i,r),t.expirationTime===Ws){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(o(301));s+=1,Ks=Hs=null,t.updateQueue=null,Bs.current=So,e=n(i,r)}while(t.expirationTime===Ws)}if(Bs.current=mo,t=null!==Hs&&null!==Hs.next,Ws=0,Ks=Hs=qs=null,Us=!1,t)throw Error(o(300));return e}function Gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ks?qs.memoizedState=Ks=e:Ks=Ks.next=e,Ks}function Qs(){if(null===Hs){var e=qs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Ks?qs.memoizedState:Ks.next;if(null!==t)Ks=t,Hs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Ks?qs.memoizedState=Ks=e:Ks=Ks.next=e}return Ks}function Js(e,t){return"function"==typeof t?t(e):t}function Ys(e){var t=Qs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=Hs,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var c=a=s=null,l=r;do{var u=l.expirationTime;if(u<Ws){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=h,s=i):c=c.next=h,u>qs.expirationTime&&(qs.expirationTime=u,oc(u))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),sc(u,l.suspenseConfig),i=l.eagerReducer===e?l.eagerState:e(i,l.action);l=l.next}while(null!==l&&l!==r);null===c?s=i:c.next=a,ji(i,t.memoizedState)||(Ao=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function Xs(e){var t=Qs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ji(s,t.memoizedState)||(Ao=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Zs(e){var t=Gs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Js,lastRenderedState:e}).dispatch=go.bind(null,qs,e),[t.memoizedState,e]}function eo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=qs.updateQueue)?(t={lastEffect:null},qs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function to(){return Qs().memoizedState}function no(e,t,n,i){var r=Gs();qs.effectTag|=e,r.memoizedState=eo(1|t,n,void 0,void 0===i?null:i)}function io(e,t,n,i){var r=Qs();i=void 0===i?null:i;var s=void 0;if(null!==Hs){var o=Hs.memoizedState;if(s=o.destroy,null!==i&&zs(i,o.deps))return void eo(t,n,s,i)}qs.effectTag|=e,r.memoizedState=eo(1|t,n,s,i)}function ro(e,t){return no(516,4,e,t)}function so(e,t){return io(516,4,e,t)}function oo(e,t){return io(4,2,e,t)}function ao(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function co(e,t,n){return n=null!=n?n.concat([e]):null,io(4,2,ao.bind(null,t,e),n)}function lo(){}function uo(e,t){return Gs().memoizedState=[e,void 0===t?null:t],e}function ho(e,t){var n=Qs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&zs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function po(e,t){var n=Qs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&zs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function fo(e,t,n){var i=Wr();Hr(98>i?98:i,(function(){e(!0)})),Hr(97<i?97:i,(function(){var i=Ls.suspense;Ls.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ls.suspense=i}}))}function go(e,t,n){var i=za(),r=ds.suspense;r={expirationTime:i=Va(i,e,r),suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?r.next=r:(r.next=s.next,s.next=r),t.pending=r,s=e.alternate,e===qs||null!==s&&s===qs)Us=!0,r.expirationTime=Ws,qs.expirationTime=Ws;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.eagerReducer=s,r.eagerState=a,ji(a,o))return}catch(e){}Ga(e,i)}}var mo={readContext:is,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useResponder:$s,useDeferredValue:$s,useTransition:$s},yo={readContext:is,useCallback:uo,useContext:is,useEffect:ro,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,no(4,2,ao.bind(null,t,e),n)},useLayoutEffect:function(e,t){return no(4,2,e,t)},useMemo:function(e,t){var n=Gs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Gs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=go.bind(null,qs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Gs().memoizedState=e},useState:Zs,useDebugValue:lo,useResponder:js,useDeferredValue:function(e,t){var n=Zs(e),i=n[0],r=n[1];return ro((function(){var n=Ls.suspense;Ls.suspense=void 0===t?null:t;try{r(e)}finally{Ls.suspense=n}}),[e,t]),i},useTransition:function(e){var t=Zs(!1),n=t[0];return t=t[1],[uo(fo.bind(null,t,e),[t,e]),n]}},vo={readContext:is,useCallback:ho,useContext:is,useEffect:so,useImperativeHandle:co,useLayoutEffect:oo,useMemo:po,useReducer:Ys,useRef:to,useState:function(){return Ys(Js)},useDebugValue:lo,useResponder:js,useDeferredValue:function(e,t){var n=Ys(Js),i=n[0],r=n[1];return so((function(){var n=Ls.suspense;Ls.suspense=void 0===t?null:t;try{r(e)}finally{Ls.suspense=n}}),[e,t]),i},useTransition:function(e){var t=Ys(Js),n=t[0];return t=t[1],[ho(fo.bind(null,t,e),[t,e]),n]}},So={readContext:is,useCallback:ho,useContext:is,useEffect:so,useImperativeHandle:co,useLayoutEffect:oo,useMemo:po,useReducer:Xs,useRef:to,useState:function(){return Xs(Js)},useDebugValue:lo,useResponder:js,useDeferredValue:function(e,t){var n=Xs(Js),i=n[0],r=n[1];return so((function(){var n=Ls.suspense;Ls.suspense=void 0===t?null:t;try{r(e)}finally{Ls.suspense=n}}),[e,t]),i},useTransition:function(e){var t=Xs(Js),n=t[0];return t=t[1],[ho(fo.bind(null,t,e),[t,e]),n]}},wo=null,Co=null,bo=!1;function Eo(e,t){var n=kc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ko(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ro(e){if(bo){var t=Co;if(t){var n=t;if(!ko(e,t)){if(!(t=Cn(n.nextSibling))||!ko(e,t))return e.effectTag=-1025&e.effectTag|2,bo=!1,void(wo=e);Eo(wo,n)}wo=e,Co=Cn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,bo=!1,wo=e}}function xo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;wo=e}function Po(e){if(e!==wo)return!1;if(!bo)return xo(e),bo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=Co;t;)Eo(e,t),t=Cn(t.nextSibling);if(xo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Co=Cn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Co=null}}else Co=wo?Cn(e.stateNode.nextSibling):null;return!0}function To(){Co=wo=null,bo=!1}var Mo=J.ReactCurrentOwner,Ao=!1;function Oo(e,t,n,i){t.child=null===e?Rs(t,null,n,i):ks(t,e.child,n,i)}function No(e,t,n,i,r){n=n.render;var s=t.ref;return ns(t,r),i=Vs(e,t,n,i,s,r),null===e||Ao?(t.effectTag|=1,Oo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Go(e,t,r))}function Io(e,t,n,i,r,s){if(null===e){var o=n.type;return"function"!=typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,i,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,i,r,s))}return o=e.child,r<s&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:Li)(r,i)&&e.ref===t.ref)?Go(e,t,s):(t.effectTag|=1,(e=xc(o,i)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,i,r,s){return null!==e&&Li(e.memoizedProps,i)&&e.ref===t.ref&&(Ao=!1,r<s)?(t.expirationTime=e.expirationTime,Go(e,t,s)):Do(e,t,n,i,s)}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Do(e,t,n,i,r){var s=gr(n)?pr:hr.current;return s=fr(t,s),ns(t,r),n=Vs(e,t,n,i,s,r),null===e||Ao?(t.effectTag|=1,Oo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Go(e,t,r))}function jo(e,t,n,i,r){if(gr(n)){var s=!0;Sr(t)}else s=!1;if(ns(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ys(t,n,i),Ss(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"==typeof l&&null!==l?l=is(l):l=fr(t,l=gr(n)?pr:hr.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||c!==l)&&vs(t,o,i,l),rs=!1;var d=t.memoizedState;o.state=d,us(t,i,o,r),c=t.memoizedState,a!==i||d!==c||dr.current||rs?("function"==typeof u&&(fs(t,n,u,i),c=t.memoizedState),(a=rs||ms(t,n,a,i,d,c,l))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=l,i=a):("function"==typeof o.componentDidMount&&(t.effectTag|=4),i=!1)}else o=t.stateNode,os(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:Gr(t.type,a),c=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=is(l):l=fr(t,l=gr(n)?pr:hr.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||c!==l)&&vs(t,o,i,l),rs=!1,c=t.memoizedState,o.state=c,us(t,i,o,r),d=t.memoizedState,a!==i||c!==d||dr.current||rs?("function"==typeof u&&(fs(t,n,u,i),d=t.memoizedState),(u=rs||ms(t,n,a,i,c,d,l))?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,d,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,d,l)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=d),o.props=i,o.state=d,o.context=l,i=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),i=!1);return Bo(e,t,n,i,s,r)}function Bo(e,t,n,i,r,s){_o(e,t);var o=0!=(64&t.effectTag);if(!i&&!o)return r&&wr(t,n,!1),Go(e,t,s);i=t.stateNode,Mo.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Oo(e,t,a,s),t.memoizedState=i.state,r&&wr(t,n,!0),t.child}function Lo(e){var t=e.stateNode;t.pendingContext?yr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yr(0,t.context,!1),Os(e,t.containerInfo)}var Wo,qo,Ho,Ko={dehydrated:null,retryTime:0};function Uo(e,t,n){var i,r=t.mode,s=t.pendingProps,o=_s.current,a=!1;if((i=0!=(64&t.effectTag))||(i=0!=(2&o)&&(null===e||null!==e.memoizedState)),i?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(o|=1),lr(_s,1&o),null===e){if(void 0!==s.fallback&&Ro(t),a){if(a=s.fallback,(s=Tc(null,r,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Tc(a,r,n,null)).return=t,s.sibling=n,t.memoizedState=Ko,t.child=s,n}return r=s.children,t.memoizedState=null,t.child=Rs(t,null,r,n)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,a){if(s=s.fallback,(n=xc(e,e.pendingProps)).return=t,0==(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(r=xc(r,s)).return=t,n.sibling=r,n.childExpirationTime=0,t.memoizedState=Ko,t.child=n,r}return n=ks(t,e.child,s.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=s.fallback,(s=Tc(null,r,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Tc(a,r,n,null)).return=t,s.sibling=n,n.effectTag|=2,s.childExpirationTime=0,t.memoizedState=Ko,t.child=s,n}return t.memoizedState=null,t.child=ks(t,e,s.children,n)}function $o(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ts(e.return,t)}function zo(e,t,n,i,r,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailExpiration=0,o.tailMode=r,o.lastEffect=s)}function Vo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Oo(e,t,i.children,n),0!=(2&(i=_s.current)))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n);else if(19===e.tag)$o(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lr(_s,i),0==(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Ds(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),zo(t,!1,r,n,s,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ds(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}zo(t,!0,n,null,s,t.lastEffect);break;case"together":zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Go(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&oc(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jo(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gr(t.type)&&mr(),null;case 3:return Ns(),cr(dr),cr(hr),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Po(t)||(t.effectTag|=4),null;case 5:Fs(t),n=As(Ms.current);var s=t.type;if(null!==e&&null!=t.stateNode)qo(e,t,s,i,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!i){if(null===t.stateNode)throw Error(o(166));return null}if(e=As(Ps.current),Po(t)){i=t.stateNode,s=t.type;var a=t.memoizedProps;switch(i[kn]=t,i[Rn]=a,s){case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(e=0;e<Je.length;e++)Vt(Je[e],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"form":Vt("reset",i),Vt("submit",i);break;case"details":Vt("toggle",i);break;case"input":Ee(i,a),Vt("invalid",i),cn(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Vt("invalid",i),cn(n,"onChange");break;case"textarea":Oe(i,a),Vt("invalid",i),cn(n,"onChange")}for(var c in sn(s,a),e=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"==typeof l?i.textContent!==l&&(e=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(e=["children",""+l]):k.hasOwnProperty(c)&&null!=l&&cn(n,c)}switch(s){case"input":we(i),xe(i,a,!0);break;case"textarea":we(i),Ie(i);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(i.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===an&&(e=De(s)),e===an?"script"===s?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=c.createElement(s,{is:i.is}):(e=c.createElement(s),"select"===s&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,s),e[kn]=t,e[Rn]=i,Wo(e,t),t.stateNode=e,c=on(s,i),s){case"iframe":case"object":case"embed":Vt("load",e),l=i;break;case"video":case"audio":for(l=0;l<Je.length;l++)Vt(Je[l],e);l=i;break;case"source":Vt("error",e),l=i;break;case"img":case"image":case"link":Vt("error",e),Vt("load",e),l=i;break;case"form":Vt("reset",e),Vt("submit",e),l=i;break;case"details":Vt("toggle",e),l=i;break;case"input":Ee(e,i),l=be(e,i),Vt("invalid",e),cn(n,"onChange");break;case"option":l=Te(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},l=r({},i,{value:void 0}),Vt("invalid",e),cn(n,"onChange");break;case"textarea":Oe(e,i),l=Ae(e,i),Vt("invalid",e),cn(n,"onChange");break;default:l=i}sn(s,l);var u=l;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?nn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Le(e,h):"children"===a?"string"==typeof h?("textarea"!==s||""!==h)&&We(e,h):"number"==typeof h&&We(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(k.hasOwnProperty(a)?null!=h&&cn(n,a):null!=h&&Y(e,a,h,c))}switch(s){case"input":we(e),xe(e,i,!1);break;case"textarea":we(e),Ie(e);break;case"option":null!=i.value&&e.setAttribute("value",""+ve(i.value));break;case"select":e.multiple=!!i.multiple,null!=(n=i.value)?Me(e,!!i.multiple,n,!1):null!=i.defaultValue&&Me(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=ln)}yn(s,i)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ho(0,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(o(166));n=As(Ms.current),As(Ps.current),Po(t)?(n=t.stateNode,i=t.memoizedProps,n[kn]=t,n.nodeValue!==i&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[kn]=t,t.stateNode=n)}return null;case 13:return cr(_s),i=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==i,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Po(t):(i=null!==(s=e.memoizedState),n||null===s||null!==(s=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=s,s.nextEffect=a):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),n&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&_s.current)?Pa===wa&&(Pa=Ca):(Pa!==wa&&Pa!==Ca||(Pa=ba),0!==Na&&null!==ka&&(Ic(ka,xa),Fc(ka,Na)))),(n||i)&&(t.effectTag|=4),null);case 4:return Ns(),null;case 10:return es(t),null;case 17:return gr(t.type)&&mr(),null;case 19:if(cr(_s),null===(i=t.memoizedState))return null;if(s=0!=(64&t.effectTag),null===(a=i.rendering)){if(s)Qo(i,!1);else if(Pa!==wa||null!==e&&0!=(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Ds(a))){for(t.effectTag|=64,Qo(i,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=t.child;null!==i;)a=n,(s=i).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=a,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),i=i.sibling;return lr(_s,1&_s.current|2),t.child}a=a.sibling}}else{if(!s)if(null!==(e=Ds(a))){if(t.effectTag|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Qo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Lr()-i.renderingStartTime>i.tailExpiration&&1<n&&(t.effectTag|=64,s=!0,Qo(i,!1),t.expirationTime=t.childExpirationTime=n-1);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=i.last)?n.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=Lr()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Lr(),n.sibling=null,t=_s.current,lr(_s,s?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function Yo(e){switch(e.tag){case 1:gr(e.type)&&mr();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ns(),cr(dr),cr(hr),0!=(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Fs(e),null;case 13:return cr(_s),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return cr(_s),null;case 4:return Ns(),null;case 10:return es(e),null;default:return null}}function Xo(e,t){return{value:e,source:t,stack:ye(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qo=function(e,t,n,i,s){var o=e.memoizedProps;if(o!==i){var a,c,l=t.stateNode;switch(As(Ps.current),e=null,n){case"input":o=be(l,o),i=be(l,i),e=[];break;case"option":o=Te(l,o),i=Te(l,i),e=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),e=[];break;case"textarea":o=Ae(l,o),i=Ae(l,i),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(l.onclick=ln)}for(a in sn(n,i),n=null,o)if(!i.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(c in l=o[a])l.hasOwnProperty(c)&&(n||(n={}),n[c]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(k.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in i){var u=i[a];if(l=null!=o?o[a]:void 0,i.hasOwnProperty(a)&&u!==l&&(null!=u||null!=l))if("style"===a)if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(n||(n={}),n[c]=u[c])}else n||(e||(e=[]),e.push(a,n)),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(a,u)):"children"===a?l===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(k.hasOwnProperty(a)?(null!=u&&cn(s,a),e||l===u||(e=[])):(e=e||[]).push(a,u))}n&&(e=e||[]).push("style",n),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Ho=function(e,t,n,i){n!==i&&(t.effectTag|=4)};var Zo="function"==typeof WeakSet?WeakSet:Set;function ea(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ta(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){vc(e,t)}else t.current=null}function na(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Gr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ia(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}n=n.next}while(n!==t)}}function ra(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ra(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:Gr(n.type,t.memoizedProps);e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&hs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}hs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Dt(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function oa(e,t,n){switch("function"==typeof bc&&bc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;Hr(97<n?97:n,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var r=t;try{n()}catch(e){vc(r,e)}}e=e.next}while(e!==i)}))}break;case 1:ta(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){vc(e,t)}}(t,n);break;case 5:ta(t);break;case 4:ua(e,t,n)}}function aa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&aa(t)}function ca(e){return 5===e.tag||3===e.tag||4===e.tag}function la(e){e:{for(var t=e.return;null!==t;){if(ca(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(o(161))}16&n.effectTag&&(We(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ca(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}i?function e(t,n,i){var r=t.tag,s=5===r||6===r;if(s)t=s?t.stateNode:t.stateNode.instance,n?8===i.nodeType?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(8===i.nodeType?(n=i.parentNode).insertBefore(t,i):(n=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==n.onclick||(n.onclick=ln));else if(4!==r&&null!==(t=t.child))for(e(t,n,i),t=t.sibling;null!==t;)e(t,n,i),t=t.sibling}(e,n,t):function e(t,n,i){var r=t.tag,s=5===r||6===r;if(s)t=s?t.stateNode:t.stateNode.instance,n?i.insertBefore(t,n):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(e(t,n,i),t=t.sibling;null!==t;)e(t,n,i),t=t.sibling}(e,n,t)}function ua(e,t,n){for(var i,r,s=t,a=!1;;){if(!a){a=s.return;e:for(;;){if(null===a)throw Error(o(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===s.tag||6===s.tag){e:for(var c=e,l=s,u=n,h=l;;)if(oa(c,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break e;for(;null===h.sibling;){if(null===h.return||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r?(c=i,l=s.stateNode,8===c.nodeType?c.parentNode.removeChild(l):c.removeChild(l)):i.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(oa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function ha(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ia(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,r=null!==e?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Rn]=i,"input"===e&&"radio"===i.type&&null!=i.name&&ke(n,i),on(e,r),t=on(e,i),r=0;r<s.length;r+=2){var a=s[r],c=s[r+1];"style"===a?nn(n,c):"dangerouslySetInnerHTML"===a?Le(n,c):"children"===a?We(n,c):Y(n,a,c,t)}switch(e){case"input":Re(n,i);break;case"textarea":Ne(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?Me(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Me(n,!!i.multiple,i.defaultValue,!0):Me(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,Fa=Lr()),null!==n)e:for(e=n;;){if(5===e.tag)s=e.stateNode,i?"function"==typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,r=null!=(r=e.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,s.style.display=tn("display",r));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void da(t);case 19:return void da(t);case 17:return}throw Error(o(163))}function da(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var i=wc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}var pa="function"==typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=as(n,null)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Da||(Da=!0,ja=i),ea(e,t)},n}function ga(e,t,n){(n=as(n,null)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return ea(e,t),i(r)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===Ba?Ba=new Set([this]):Ba.add(this),ea(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ma,ya=Math.ceil,va=J.ReactCurrentDispatcher,Sa=J.ReactCurrentOwner,wa=0,Ca=3,ba=4,Ea=0,ka=null,Ra=null,xa=0,Pa=wa,Ta=null,Ma=1073741823,Aa=1073741823,Oa=null,Na=0,Ia=!1,Fa=0,_a=null,Da=!1,ja=null,Ba=null,La=!1,Wa=null,qa=90,Ha=null,Ka=0,Ua=null,$a=0;function za(){return 0!=(48&Ea)?1073741821-(Lr()/10|0):0!==$a?$a:$a=1073741821-(Lr()/10|0)}function Va(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var i=Wr();if(0==(4&t))return 99===i?1073741823:1073741822;if(0!=(16&Ea))return xa;if(null!==n)e=Vr(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=Vr(e,150,100);break;case 97:case 96:e=Vr(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==ka&&e===xa&&--e,e}function Ga(e,t){if(50<Ka)throw Ka=0,Ua=null,Error(o(185));if(null!==(e=Qa(e,t))){var n=Wr();1073741823===t?0!=(8&Ea)&&0==(48&Ea)?Za(e):(Ya(e),0===Ea&&$r()):Ya(e),0==(4&Ea)||98!==n&&99!==n||(null===Ha?Ha=new Map([[e,t]]):(void 0===(n=Ha.get(e))||n>t)&&Ha.set(e,t))}}function Qa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,r=null;if(null===i&&3===e.tag)r=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(ka===r&&(oc(t),Pa===ba&&Ic(r,xa)),Fc(r,t)),r}function Ja(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Nc(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Ya(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ur(Za.bind(null,e));else{var t=Ja(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=za();if(1073741823===t?i=99:1===t||2===t?i=95:i=0>=(i=10*(1073741821-t)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=i)return;n!==Nr&&Er(n)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?Ur(Za.bind(null,e)):Kr(i,Xa.bind(null,e),{timeout:10*(1073741821-t)-Lr()}),e.callbackNode=t}}}function Xa(e,t){if($a=0,t)return _c(e,t=za()),Ya(e),null;var n=Ja(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ea))throw Error(o(327));if(gc(),e===ka&&n===xa||nc(e,n),null!==Ra){var i=Ea;Ea|=16;for(var r=rc();;)try{cc();break}catch(t){ic(e,t)}if(Zr(),Ea=i,va.current=r,1===Pa)throw t=Ta,nc(e,n),Ic(e,n),Ya(e),t;if(null===Ra)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=Pa,ka=null,i){case wa:case 1:throw Error(o(345));case 2:_c(e,2<n?2:n);break;case Ca:if(Ic(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hc(r)),1073741823===Ma&&10<(r=Fa+500-Lr())){if(Ia){var s=e.lastPingedTime;if(0===s||s>=n){e.lastPingedTime=n,nc(e,n);break}}if(0!==(s=Ja(e))&&s!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=Sn(dc.bind(null,e),r);break}dc(e);break;case ba:if(Ic(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hc(r)),Ia&&(0===(r=e.lastPingedTime)||r>=n)){e.lastPingedTime=n,nc(e,n);break}if(0!==(r=Ja(e))&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==Aa?i=10*(1073741821-Aa)-Lr():1073741823===Ma?i=0:(i=10*(1073741821-Ma)-5e3,0>(i=(r=Lr())-i)&&(i=0),(n=10*(1073741821-n)-r)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ya(i/1960))-i)&&(i=n)),10<i){e.timeoutHandle=Sn(dc.bind(null,e),i);break}dc(e);break;case 5:if(1073741823!==Ma&&null!==Oa){s=Ma;var a=Oa;if(0>=(i=0|a.busyMinDurationMs)?i=0:(r=0|a.busyDelayMs,i=(s=Lr()-(10*(1073741821-s)-(0|a.timeoutMs||5e3)))<=r?0:r+i-s),10<i){Ic(e,n),e.timeoutHandle=Sn(dc.bind(null,e),i);break}}dc(e);break;default:throw Error(o(329))}if(Ya(e),e.callbackNode===t)return Xa.bind(null,e)}}return null}function Za(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ea))throw Error(o(327));if(gc(),e===ka&&t===xa||nc(e,t),null!==Ra){var n=Ea;Ea|=16;for(var i=rc();;)try{ac();break}catch(t){ic(e,t)}if(Zr(),Ea=n,va.current=i,1===Pa)throw n=Ta,nc(e,t),Ic(e,t),Ya(e),n;if(null!==Ra)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,ka=null,dc(e),Ya(e)}return null}function ec(e,t){var n=Ea;Ea|=1;try{return e(t)}finally{0===(Ea=n)&&$r()}}function tc(e,t){var n=Ea;Ea&=-2,Ea|=8;try{return e(t)}finally{0===(Ea=n)&&$r()}}function nc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,wn(n)),null!==Ra)for(n=Ra.return;null!==n;){var i=n;switch(i.tag){case 1:null!=(i=i.type.childContextTypes)&&mr();break;case 3:Ns(),cr(dr),cr(hr);break;case 5:Fs(i);break;case 4:Ns();break;case 13:case 19:cr(_s);break;case 10:es(i)}n=n.return}ka=e,Ra=xc(e.current,null),xa=t,Pa=wa,Ta=null,Aa=Ma=1073741823,Oa=null,Na=0,Ia=!1}function ic(e,t){for(;;){try{if(Zr(),Bs.current=mo,Us)for(var n=qs.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}if(Ws=0,Ks=Hs=qs=null,Us=!1,null===Ra||null===Ra.return)return Pa=1,Ta=t,Ra=null;e:{var r=e,s=Ra.return,o=Ra,a=t;if(t=xa,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var c=a;if(0==(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var u=0!=(1&_s.current),h=s;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var f=h.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!u)}}if(d){var g=h.updateQueue;if(null===g){var m=new Set;m.add(c),h.updateQueue=m}else g.add(c);if(0==(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=as(1073741823,null);y.tag=2,cs(o,y)}o.expirationTime=1073741823;break e}a=void 0,o=t;var v=r.pingCache;if(null===v?(v=r.pingCache=new pa,a=new Set,v.set(c,a)):void 0===(a=v.get(c))&&(a=new Set,v.set(c,a)),!a.has(o)){a.add(o);var S=Sc.bind(null,r,c,o);c.then(S,S)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((me(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}5!==Pa&&(Pa=2),a=Xo(a,o),h=s;do{switch(h.tag){case 3:c=a,h.effectTag|=4096,h.expirationTime=t,ls(h,fa(h,c,t));break e;case 1:c=a;var w=h.type,C=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof w.getDerivedStateFromError||null!==C&&"function"==typeof C.componentDidCatch&&(null===Ba||!Ba.has(C)))){h.effectTag|=4096,h.expirationTime=t,ls(h,ga(h,c,t));break e}}h=h.return}while(null!==h)}Ra=uc(Ra)}catch(e){t=e;continue}break}}function rc(){var e=va.current;return va.current=mo,null===e?mo:e}function sc(e,t){e<Ma&&2<e&&(Ma=e),null!==t&&e<Aa&&2<e&&(Aa=e,Oa=t)}function oc(e){e>Na&&(Na=e)}function ac(){for(;null!==Ra;)Ra=lc(Ra)}function cc(){for(;null!==Ra&&!Ir();)Ra=lc(Ra)}function lc(e){var t=ma(e.alternate,e,xa);return e.memoizedProps=e.pendingProps,null===t&&(t=uc(e)),Sa.current=null,t}function uc(e){Ra=e;do{var t=Ra.alternate;if(e=Ra.return,0==(2048&Ra.effectTag)){if(t=Jo(t,Ra,xa),1===xa||1!==Ra.childExpirationTime){for(var n=0,i=Ra.child;null!==i;){var r=i.expirationTime,s=i.childExpirationTime;r>n&&(n=r),s>n&&(n=s),i=i.sibling}Ra.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ra.firstEffect),null!==Ra.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ra.firstEffect),e.lastEffect=Ra.lastEffect),1<Ra.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ra:e.firstEffect=Ra,e.lastEffect=Ra))}else{if(null!==(t=Yo(Ra)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ra.sibling))return t;Ra=e}while(null!==Ra);return Pa===wa&&(Pa=5),null}function hc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function dc(e){var t=Wr();return Hr(99,pc.bind(null,e,t)),null}function pc(e,t){do{gc()}while(null!==Wa);if(0!=(48&Ea))throw Error(o(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=hc(n);if(e.firstPendingTime=r,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===ka&&(Ra=ka=null,xa=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var s=Ea;Ea|=32,Sa.current=null,gn=zt;var a=pn();if(fn(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{var l=(c=(c=a.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(l&&0!==l.rangeCount){c=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{c.nodeType,h.nodeType}catch(e){c=null;break e}var d=0,p=-1,f=-1,g=0,m=0,y=a,v=null;t:for(;;){for(var S;y!==c||0!==u&&3!==y.nodeType||(p=d+u),y!==h||0!==l&&3!==y.nodeType||(f=d+l),3===y.nodeType&&(d+=y.nodeValue.length),null!==(S=y.firstChild);)v=y,y=S;for(;;){if(y===a)break t;if(v===c&&++g===u&&(p=d),v===h&&++m===l&&(f=d),null!==(S=y.nextSibling))break;v=(y=v).parentNode}y=S}c=-1===p||-1===f?null:{start:p,end:f}}else c=null}c=c||{start:0,end:0}}else c=null;mn={activeElementDetached:null,focusedElem:a,selectionRange:c},zt=!1,_a=r;do{try{fc()}catch(e){if(null===_a)throw Error(o(330));vc(_a,e),_a=_a.nextEffect}}while(null!==_a);_a=r;do{try{for(a=e,c=t;null!==_a;){var w=_a.effectTag;if(16&w&&We(_a.stateNode,""),128&w){var C=_a.alternate;if(null!==C){var b=C.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&w){case 2:la(_a),_a.effectTag&=-3;break;case 6:la(_a),_a.effectTag&=-3,ha(_a.alternate,_a);break;case 1024:_a.effectTag&=-1025;break;case 1028:_a.effectTag&=-1025,ha(_a.alternate,_a);break;case 4:ha(_a.alternate,_a);break;case 8:ua(a,u=_a,c),aa(u)}_a=_a.nextEffect}}catch(e){if(null===_a)throw Error(o(330));vc(_a,e),_a=_a.nextEffect}}while(null!==_a);if(b=mn,C=pn(),w=b.focusedElem,c=b.selectionRange,C!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==c&&fn(w)&&(C=c.start,void 0===(b=c.end)&&(b=C),"selectionStart"in w?(w.selectionStart=C,w.selectionEnd=Math.min(b,w.value.length)):(b=(C=w.ownerDocument||document)&&C.defaultView||window).getSelection&&(b=b.getSelection(),u=w.textContent.length,a=Math.min(c.start,u),c=void 0===c.end?a:Math.min(c.end,u),!b.extend&&a>c&&(u=c,c=a,a=u),u=dn(w,a),h=dn(w,c),u&&h&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==h.node||b.focusOffset!==h.offset)&&((C=C.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),a>c?(b.addRange(C),b.extend(h.node,h.offset)):(C.setEnd(h.node,h.offset),b.addRange(C))))),C=[];for(b=w;b=b.parentNode;)1===b.nodeType&&C.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<C.length;w++)(b=C[w]).element.scrollLeft=b.left,b.element.scrollTop=b.top}zt=!!gn,mn=gn=null,e.current=n,_a=r;do{try{for(w=e;null!==_a;){var E=_a.effectTag;if(36&E&&sa(w,_a.alternate,_a),128&E){C=void 0;var k=_a.ref;if(null!==k){var R=_a.stateNode;switch(_a.tag){case 5:C=R;break;default:C=R}"function"==typeof k?k(C):k.current=C}}_a=_a.nextEffect}}catch(e){if(null===_a)throw Error(o(330));vc(_a,e),_a=_a.nextEffect}}while(null!==_a);_a=null,Fr(),Ea=s}else e.current=n;if(La)La=!1,Wa=e,qa=t;else for(_a=r;null!==_a;)t=_a.nextEffect,_a.nextEffect=null,_a=t;if(0===(t=e.firstPendingTime)&&(Ba=null),1073741823===t?e===Ua?Ka++:(Ka=0,Ua=e):Ka=0,"function"==typeof Cc&&Cc(n.stateNode,i),Ya(e),Da)throw Da=!1,e=ja,ja=null,e;return 0!=(8&Ea)||$r(),null}function fc(){for(;null!==_a;){var e=_a.effectTag;0!=(256&e)&&na(_a.alternate,_a),0==(512&e)||La||(La=!0,Kr(97,(function(){return gc(),null}))),_a=_a.nextEffect}}function gc(){if(90!==qa){var e=97<qa?97:qa;return qa=90,Hr(e,mc)}}function mc(){if(null===Wa)return!1;var e=Wa;if(Wa=null,0!=(48&Ea))throw Error(o(331));var t=Ea;for(Ea|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ia(5,n),ra(5,n)}}catch(t){if(null===e)throw Error(o(330));vc(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ea=t,$r(),!0}function yc(e,t,n){cs(e,t=fa(e,t=Xo(n,t),1073741823)),null!==(e=Qa(e,1073741823))&&Ya(e)}function vc(e,t){if(3===e.tag)yc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){yc(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Ba||!Ba.has(i))){cs(n,e=ga(n,e=Xo(t,e),1073741823)),null!==(n=Qa(n,1073741823))&&Ya(n);break}}n=n.return}}function Sc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),ka===e&&xa===n?Pa===ba||Pa===Ca&&1073741823===Ma&&Lr()-Fa<500?nc(e,xa):Ia=!0:Nc(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Ya(e)))}function wc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Va(t=za(),e,null)),null!==(e=Qa(e,t))&&Ya(e)}ma=function(e,t,n){var i=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||dr.current)Ao=!0;else{if(i<n){switch(Ao=!1,t.tag){case 3:Lo(t),To();break;case 5:if(Is(t),4&t.mode&&1!==n&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gr(t.type)&&Sr(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,r=t.type._context,lr(Qr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?Uo(e,t,n):(lr(_s,1&_s.current),null!==(t=Go(e,t,n))?t.sibling:null);lr(_s,1&_s.current);break;case 19:if(i=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(i)return Vo(e,t,n);t.effectTag|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null),lr(_s,_s.current),!i)return null}return Go(e,t,n)}Ao=!1}}else Ao=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=fr(t,hr.current),ns(t,n),r=Vs(null,t,i,e,r,n),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gr(i)){var s=!0;Sr(t)}else s=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ss(t);var a=i.getDerivedStateFromProps;"function"==typeof a&&fs(t,i,a,e),r.updater=gs,t.stateNode=r,r._reactInternalFiber=t,Ss(t,i,e,n),t=Bo(null,t,i,!0,s,n)}else t.tag=0,Oo(null,t,r,n),t=t.child;return t;case 16:e:{if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,s=t.tag=function(e){if("function"==typeof e)return Rc(e)?1:0;if(null!=e){if((e=e.$$typeof)===ce)return 11;if(e===he)return 14}return 2}(r),e=Gr(r,e),s){case 0:t=Do(null,t,r,e,n);break e;case 1:t=jo(null,t,r,e,n);break e;case 11:t=No(null,t,r,e,n);break e;case 14:t=Io(null,t,r,Gr(r.type,e),i,n);break e}throw Error(o(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Do(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 1:return i=t.type,r=t.pendingProps,jo(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 3:if(Lo(t),i=t.updateQueue,null===e||null===i)throw Error(o(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,os(e,t),us(t,i,null,n),(i=t.memoizedState.element)===r)To(),t=Go(e,t,n);else{if((r=t.stateNode.hydrate)&&(Co=Cn(t.stateNode.containerInfo.firstChild),wo=t,r=bo=!0),r)for(n=Rs(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Oo(e,t,i,n),To();t=t.child}return t;case 5:return Is(t),null===e&&Ro(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,vn(i,r)?a=null:null!==s&&vn(i,s)&&(t.effectTag|=16),_o(e,t),4&t.mode&&1!==n&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Oo(e,t,a,n),t=t.child),t;case 6:return null===e&&Ro(t),null;case 13:return Uo(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ks(t,null,i,n):Oo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,No(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value;var c=t.type._context;if(lr(Qr,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=ji(c,s)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(c,s):1073741823))){if(a.children===r.children&&!dr.current){t=Go(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===i&&0!=(u.observedBits&s)){1===c.tag&&((u=as(n,null)).tag=2,cs(c,u)),c.expirationTime<n&&(c.expirationTime=n),null!==(u=c.alternate)&&u.expirationTime<n&&(u.expirationTime=n),ts(c.return,n),l.expirationTime<n&&(l.expirationTime=n);break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Oo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(s=t.pendingProps).children,ns(t,n),i=i(r=is(r,s.unstable_observedBits)),t.effectTag|=1,Oo(e,t,i,n),t.child;case 14:return s=Gr(r=t.type,t.pendingProps),Io(e,t,r,s=Gr(r.type,s),i,n);case 15:return Fo(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Gr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gr(i)?(e=!0,Sr(t)):e=!1,ns(t,n),ys(t,i,r),Ss(t,i,r,n),Bo(null,t,i,!0,e,n);case 19:return Vo(e,t,n)}throw Error(o(156,t.tag))};var Cc=null,bc=null;function Ec(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function kc(e,t,n,i){return new Ec(e,t,n,i)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,i,r,s){var a=2;if(i=e,"function"==typeof e)Rc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ne:return Tc(n.children,r,s,t);case ae:a=8,r|=7;break;case ie:a=8,r|=1;break;case re:return(e=kc(12,n,t,8|r)).elementType=re,e.type=re,e.expirationTime=s,e;case le:return(e=kc(13,n,t,r)).type=le,e.elementType=le,e.expirationTime=s,e;case ue:return(e=kc(19,n,t,r)).elementType=ue,e.expirationTime=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case se:a=10;break e;case oe:a=9;break e;case ce:a=11;break e;case he:a=14;break e;case de:a=16,i=null;break e;case pe:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=kc(a,n,t,r)).elementType=e,t.type=i,t.expirationTime=s,t}function Tc(e,t,n,i){return(e=kc(7,e,i,t)).expirationTime=n,e}function Mc(e,t,n){return(e=kc(6,e,null,t)).expirationTime=n,e}function Ac(e,t,n){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Nc(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ic(e,t){var n=e.firstSuspendedTime,i=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(i>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Fc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function _c(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Dc(e,t,n,i){var r=t.current,s=za(),a=ds.suspense;s=Va(s,r,a);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(gr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gr(l)){n=vr(n,l,c);break e}}n=c}else n=ur;return null===t.context?t.context=n:t.pendingContext=n,(t=as(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),cs(r,t),Ga(r,s),s}function jc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Lc(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}function Wc(e,t,n){var i=new Oc(e,t,n=null!=n&&!0===n.hydrate),r=kc(3,null,null,2===t?7:1===t?3:0);i.current=r,r.stateNode=i,ss(r),e[xn]=i.current,n&&0!==t&&function(e,t){var n=Xe(t);xt.forEach((function(e){ft(e,t,n)})),Pt.forEach((function(e){ft(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hc(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof r){var a=r;r=function(){var e=jc(o);a.call(e)}}Dc(t,o,e,r)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Wc(e,0,t?{hydrate:!0}:void 0)}(n,i),o=s._internalRoot,"function"==typeof r){var c=r;r=function(){var e=jc(o);c.call(e)}}tc((function(){Dc(t,o,e,r)}))}return jc(o)}function Kc(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(o(200));return Kc(e,t,null,n)}Wc.prototype.render=function(e){Dc(e,this._internalRoot,null,null)},Wc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Dc(null,e,null,(function(){t[xn]=null}))},gt=function(e){if(13===e.tag){var t=Vr(za(),150,100);Ga(e,t),Lc(e,t)}},mt=function(e){13===e.tag&&(Ga(e,3),Lc(e,3))},yt=function(e){if(13===e.tag){var t=za();Ga(e,t=Va(t,e,null)),Lc(e,t)}},T=function(e,t,n){switch(t){case"input":if(Re(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=An(i);if(!r)throw Error(o(90));Ce(i),Re(i,r)}}}break;case"textarea":Ne(e,n);break;case"select":null!=(t=n.value)&&Me(e,!!n.multiple,t,!1)}},F=ec,_=function(e,t,n,i,r){var s=Ea;Ea|=4;try{return Hr(98,e.bind(null,t,n,i,r))}finally{0===(Ea=s)&&$r()}},D=function(){0==(49&Ea)&&(function(){if(null!==Ha){var e=Ha;Ha=null,e.forEach((function(e,t){_c(t,e),Ya(t)})),$r()}}(),gc())},j=function(e,t){var n=Ea;Ea|=2;try{return e(t)}finally{0===(Ea=n)&&$r()}};var $c,zc,Vc={Events:[Tn,Mn,An,x,E,jn,function(e){rt(e,Dn)},N,I,Yt,at,gc,{current:!1}]};zc=($c={findFiberByHostInstance:Pn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Cc=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},bc=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(r({},$c,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return zc?zc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vc,t.createPortal=Uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ea))throw Error(o(187));var n=Ea;Ea|=1;try{return Hr(99,e.bind(null,t))}finally{Ea=n,$r()}},t.hydrate=function(e,t,n){if(!qc(t))throw Error(o(200));return Hc(null,e,t,!0,n)},t.render=function(e,t,n){if(!qc(t))throw Error(o(200));return Hc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(o(40));return!!e._reactRootContainer&&(tc((function(){Hc(null,null,e,!1,(function(){e._reactRootContainer=null,e[xn]=null}))})),!0)},t.unstable_batchedUpdates=ec,t.unstable_createPortal=function(e,t){return Uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Hc(e,t,n,!1,i)},t.version="16.14.0"},function(e,t,n){"use strict";e.exports=n(531)},function(e,t,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i,r,s,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,u=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(u,0),e}},h=Date.now();t.unstable_now=function(){return Date.now()-h},i=function(e){null!==c?setTimeout(i,0,e):(c=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},s=function(){clearTimeout(l)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,f=window.setTimeout,g=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var y=p.now();t.unstable_now=function(){return p.now()-y}}var v=!1,S=null,w=-1,C=5,b=0;o=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):C=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,k=E.port2;E.port1.onmessage=function(){if(null!==S){var e=t.unstable_now();b=e+C;try{S(!0,e)?k.postMessage(null):(v=!1,S=null)}catch(e){throw k.postMessage(null),e}}else v=!1},i=function(e){S=e,v||(v=!0,k.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},s=function(){g(w),w=-1}}function R(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<T(r,t)))break e;e[i]=t,e[n]=r,n=i}}function x(e){return void 0===(e=e[0])?null:e}function P(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var s=2*(i+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>T(o,n))void 0!==c&&0>T(c,o)?(e[i]=c,e[a]=n,i=a):(e[i]=o,e[s]=n,i=s);else{if(!(void 0!==c&&0>T(c,n)))break e;e[i]=c,e[a]=n,i=a}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],A=[],O=1,N=null,I=3,F=!1,_=!1,D=!1;function j(e){for(var t=x(A);null!==t;){if(null===t.callback)P(A);else{if(!(t.startTime<=e))break;P(A),t.sortIndex=t.expirationTime,R(M,t)}t=x(A)}}function B(e){if(D=!1,j(e),!_)if(null!==x(M))_=!0,i(L);else{var t=x(A);null!==t&&r(B,t.startTime-e)}}function L(e,n){_=!1,D&&(D=!1,s()),F=!0;var i=I;try{for(j(n),N=x(M);null!==N&&(!(N.expirationTime>n)||e&&!o());){var a=N.callback;if(null!==a){N.callback=null,I=N.priorityLevel;var c=a(N.expirationTime<=n);n=t.unstable_now(),"function"==typeof c?N.callback=c:N===x(M)&&P(M),j(n)}else P(M);N=x(M)}if(null!==N)var l=!0;else{var u=x(A);null!==u&&r(B,u.startTime-n),l=!1}return l}finally{N=null,I=i,F=!1}}function W(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){_||F||(_=!0,i(L))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return x(M)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,n,o){var a=t.unstable_now();if("object"==typeof o&&null!==o){var c=o.delay;c="number"==typeof c&&0<c?a+c:a,o="number"==typeof o.timeout?o.timeout:W(e)}else o=W(e),c=a;return e={id:O++,callback:n,priorityLevel:e,startTime:c,expirationTime:o=c+o,sortIndex:-1},c>a?(e.sortIndex=c,R(A,e),null===x(M)&&e===x(A)&&(D?s():D=!0,r(B,c-a))):(e.sortIndex=o,R(M,e),_||F||(_=!0,i(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();j(e);var n=x(M);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WaterfallNode=class{constructor(e,t,n,i,r,s){this.id=e,this.name=t,this.path=n,this.rawMeasure=i,this.perfGoups=s,this.groups=[],this.getTotalDuration=()=>{let e=0;for(let t of this.groups){const n=t.measure.startTime+t.measure.duration;n>e&&(e=n)}return e},this.measure={name:i.name,duration:i.duration,startTime:i.startTime,entryType:i.entryType};for(let e of r)this.groups.push(Object.assign(Object.assign({},e),{groups:[]}));for(let e of this.perfGoups)this.groups.push(e.getWaterfall());const o=this.getTotalDuration()-this.measure.startTime;this.measure=Object.assign(Object.assign({},this.measure),{duration:o})}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=n(83);class o{constructor(e){this.pathString=e,this.blocks={},this.onAnyEventEmitter=new r.Emitter,this.onAnyEvent=this.onAnyEventEmitter.event,this.markBlock=e=>{const{id:t,name:n,type:i}=e,r=`${this.pathString}.block: ${null!=t?t:n}`,o=`${r}-${i}`;if(this.blocks[r]&&this.blocks[r][i])throw new Error(`The event "${o}" already marked in this group.`);s.performance.mark(o);const[a]=s.performance.getEntriesByName(o),c=this.blocks[r]||{path:r,id:"start"===i?t:void 0,name:"start"===i?n:void 0};if(c[e.type]=Object.assign(Object.assign({},e),{path:o}),this.blocks[r]=c,t&&void 0!==a){const e={id:t,name:n,type:i,measure:a};if("end"===i){const[n]=s.performance.getEntriesByName(r+"-start");if(!n)throw new Error("No start block found for event "+t);e.measure=Object.assign(Object.assign({},a),{duration:a.startTime-n.startTime})}this.onAnyEventEmitter.fire(e),this.invokeBlock(e)}return this},this.markBlockStart=e=>this.markBlock(Object.assign({type:"start"},e)),this.markBlockEnd=e=>this.markBlock(Object.assign({type:"end"},e)),this.getBlock=e=>{const t=`${this.pathString}.block: ${e}`,n=this.blocks[t];if(n)return n},this.measure=(e,t)=>i(this,void 0,void 0,(function*(){this.markBlock(Object.assign(Object.assign({},e),{type:"start"}));try{return yield t()}finally{this.markBlock(Object.assign(Object.assign({},e),{type:"end"}))}})),this.measureSync=(e,t)=>{this.markBlock(Object.assign(Object.assign({},e),{type:"start"}));try{return t()}finally{this.markBlock(Object.assign(Object.assign({},e),{type:"end"}))}},this.measures=()=>{const e=[];for(let[t,n]of Object.entries(this.blocks)){const{start:i,end:r}=n;if(!i||!r)continue;s.performance.measure(n.path,""+i.path,""+r.path);const[o]=s.performance.getEntriesByName(n.path);if(!o)throw new Error(`No measure found in Performance API for "${t}".`);e.push({id:n.id,name:n.name,measure:o})}return e},this.invokeBlock=e=>{const t=this.getBlockCallbackId(e),n=o.onEventEmitters[t];n&&n.fire(e)},this.getBlockCallbackId=e=>{const{id:t,type:n}=e;return`${t}-${n}`},this.onEvent=(e,t)=>{const n=this.getBlockCallbackId(e);let i=o.onEventEmitters[n];return i||(i=new r.Emitter,o.onEventEmitters[n]=i),i.event(t),this}}}t.PerformanceBlocks=o,o.onEventEmitters={}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(535)),s=n(537),o=(e,t,n,i,s)=>{const o=`[${n}ms - ${n+i}ms]`;console[e]([t+":",r.default.cyan(i+"ms"),r.default.magenta(`+${n-s}ms`),r.default.gray(o)].join(" "))},a=(e,t)=>{const{name:n,measure:i}=e,{startTime:r,duration:s}=i;((e,t,n,i)=>{o("log",e,t,n,i)})(n,Math.round(r),Math.round(s),t)};t.logPerformanceWaterfall=(e,n)=>{const{measure:i,name:r}=e,{startTime:c,duration:l}=i,u=Math.round(c);n=null!=n?n:Math.round(c),((e,t,n,i)=>{o("groupCollapsed",e,t,n,i)})(r,u,Math.round(l),n);for(let i of s.sortByStartTime([...e.groups]))i.groups.length?t.logPerformanceWaterfall(i,n):a(i,n);console.groupEnd()}},function(e,t,n){"use strict";(function(t){const i=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,r=()=>{const e={enabled:!0,visible:!0,styles:{},keys:{}};"FORCE_COLOR"in t.env&&(e.enabled="0"!==t.env.FORCE_COLOR);const r=(e,t,n)=>"function"==typeof e?e(t):e.wrap(t,n),s=(t,n)=>{if(""===t||null==t)return"";if(!1===e.enabled)return t;if(!1===e.visible)return"";let i=""+t,s=i.includes("\n"),o=n.length;for(o>0&&n.includes("unstyle")&&(n=[...new Set(["unstyle",...n])].reverse());o-- >0;)i=r(e.styles[n[o]],i,s);return i},o=(t,n,i)=>{e.styles[t]=(e=>{let t=e.open=`[${e.codes[0]}m`,n=e.close=`[${e.codes[1]}m`,i=e.regex=new RegExp(`\\u001b\\[${e.codes[1]}m`,"g");return e.wrap=(e,r)=>{e.includes(n)&&(e=e.replace(i,n+t));let s=t+e+n;return r?s.replace(/\r*\n/g,`${n}$&${t}`):s},e})({name:t,codes:n}),(e.keys[i]||(e.keys[i]=[])).push(t),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(n){e.alias(t,n)},get(){let n=e=>s(e,n.stack);return Reflect.setPrototypeOf(n,e),n.stack=this.stack?this.stack.concat(t):[t],n}})};return o("reset",[0,0],"modifier"),o("bold",[1,22],"modifier"),o("dim",[2,22],"modifier"),o("italic",[3,23],"modifier"),o("underline",[4,24],"modifier"),o("inverse",[7,27],"modifier"),o("hidden",[8,28],"modifier"),o("strikethrough",[9,29],"modifier"),o("black",[30,39],"color"),o("red",[31,39],"color"),o("green",[32,39],"color"),o("yellow",[33,39],"color"),o("blue",[34,39],"color"),o("magenta",[35,39],"color"),o("cyan",[36,39],"color"),o("white",[37,39],"color"),o("gray",[90,39],"color"),o("grey",[90,39],"color"),o("bgBlack",[40,49],"bg"),o("bgRed",[41,49],"bg"),o("bgGreen",[42,49],"bg"),o("bgYellow",[43,49],"bg"),o("bgBlue",[44,49],"bg"),o("bgMagenta",[45,49],"bg"),o("bgCyan",[46,49],"bg"),o("bgWhite",[47,49],"bg"),o("blackBright",[90,39],"bright"),o("redBright",[91,39],"bright"),o("greenBright",[92,39],"bright"),o("yellowBright",[93,39],"bright"),o("blueBright",[94,39],"bright"),o("magentaBright",[95,39],"bright"),o("cyanBright",[96,39],"bright"),o("whiteBright",[97,39],"bright"),o("bgBlackBright",[100,49],"bgBright"),o("bgRedBright",[101,49],"bgBright"),o("bgGreenBright",[102,49],"bgBright"),o("bgYellowBright",[103,49],"bgBright"),o("bgBlueBright",[104,49],"bgBright"),o("bgMagentaBright",[105,49],"bgBright"),o("bgCyanBright",[106,49],"bgBright"),o("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=i,e.hasColor=e.hasAnsi=t=>(e.ansiRegex.lastIndex=0,"string"==typeof t&&""!==t&&e.ansiRegex.test(t)),e.alias=(t,n)=>{let i="string"==typeof n?e[n]:n;if("function"!=typeof i)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");i.stack||(Reflect.defineProperty(i,"name",{value:t}),e.styles[t]=i,i.stack=[t]),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(n){e.alias(t,n)},get(){let t=e=>s(e,t.stack);return Reflect.setPrototypeOf(t,e),t.stack=this.stack?this.stack.concat(i.stack):i.stack,t}})},e.theme=t=>{if(null===(n=t)||"object"!=typeof n||Array.isArray(n))throw new TypeError("Expected theme to be an object");var n;for(let n of Object.keys(t))e.alias(n,t[n]);return e},e.alias("unstyle",t=>"string"==typeof t&&""!==t?(e.ansiRegex.lastIndex=0,t.replace(e.ansiRegex,"")):""),e.alias("noop",e=>e),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=n(536),e.define=o,e};e.exports=r(),e.exports.create=r}).call(this,n(16))},function(e,t,n){"use strict";(function(t){const n="Hyper"===t.env.TERM_PROGRAM,i="win32"===t.platform,r="linux"===t.platform,s={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},o=Object.assign({},s,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",question:"?",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),a=Object.assign({},s,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",question:"?",questionFull:"？",questionSmall:"﹖",pointer:r?"▸":"❯",pointerSmall:r?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});e.exports=i&&!n?o:a,Reflect.defineProperty(e.exports,"common",{enumerable:!1,value:s}),Reflect.defineProperty(e.exports,"windows",{enumerable:!1,value:o}),Reflect.defineProperty(e.exports,"other",{enumerable:!1,value:a})}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortByStartTime=e=>[...e].sort((e,t)=>e.measure.startTime-t.measure.startTime)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(539);t.PerformanceMock=i.PerformanceMock},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(330);class r extends i.Performance{get groupsMock(){return this.groups}}t.PerformanceMock=r},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(31);class o{}t.RemoteStreamMoniker=o;class a{}t.FileServiceRootDirectoryConfiguration=a;class c{}i([s.dataFormat(a),r("design:type",Array)],c.prototype,"directories",void 0),t.FileServiceRootConfiguration=c;class l{}t.MaybeImmutableOfAccessControl=l;class u extends l{}var h,d,p;t.AccessControl=u,function(e){e[e.Begin="begin"]="Begin",e[e.Current="current"]="Current",e[e.End="end"]="End"}(t.SeekOrigin||(t.SeekOrigin={}));class f{}t.FeatureFlagStore=f;class g{}t.EventArgs=g;t.AttemptHubConnectionEventArgs=class extends g{},function(e){e[e.None="none"]="None",e[e.TokenExpired="tokenExpired"]="TokenExpired",e[e.ServiceUnavailable="serviceUnavailable"]="ServiceUnavailable"}(t.HubConnectionError||(t.HubConnectionError={}));t.AgentTraceEventArgs=class extends g{};t.AgentSessionRequest=class{};t.AgentSessionResponse=class{};class m{}i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],m.prototype,"token",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],m.prototype,"code",void 0),t.AuthenticationToken=m;class y{}i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],y.prototype,"accountId",void 0),t.UserAccountInfo=y;class v extends y{}i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],v.prototype,"id",void 0),i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],v.prototype,"displayName",void 0),i([s.dataFormat(s.DataFormat.Email),r("design:type",String)],v.prototype,"emailAddress",void 0),i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],v.prototype,"userName",void 0),i([s.dataFormat(s.DataFormat.Uri),r("design:type",String)],v.prototype,"avatarUri",void 0),t.UserInfo=v,function(e){e[e.Unknown="unknown"]="Unknown",e[e.Transient="transient"]="Transient",e[e.Pending="pending"]="Pending",e[e.Accepted="accepted"]="Accepted",e[e.Deleted="deleted"]="Deleted"}(t.UserAccountStatus||(t.UserAccountStatus={}));class S{}i([s.dataFormat(s.DataFormat.Email),r("design:type",String)],S.prototype,"email",void 0),i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],S.prototype,"name",void 0),i([s.dataFormat(s.DataFormat.Uri),r("design:type",String)],S.prototype,"avatarUri",void 0),t.RecentCollaborator=S;t.AuthenticationOptions=class{};class w extends g{}i([s.dataFormat(v),r("design:type",v)],w.prototype,"account",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],w.prototype,"accessToken",void 0),t.AuthenticationChangedEventArgs=w;class C{}i([s.dataFormat(v),r("design:type",v)],C.prototype,"userInfo",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],C.prototype,"accessToken",void 0),t.AuthenticatedUserInfo=C;t.BrokerManifest=class{};t.BrokerEventArgs=class extends g{},function(e){e[e.Text="text"]="Text",e[e.Typing="typing"]="Typing"}(t.ChatMessageType||(t.ChatMessageType={}));t.ChatParticipant=class{};class b{}t.ChatMessageBody=b;class E{}i([s.dataFormat(b),r("design:type",b)],E.prototype,"body",void 0),t.ChatMessage=E;class k extends g{}i([s.dataFormat(E),r("design:type",E)],k.prototype,"message",void 0),t.MessageReceivedEventArgs=k;class R{constructor(){this.startOffset=-1}}t.Position=R,function(e){e[e.Active="active"]="Active",e[e.Closed="closed"]="Closed"}(t.CommentThreadStatus||(t.CommentThreadStatus={}));class x{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],x.prototype,"filePath",void 0),i([s.dataFormat(R),r("design:type",R)],x.prototype,"leftFileStart",void 0),i([s.dataFormat(R),r("design:type",R)],x.prototype,"leftFileEnd",void 0),i([s.dataFormat(R),r("design:type",R)],x.prototype,"rightFileStart",void 0),i([s.dataFormat(R),r("design:type",R)],x.prototype,"rightFileEnd",void 0),t.CommentThreadContext=x;class P{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],P.prototype,"participantId",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],P.prototype,"participantLabel",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],P.prototype,"text",void 0),t.Comment=P;class T{}i([s.dataFormat(P),r("design:type",Array)],T.prototype,"comments",void 0),i([s.dataFormat(x),r("design:type",x)],T.prototype,"threadContext",void 0),t.CommentThread=T;class M extends g{}i([s.dataFormat(T),r("design:type",T)],M.prototype,"newThread",void 0),i([s.dataFormat(P),r("design:type",P)],M.prototype,"changedComment",void 0),t.CommentThreadChangedEventArgs=M;class A{}i([s.dataFormat(x),s.dataFormat(x),r("design:type",x)],A.prototype,"threadContext",void 0),t.CommentThreadLocation=A;t.AddressAndMask=class{};t.AgentVersionInfo=class{};t.ClientVersionInfo=class{},function(e){e[e.None="none"]="None",e[e.Allow="allow"]="Allow",e[e.Block="block"]="Block"}(t.FirewallStatus||(t.FirewallStatus={}));t.HubMethodNotifyEventArgs=class extends g{};t.HubConnectionStateEventArgs=class extends g{},function(e){e[e.None="none"]="None",e[e.Invited="invited"]="Invited",e[e.Dismissed="dismissed"]="Dismissed",e[e.Joining="joining"]="Joining",e[e.Joined="joined"]="Joined"}(t.InviteContactStatus||(t.InviteContactStatus={}));t.InviteStatusNotify=class{},function(e){e[e.Idle="idle"]="Idle",e[e.Shared="shared"]="Shared"}(t.LiveShareSessionState||(t.LiveShareSessionState={})),function(e){e[e.Private="private"]="Private",e[e.Public="public"]="Public",e[e.Org="org"]="Org"}(h=t.PrivacyEnum||(t.PrivacyEnum={}));class O{}i([s.dataFormat(s.DataFormat.Uri),r("design:type",String)],O.prototype,"browseUrl",void 0),i([s.dataFormat(h),r("design:type",Number)],O.prototype,"privacy",void 0),t.SharedServer=O;class N{}t.SharedPipe=N;class I extends g{}i([s.dataFormat(O),r("design:type",O)],I.prototype,"server",void 0),t.ServerSharingStartedEventArgs=I;class F extends g{}i([s.dataFormat(N),r("design:type",N)],F.prototype,"pipe",void 0),t.PipeSharingStartedEventArgs=F;class _ extends g{}i([s.dataFormat(O),r("design:type",O)],_.prototype,"server",void 0),t.ServerSharingStoppedEventArgs=_;class D extends g{}i([s.dataFormat(N),r("design:type",N)],D.prototype,"pipe",void 0),t.PipeSharingStoppedEventArgs=D;class j extends g{}i([s.dataFormat(O),r("design:type",O)],j.prototype,"server",void 0),t.ServerSharingChangedEventArgs=j,function(e){e[e.Start="start"]="Start",e[e.Update="update"]="Update",e[e.Stop="stop"]="Stop"}(d=t.ChangeKind||(t.ChangeKind={})),function(e){e[e.Basis="basis"]="Basis",e[e.Liveshare="liveshare"]="Liveshare"}(t.TunnelType||(t.TunnelType={}));class B extends g{}i([s.dataFormat(d),r("design:type",Number)],B.prototype,"changeKind",void 0),t.ServerSharingSucceededEventArgs=B;class L extends g{}i([s.dataFormat(d),r("design:type",Number)],L.prototype,"changeKind",void 0),t.ServerSharingFailedEventArgs=L;t.SessionUpdateEventArgs=class extends g{};class W{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],W.prototype,"instanceId",void 0),t.SourceControlIdentifier=W;class q{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],q.prototype,"version",void 0),t.SourceControlVersion=q,function(e){e[e.Workspace="workspace"]="Workspace",e[e.External="external"]="External",e[e.SpecificVerision="specificVerision"]="SpecificVerision",e[e.WorkspaceWithSpecificVersion="workspaceWithSpecificVersion"]="WorkspaceWithSpecificVersion"}(t.SourceControlResourceType||(t.SourceControlResourceType={})),function(e){e[e.None="none"]="None",e[e.Add="add"]="Add",e[e.Edit="edit"]="Edit",e[e.Delete="delete"]="Delete",e[e.Rename="rename"]="Rename",e[e.Conflict="conflict"]="Conflict",e[e.IndexEdit="indexEdit"]="IndexEdit",e[e.IndexDelete="indexDelete"]="IndexDelete",e[e.IndexCopy="indexCopy"]="IndexCopy",e[e.Untracked="untracked"]="Untracked",e[e.Ignored="ignored"]="Ignored",e[e.AddByUs="addByUs"]="AddByUs",e[e.AddByThem="addByThem"]="AddByThem",e[e.DeleteByUs="deleteByUs"]="DeleteByUs",e[e.DeleteByThem="deleteByThem"]="DeleteByThem",e[e.AddBoth="addBoth"]="AddBoth",e[e.DeleteBoth="deleteBoth"]="DeleteBoth"}(t.SourceControlChangeType||(t.SourceControlChangeType={}));class H{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],H.prototype,"path",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],H.prototype,"version",void 0),t.SourceControlResource=H;class K{}i([s.dataFormat(H),r("design:type",H)],K.prototype,"current",void 0),i([s.dataFormat(H),r("design:type",H)],K.prototype,"original",void 0),t.SourceControlResourceState=K;class U extends H{}i([s.dataFormat(s.DataFormat.Uri),r("design:type",String)],U.prototype,"instanceId",void 0),t.SourceControlResourceIdentifier=U;class ${}i([s.dataFormat(K),r("design:type",Array)],$.prototype,"resourceStates",void 0),t.SourceControlResourceGroup=$;class z extends W{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],z.prototype,"name",void 0),i([s.dataFormat($),r("design:type",Array)],z.prototype,"resourceGroups",void 0),t.SourceControlInstance=z;class V{}i([s.dataFormat(H),r("design:type",H)],V.prototype,"right",void 0),i([s.dataFormat(H),r("design:type",H)],V.prototype,"left",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],V.prototype,"title",void 0),t.SourceControlResourceDiff=V,function(e){e[e.Updated="updated"]="Updated",e[e.Added="added"]="Added",e[e.Removed="removed"]="Removed"}(t.SourceControlChange||(t.SourceControlChange={}));class G extends g{}i([s.dataFormat(W),r("design:type",W)],G.prototype,"sourceControl",void 0),t.SourceControlChangedEventArgs=G;class Q extends g{}i([s.dataFormat(W),r("design:type",W)],Q.prototype,"sourceControl",void 0),i([s.dataFormat(H),r("design:type",Array)],Q.prototype,"resources",void 0),t.SourceControlResourceChangedEventArgs=Q;t.SyncStatus=class{},function(e){e[e.PlainText="plainText"]="PlainText",e[e.TextWithAnsiEscapeCodes="textWithAnsiEscapeCodes"]="TextWithAnsiEscapeCodes"}(t.TaskOutputContentType||(t.TaskOutputContentType={}));class J{}i([s.dataFormat(o),r("design:type",o)],J.prototype,"streamMoniker",void 0),t.TaskOutputFeedInfo=J;class Y{}t.TaskOutputOptions=Y;class X{}i([s.dataFormat(J),r("design:type",J)],X.prototype,"feed",void 0),i([s.dataFormat(Y),r("design:type",Y)],X.prototype,"options",void 0),t.TaskOutputInfo=X;class Z extends g{}i([s.dataFormat(X),r("design:type",X)],Z.prototype,"taskOutput",void 0),t.TaskOutputEventArgs=Z;t.TelemetrySettings=class{};class ee extends g{}i([s.dataFormat(s.DataFormat.Omit),r("design:type",Object)],ee.prototype,"payload",void 0),t.GenericOperationEventArgs=ee,function(e){e[e.None="none"]="None",e[e.Success="success"]="Success",e[e.Failure="failure"]="Failure",e[e.UserFault="userFault"]="UserFault",e[e.UserCancel="userCancel"]="UserCancel"}(t.TelemetryResult||(t.TelemetryResult={}));class te extends g{}i([s.dataFormat(s.DataFormat.Omit),r("design:type",Object)],te.prototype,"payload",void 0),t.FaultTelemetryEventArgs=te;class ne{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],ne.prototype,"cwd",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],ne.prototype,"app",void 0),i([s.dataFormat(s.DataFormat.Hide),r("design:type",Array)],ne.prototype,"commandLine",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",Boolean)],ne.prototype,"verbatimCommandLine",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",Object)],ne.prototype,"environment",void 0),t.TerminalOptions=ne;class ie{}i([s.dataFormat(ne),r("design:type",ne)],ie.prototype,"options",void 0),t.TerminalInfo=ie;class re extends g{}i([s.dataFormat(ie),r("design:type",ie)],re.prototype,"terminal",void 0),t.TerminalEventArgs=re;class se{}t.RestrictedOperation=se;t.SharedTerminalRestrictedOperation=class extends se{};class oe{}t.MaybeImmutableOfWorkspaceAccessControl=oe;class ae extends oe{}i([s.dataFormat(u),r("design:type",u)],ae.prototype,"defaultAccessControl",void 0),t.WorkspaceAccessControl=ae;class ce extends g{}i([s.dataFormat(ae),r("design:type",ae)],ce.prototype,"accessControl",void 0),t.WorkspaceAccessControlEventArgs=ce;class le extends g{}i([s.dataFormat(se),r("design:type",se)],le.prototype,"operation",void 0),t.RestrictedOperationAccessRequestedEventArgs=le,function(e){e[e.Error="error"]="Error",e[e.Warning="warning"]="Warning",e[e.Message="message"]="Message"}(t.ErrorSeverity||(t.ErrorSeverity={}));class ue{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],ue.prototype,"fileId",void 0),i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],ue.prototype,"message",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",Object)],ue.prototype,"properties",void 0),t.DiagnosticEntry=ue;class he extends g{}i([s.dataFormat(ue),r("design:type",Array)],he.prototype,"entries",void 0),t.DiagnosticDataChangedEventArgs=he;t.InvitationLinkInfo=class{};class de{}i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],de.prototype,"conversationId",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],de.prototype,"name",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],de.prototype,"joinUri",void 0),i([s.dataFormat(s.DataFormat.Omit),r("design:type",String)],de.prototype,"ownerId",void 0),t.WorkspaceInfo=de,function(e){e[e.Unknown="unknown"]="Unknown",e[e.Available="available"]="Available",e[e.Unavailable="unavailable"]="Unavailable",e[e.Connected="connected"]="Connected",e[e.Disconnected="disconnected"]="Disconnected"}(t.WorkspaceConnectionStatus||(t.WorkspaceConnectionStatus={})),function(e){e[e.None="none"]="None",e[e.Requested="requested"]="Requested",e[e.UserRemoved="userRemoved"]="UserRemoved",e[e.UserBlocked="userBlocked"]="UserBlocked",e[e.SessionEnded="sessionEnded"]="SessionEnded",e[e.ConnectionLost="connectionLost"]="ConnectionLost",e[e.InternalError="internalError"]="InternalError",e[e.SessionExpired="sessionExpired"]="SessionExpired",e[e.NetworkDisconnected="networkDisconnected"]="NetworkDisconnected",e[e.ListenerWentOffline="listenerWentOffline"]="ListenerWentOffline",e[e.CollaborationServiceFactoryCriticalFailure="collaborationServiceFactoryCriticalFailure"]="CollaborationServiceFactoryCriticalFailure"}(t.WorkspaceDisconnectedReason||(t.WorkspaceDisconnectedReason={}));t.WorkspaceConnectionStatusChangedEventArgs=class extends g{};class pe extends g{}i([s.dataFormat(de),r("design:type",de)],pe.prototype,"workspace",void 0),t.WorkspaceReadyForConnectionEventArgs=pe,function(e){e[e.None="none"]="None",e[e.CreatedWorkspace="createdWorkspace"]="CreatedWorkspace",e[e.InitializedAgentServices="initializedAgentServices"]="InitializedAgentServices",e[e.InitializedRelayAndTCP="initializedRelayAndTCP"]="InitializedRelayAndTCP",e[e.AddedUserToWorkspace="addedUserToWorkspace"]="AddedUserToWorkspace",e[e.JoinedLocalWorkspace="joinedLocalWorkspace"]="JoinedLocalWorkspace",e[e.ReadWorkspaceInfo="readWorkspaceInfo"]="ReadWorkspaceInfo",e[e.OpeningRemoteSession="openingRemoteSession"]="OpeningRemoteSession",e[e.OpenedRemoteSession="openedRemoteSession"]="OpenedRemoteSession",e[e.JoiningRemoteSession="joiningRemoteSession"]="JoiningRemoteSession",e[e.JoinedRemoteSession="joinedRemoteSession"]="JoinedRemoteSession",e[e.WaitingForHost="waitingForHost"]="WaitingForHost",e[e.DoneWaitingForHost="doneWaitingForHost"]="DoneWaitingForHost",e[e.ReconnectingToHost="reconnectingToHost"]="ReconnectingToHost",e[e.ReconnectedToHost="reconnectedToHost"]="ReconnectedToHost",e[e.ReconnectionFailed="reconnectionFailed"]="ReconnectionFailed",e[e.UpdatedWorkspace="updatedWorkspace"]="UpdatedWorkspace"}(t.WorkspaceProgress||(t.WorkspaceProgress={}));t.WorkspaceProgressEventArgs=class extends g{};class fe extends de{}i([s.dataFormat(s.DataFormat.Path),r("design:type",Array)],fe.prototype,"rootDirectories",void 0),i([s.dataFormat(c),r("design:type",c)],fe.prototype,"persistentRootConfiguration",void 0),t.WorkspaceShareInfo=fe,function(e){e[e.Auto="auto"]="Auto",e[e.Direct="direct"]="Direct",e[e.Relay="relay"]="Relay",e[e.Local="local"]="Local",e[e.SignalR="signalR"]="SignalR"}(t.ConnectionMode||(t.ConnectionMode={}));class ge{}t.ClientCapabilities=ge;class me{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],me.prototype,"directAddress",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],me.prototype,"relayAddress",void 0),i([s.dataFormat(s.DataFormat.Token),r("design:type",String)],me.prototype,"relaySharedAccessSignature",void 0),i([s.dataFormat(s.DataFormat.Token),r("design:type",String)],me.prototype,"joiningUserSessionToken",void 0),i([s.dataFormat(ge),r("design:type",ge)],me.prototype,"clientCapabilities",void 0),i([s.dataFormat(s.DataFormat.Token),r("design:type",String)],me.prototype,"userIdentity",void 0),i([s.dataFormat(s.DataFormat.Token),r("design:type",String)],me.prototype,"initialViewName",void 0),t.WorkspaceJoinInfo=me;t.WorkspaceListOptions=class{constructor(){this.includeRemoteWorkspaces=!0,this.onlyManagedWorkspaces=!1}};t.WorkspaceSessionInfo=class extends de{};class ye{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],ye.prototype,"name",void 0),i([s.dataFormat(s.DataFormat.Email),r("design:type",String)],ye.prototype,"email",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],ye.prototype,"userName",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],ye.prototype,"provider",void 0),i([s.dataFormat(s.DataFormat.Uri),r("design:type",String)],ye.prototype,"avatarUri",void 0),i([s.dataFormat(ge),r("design:type",ge)],ye.prototype,"clientCapabilities",void 0),t.WorkspaceUserProfile=ye;t.WorkspaceServicesChangedEventArgs=class extends g{},function(e){e[e.None="none"]="None",e[e.Add="add"]="Add",e[e.Remove="remove"]="Remove",e[e.Replace="replace"]="Replace"}(t.CollectionChangeType||(t.CollectionChangeType={}));t.GuestAcceptance=class{},function(e){e[e.None="none"]="None",e[e.Joined="joined"]="Joined",e[e.Unjoined="unjoined"]="Unjoined",e[e.Canceled="canceled"]="Canceled",e[e.Requested="requested"]="Requested"}(t.WorkspaceSessionChangeType||(t.WorkspaceSessionChangeType={}));class ve extends g{}i([s.dataFormat(ye),r("design:type",ye)],ve.prototype,"userProfile",void 0),t.WorkspaceSessionChangedEventArgs=ve;class Se{}i([s.dataFormat(f),r("design:type",f)],Se.prototype,"experimentalFeatures",void 0),t.UserSettings=Se;t.VSOnlineSettings=class{};class we{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],we.prototype,"newText",void 0),t.TextChange=we;class Ce{constructor(){this.messageType=p.Unknown}}t.MessageBase=Ce,function(e){e[e.SelectionChange="selectionChange"]="SelectionChange",e[e.NotebookSelectionChange="notebookSelectionChange"]="NotebookSelectionChange",e[e.VisibleRangesChange="visibleRangesChange"]="VisibleRangesChange",e[e.TextChange="textChange"]="TextChange",e[e.FileOpenRequest="fileOpenRequest"]="FileOpenRequest",e[e.ResetFileClient="resetFileClient"]="ResetFileClient",e[e.UntitledFileSaved="untitledFileSaved"]="UntitledFileSaved",e[e.UntitledFileOpened="untitledFileOpened"]="UntitledFileOpened",e[e.UntitledFileClosed="untitledFileClosed"]="UntitledFileClosed",e[e.DiffViewOpen="diffViewOpen"]="DiffViewOpen",e[e.DiffViewClosed="diffViewClosed"]="DiffViewClosed",e[e.FileOpenAcknowledge="fileOpenAcknowledge"]="FileOpenAcknowledge",e[e.FileRelease="fileRelease"]="FileRelease",e[e.SaveFile="saveFile"]="SaveFile",e[e.SaveNotebook="saveNotebook"]="SaveNotebook",e[e.JoinRequest="joinRequest"]="JoinRequest",e[e.JoinAcknowledge="joinAcknowledge"]="JoinAcknowledge",e[e.ReadOnlyChange="readOnlyChange"]="ReadOnlyChange",e[e.Handshake="handshake"]="Handshake",e[e.Summon="summon"]="Summon",e[e.LayoutScroll="layoutScroll"]="LayoutScroll",e[e.NotebookScroll="notebookScroll"]="NotebookScroll",e[e.ProjectFileOpened="projectFileOpened"]="ProjectFileOpened",e[e.ProjectFileClosed="projectFileClosed"]="ProjectFileClosed",e[e.PresenterUpdate="presenterUpdate"]="PresenterUpdate",e[e.FollowChange="followChange"]="FollowChange",e[e.AnonymousAccessLevelChange="anonymousAccessLevelChange"]="AnonymousAccessLevelChange",e[e.Ping="ping"]="Ping",e[e.Unknown="unknown"]="Unknown"}(p=t.MessageType||(t.MessageType={}));class be extends Ce{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],be.prototype,"fileName",void 0),t.FileMessageBase=be;t.JoinRequestMessage=class extends Ce{};class Ee extends Ce{}i([s.dataFormat(s.DataFormat.Path),r("design:type",Array)],Ee.prototype,"files",void 0),t.JoinAcknowledgeMessage=Ee;t.PresenterUpdateMessage=class extends Ce{};t.FollowChangeMessage=class extends Ce{};t.SelectionChangeMessage=class extends be{};t.NotebookSelectionChangeMessage=class extends be{};class ke{}t.Range=ke;class Re extends be{}i([s.dataFormat(ke),r("design:type",Array)],Re.prototype,"visibleRanges",void 0),t.LayoutScrollMessage=Re;t.NotebookScrollMessage=class extends be{};class xe{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],xe.prototype,"fileName",void 0),i([s.dataFormat(ke),r("design:type",Array)],xe.prototype,"visibleRanges",void 0),t.EditorVisibleRanges=xe;class Pe extends Ce{}i([s.dataFormat(xe),r("design:type",Array)],Pe.prototype,"clientVisibleRanges",void 0),t.VisibleRangesChangeMessage=Pe;t.FileOpenRequestMessage=class extends be{};t.ResetFileClientMessage=class extends be{};t.UntitledFileSavedMessage=class extends be{};t.UntitledFileOpenedMessage=class extends be{};t.UntitledFileClosedMessage=class extends be{};class Te extends Ce{}t.DiffViewMessage=Te;t.DiffViewOpenMessage=class extends Te{};t.DiffViewClosedMessage=class extends Te{};t.HandshakeMessage=class extends be{};t.SaveFileMessage=class extends be{};t.SaveNotebookMessage=class extends be{};t.FileReleaseMessage=class extends be{};t.AnonymousAcccessLevelChangedMessage=class extends be{};class Me extends be{}i([s.dataFormat(we),r("design:type",Array)],Me.prototype,"changes",void 0),t.TextChangeMessage=Me;t.ReadOnlyChangeMessage=class extends be{};t.ProjectFileOpenedMessage=class extends be{};t.ProjectFileClosedMessage=class extends be{};class Ae{}i([s.dataFormat(Me),r("design:type",Me)],Ae.prototype,"message",void 0),t.ServerVersionSnapshot=Ae;class Oe extends be{}i([s.dataFormat(Ae),r("design:type",Array)],Oe.prototype,"history",void 0),t.FileOpenAcknowledgeMessage=Oe;t.SummonMessage=class extends Ce{};t.PingMessage=class extends Ce{},function(e){e[e.NotifyDidOpenClose="notifyDidOpenClose"]="NotifyDidOpenClose",e[e.NotifyDidChange="notifyDidChange"]="NotifyDidChange",e[e.NotifyDidSave="notifyDidSave"]="NotifyDidSave",e[e.NotifyAll="notifyAll"]="NotifyAll"}(t.DocumentChangesNotificationFlags||(t.DocumentChangesNotificationFlags={}));t.CoeditingInformation=class{};class Ne{}t.DocumentFilter=Ne;class Ie{}i([s.dataFormat(Ne),r("design:type",Array)],Ie.prototype,"documentFilters",void 0),t.LanguageServerProviderMetadata=Ie;t.NotificationEventArgs=class extends g{};t.LspMessage=class{};class Fe{}t.DebugSession=Fe,function(e){e[e.None="none"]="None",e[e.Add="add"]="Add",e[e.Remove="remove"]="Remove"}(t.DebugSessionChangeType||(t.DebugSessionChangeType={}));class _e extends g{}i([s.dataFormat(Fe),r("design:type",Fe)],_e.prototype,"debugSession",void 0),t.DebugSessionChangedEventArgs=_e;t.LaunchConfigurationChangedEventArgs=class extends g{},function(e){e[e.Go="go"]="Go",e[e.StepIn="stepIn"]="StepIn",e[e.StepOut="stepOut"]="StepOut",e[e.StepOver="stepOver"]="StepOver"}(t.ContinueReason||(t.ContinueReason={}));class De extends g{}i([s.dataFormat(u),r("design:type",u)],De.prototype,"accessControl",void 0),t.AccessControlEventArgs=De,function(e){e[e.Allowed="allowed"]="Allowed",e[e.RejectedInReadOnlySession="rejectedInReadOnlySession"]="RejectedInReadOnlySession",e[e.RejectedForNotOwner="rejectedForNotOwner"]="RejectedForNotOwner",e[e.DisabledByHostConfiguration="disabledByHostConfiguration"]="DisabledByHostConfiguration",e[e.ExplicitlyRejectedByHost="explicitlyRejectedByHost"]="ExplicitlyRejectedByHost",e[e.RejectedPersistentRootNotSupported="rejectedPersistentRootNotSupported"]="RejectedPersistentRootNotSupported"}(t.RestrictedOperationAccess||(t.RestrictedOperationAccess={}));class je extends g{}i([s.dataFormat(se),r("design:type",se)],je.prototype,"operation",void 0),t.RestrictedOperationAccessEventArgs=je;t.FileListOptions=class{},function(e){e[e.None="none"]="None",e[e.Children="children"]="Children",e[e.SingleChildDescendants="singleChildDescendants"]="SingleChildDescendants",e[e.AllDescendants="allDescendants"]="AllDescendants"}(t.FileRecurseMode||(t.FileRecurseMode={})),function(e){e[e.None="none"]="None",e[e.Hidden="hidden"]="Hidden",e[e.ReadOnly="readOnly"]="ReadOnly",e[e.Excluded="excluded"]="Excluded",e[e.External="external"]="External"}(t.FileAttributes||(t.FileAttributes={}));class Be{constructor(){this.exists=!0}}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],Be.prototype,"path",void 0),i([s.dataFormat(Be),r("design:type",Array)],Be.prototype,"children",void 0),t.FileInfo=Be;t.FileRootInfo=class extends Be{};class Le extends Be{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],Le.prototype,"text",void 0),t.FileTextInfo=Le;t.FileReadOptions=class{};t.FileWriteOptions=class{};t.FileMoveOptions=class{};t.FileDeleteOptions=class{};t.FileWatchOptions=class{};class We{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],We.prototype,"path",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],We.prototype,"fullPath",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],We.prototype,"localFullPath",void 0),t.FileChange=We,function(e){e[e.None="none"]="None",e[e.Updated="updated"]="Updated",e[e.Added="added"]="Added",e[e.Deleted="deleted"]="Deleted"}(t.FileChangeType||(t.FileChangeType={}));class qe extends g{}i([s.dataFormat(We),r("design:type",Array)],qe.prototype,"changes",void 0),t.FilesChangedEventArgs=qe;class He extends g{}i([s.dataFormat(s.DataFormat.Path),r("design:type",Array)],He.prototype,"localPaths",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",Array)],He.prototype,"vslsPaths",void 0),t.ExternalFilesChangedEventArgs=He;class Ke extends g{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],Ke.prototype,"root",void 0),i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],Ke.prototype,"fullPath",void 0),t.RootsChangedEventArgs=Ke;class Ue{}i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],Ue.prototype,"description",void 0),t.DiffBaseInfo=Ue;t.ExternalFileMapResult=class{};class $e{}t.TextSearchResultRange=$e;class ze{}i([s.dataFormat(s.DataFormat.Path),r("design:type",String)],ze.prototype,"path",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],ze.prototype,"text",void 0),i([s.dataFormat($e),r("design:type",Array)],ze.prototype,"ranges",void 0),i([s.dataFormat($e),r("design:type",Array)],ze.prototype,"previewRanges",void 0),t.TextSearchResult=ze;class Ve{}i([s.dataFormat(Le),r("design:type",Array)],Ve.prototype,"results",void 0),t.ReadTextResult=Ve;class Ge{}i([s.dataFormat(s.DataFormat.Text),r("design:type",Array)],Ge.prototype,"fileIncludes",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",Array)],Ge.prototype,"fileExcludes",void 0),i([s.dataFormat(s.DataFormat.Text),r("design:type",String)],Ge.prototype,"pattern",void 0),t.TextSearchOptions=Ge;t.NodeType=class{};t.SolutionWorkspaceNode=class{};t.SolutionChangedEventArgs=class extends g{};t.WorkspaceRootChangedEventArgs=class extends g{},function(e){e[e.Empty="empty"]="Empty",e[e.Folder="folder"]="Folder",e[e.Solution="solution"]="Solution"}(t.WorkspaceMode||(t.WorkspaceMode={}));t.SolutionChangeType=class{};class Qe extends g{}i([s.dataFormat(s.DataFormat.Hide),r("design:type",String)],Qe.prototype,"jsonContent",void 0),t.SourceEventArgs=Qe,function(e){e[e.None="none"]="None",e[e.CanRead="canRead"]="CanRead",e[e.CanWrite="canWrite"]="CanWrite",e[e.CanSeek="canSeek"]="CanSeek"}(t.StreamTraits||(t.StreamTraits={})),function(e){e[e.Global="global"]="Global",e[e.Workspace="workspace"]="Workspace",e[e.WorkspaceFolder="workspaceFolder"]="WorkspaceFolder"}(t.TaskScope||(t.TaskScope={}));class Je{}t.WorkspaceTask=Je;class Ye{}t.TaskExecutionMoniker=Ye,function(e){e[e.Started="started"]="Started",e[e.Terminated="terminated"]="Terminated"}(t.TaskExecutionStatusChange||(t.TaskExecutionStatusChange={}));class Xe extends g{}i([s.dataFormat(Ye),r("design:type",Ye)],Xe.prototype,"taskExecution",void 0),i([s.dataFormat(Je),r("design:type",Je)],Xe.prototype,"task",void 0),t.TaskExecutionStatusEventArgs=Xe,function(e){e[e.Started="started"]="Started",e[e.AlreadyRunning="alreadyRunning"]="AlreadyRunning",e[e.RetryLater="retryLater"]="RetryLater",e[e.TaskNotFound="taskNotFound"]="TaskNotFound",e[e.RejectedByHost="rejectedByHost"]="RejectedByHost"}(t.RunTaskStatus||(t.RunTaskStatus={}));class Ze{}i([s.dataFormat(Ye),r("design:type",Ye)],Ze.prototype,"taskExecution",void 0),t.RunTaskResult=Ze;t.WorkspaceTaskRestrictedOperation=class extends se{},function(e){e[e.CouldNotConnectToServer=-32e3]="CouldNotConnectToServer",e[e.OlderThanServer=-32001]="OlderThanServer",e[e.NewerThanServer=-32002]="NewerThanServer",e[e.OlderThanPeer=-32003]="OlderThanPeer",e[e.NewerThanPeer=-32004]="NewerThanPeer",e[e.OlderThanAgent=-32005]="OlderThanAgent",e[e.NewerThanAgent=-32006]="NewerThanAgent",e[e.NoIPAddressesDetected=-32010]="NoIPAddressesDetected",e[e.NoConnectionAddresses=-32011]="NoConnectionAddresses",e[e.AutoConnectionFailed=-32012]="AutoConnectionFailed",e[e.RelayConnectionFailed=-32013]="RelayConnectionFailed",e[e.DirectConnectionFailed=-32014]="DirectConnectionFailed",e[e.SessionProtocolError=-32015]="SessionProtocolError",e[e.SessionAuthenticationFailed=-32016]="SessionAuthenticationFailed",e[e.ReconnectFailed=-32017]="ReconnectFailed",e[e.DirectConnectionNotEnabled=-32020]="DirectConnectionNotEnabled",e[e.RelayConnectionNotEnabled=-32021]="RelayConnectionNotEnabled",e[e.CollaborationSessionUsersLimitReached=-32022]="CollaborationSessionUsersLimitReached",e[e.CollaborationSessionGuestRejected=-32023]="CollaborationSessionGuestRejected",e[e.CollaborationSessionRequestTimedOut=-32024]="CollaborationSessionRequestTimedOut",e[e.CollaborationSessionGuestCanceled=-32025]="CollaborationSessionGuestCanceled",e[e.CollaborationSessionNotFound=-32026]="CollaborationSessionNotFound",e[e.CollaborationSessionEnded=-32027]="CollaborationSessionEnded",e[e.CollaborationSessionGuestBlocked=-32028]="CollaborationSessionGuestBlocked",e[e.NonSuccessHttpStatusCodeReceived=-32030]="NonSuccessHttpStatusCodeReceived",e[e.KeychainAccessFailed=-32031]="KeychainAccessFailed",e[e.UnauthorizedHttpStatusCode=-32032]="UnauthorizedHttpStatusCode",e[e.ForbiddenHttpStatusCode=-32033]="ForbiddenHttpStatusCode",e[e.RelayConnectionHostFailure=-32040]="RelayConnectionHostFailure",e[e.RelayConnectionGuestFailure=-32041]="RelayConnectionGuestFailure",e[e.RelayHubNotFoundFailure=-32045]="RelayHubNotFoundFailure",e[e.RelayHubNoHostFailure=-32046]="RelayHubNoHostFailure",e[e.RelayHubNotConnectedFailure=-32047]="RelayHubNotConnectedFailure",e[e.BrokerNotAuthorized=-32050]="BrokerNotAuthorized",e[e.CouldNotConnectToServerAuthFailed=-32060]="CouldNotConnectToServerAuthFailed",e[e.RemoteLaunchNotEnabled=-32200]="RemoteLaunchNotEnabled",e[e.CollaborationSessionGuestRejectedWithSpecificReason=-32300]="CollaborationSessionGuestRejectedWithSpecificReason",e[e.OperationRejected=-32400]="OperationRejected",e[e.OperationRejectedInReadOnlySession=-32401]="OperationRejectedInReadOnlySession",e[e.OperationRejectedForNotOwner=-32402]="OperationRejectedForNotOwner",e[e.OperationRejectedAsPersistentRootNotSupported=-32403]="OperationRejectedAsPersistentRootNotSupported",e[e.FileOperationNotSupported=-32500]="FileOperationNotSupported",e[e.ErrorFileAdditionFailed=-32501]="ErrorFileAdditionFailed",e[e.ErrorFileDeleteFailed=-32502]="ErrorFileDeleteFailed",e[e.ErrorFileRenameFailed=-32503]="ErrorFileRenameFailed",e[e.FileAlreadyExists=-32504]="FileAlreadyExists",e[e.ErrorFolderAdditionFailed=-32505]="ErrorFolderAdditionFailed",e[e.ErrorFolderRenameFailed=-32506]="ErrorFolderRenameFailed"}(t.ErrorCodes||(t.ErrorCodes={})),function(e){e[e.None=0]="None",e[e.AgentLogCreated=1002]="AgentLogCreated",e[e.AgentOutput=2001]="AgentOutput",e[e.CallingOutput=10001]="CallingOutput",e[e.RpcListeningOnPipe=1001]="RpcListeningOnPipe"}(t.TraceEventIds||(t.TraceEventIds={})),function(e){e.Agent="Agent",e.AgentAuth="Agent.Auth",e.AgentCSharpLS="Agent.CSharpLS",e.AgentFile="Agent.File",e.AgentFirewall="Agent.Firewall",e.AgentHttp="Agent.Http",e.AgentProxy="Agent.Proxy",e.AgentPortForwarding="Agent.PortFowrading",e.AgentTcpListenersObserver="Agent.TcpListeners",e.AgentRpc="Agent.Rpc",e.AgentRpcAuth="Agent.Rpc.Auth",e.AgentRpcChat="Agent.Rpc.Chat",e.AgentRpcFile="Agent.Rpc.File",e.AgentRpcFirewall="Agent.Rpc.Firewall",e.AgentRpcServerSharing="Agent.Rpc.ServerSharing",e.AgentRpcSourceEvent="Agent.Rpc.SourceEvent",e.AgentRpcStream="Agent.Rpc.Stream",e.AgentRpcStreamManager="Agent.Rpc.StreamManager",e.AgentRpcStreamTransport="Agent.Rpc.StreamTransport",e.AgentRpcTerminal="Agent.Rpc.Terminal",e.AgentTerminalConnection="Agent.Terminal.Connection",e.AgentRpcWorkspace="Agent.Rpc.Workspace",e.AgentRpcWorkspaceUser="Agent.Rpc.WorkspaceUser",e.AgentRpcTaskOutput="Agent.Rpc.TaskOutput",e.AgentSsh="Agent.Ssh",e.AgentTSLS="Agent.TSLS",e.AgentWorkspace="Agent.Workspace",e.AgentWorkspaceSessionAccessControl="Agent.WorkspaceSession.AccessControl",e.ClientAgent="Client.Agent",e.ClientCoEditing="Client.CoEditing",e.ClientCoEditingBufferManager="Client.CoEditing.BufferManager",e.ClientCoEditingVSCodeEvent="Client.CoEditing.VSCodeEvent",e.ClientFileProvider="Client.FileProvider",e.ClientLauncher="Client.Launcher",e.ClientRpc="Client.Rpc",e.ClientRpcAgentSession="Client.Rpc.AgentSession",e.ClientRpcAuth="Client.Rpc.Auth",e.ClientRpcFile="Client.Rpc.File",e.ClientRpcPortForwarding="Client.Rpc.PortForwarding",e.ClientRpcServerSharing="Client.Rpc.ServerSharing",e.ClientRpcSourceEvent="Client.Rpc.SourceEvent",e.ClientRpcStream="Client.Rpc.Stream",e.ClientRpcStreamManager="Client.Rpc.StreamManager",e.ClientRpcTerminal="Client.Rpc.Terminal",e.ClientRpcChat="Client.Rpc.Chat",e.ClientRpcTerminalEndpoint="Client.Rpc.TerminalEndpoint",e.ClientRpcWorkspace="Client.Rpc.Workspace",e.ClientRpcWorkspaceUser="Client.Rpc.WorkspaceUser",e.ClientRpcSessionContext="Client.Rpc.SessionContext",e.ClientRpcContact="Client.Rpc.Contact",e.ClientWorkspace="Client.Workspace",e.ClientRemoteBuild="Client.RemoteBuild",e.ClientCSharpLS="Client.CSharpLS",e.ClientSharedTerminal="Client.SharedTerminal",e.ClientWorkspaceAccessControl="Client.Workspace.AccessControl",e.ClientAccessControl="Client.AccessControl",e.ClientSearch="Client.Search",e.ClientSourceControl="Client.SourceControl",e.ClientSyncService="Client.SyncService",e.ClientCommentService="Client.CommentService",e.ClientGettingStartedPageContentProvider="Client.GettingStartedPageContentProvider",e.ClientPortForwardingBrowser="Client.PortForwardingBrowser",e.ClientOnlineEnvironmentSessionService="Client.OnlineEnvironmentSessionService",e.Calling="Calling",e.DebugHostAdapter="Debug.HostAdapter",e.DebugRpcHostAdapter="Debug.Rpc.HostAdapter",e.DebugAdapterHost="Debug.AdapterHost",e.ForwardingTcpServer="ForwardingTcpServer",e.ForwardingPipeServer="ForwardingPipeServer",e.Telemetry="Telemetry",e.ClientAccessCheck="ClientAccessCheck",e.LSPCoauthoringManager="LSP.CoauthoringManager",e.RemoteServiceBroker="RemoteServiceBroker",e.ReviewsDiffs="Reviews.Diffs",e.Cli="CLI",e.CliRestore="CLI.restore",e.CliStart="CLI.start",e.CliStop="CLI.stop",e.TTY="TTY",e.Settings="Settings",e.API="API",e.VmAgent="VmAgent",e.SelfHostedAgent="SelfHostedAgent",e.EnvironmentConfig="EnvConfig",e.VMConfig="VMCFG",e.LinuxContainerUpdate="LinuxContainerUpdate",e.ShutDownEnvironmentHandler="ShutdownEnvironment",e.StartEnvironmentHandler="StartEnvironment",e.VmAgentRpcService="VmAgentRpcService",e.RebuildEnvironmentHandler="RebuildEnvironment",e.WarmupEnvironmentHandler="WarmupEnvironment",e.ResizeStorageHandler="ResizeStorage",e.StartLiveShareHandler="StartLiveShare",e.StartPortForwardingHandler="StartPortForwardingHandler",e.ContainerEnvironmentMonitor="ContainerMonitor",e.SSHServerMonitor="SSHServerMonitor",e.ContainerTunnel="ContainerTunnel",e.RunningContainerInfoProvider="RunningContainerInfo",e.DevContainerChangesWatcher="DevContainerChangesWatcher",e.VSCodeServerHostService="VSCodeServerHostService",e.SshServerHostService="SSHServerHostService",e.CodespaceHostService="CodespaceHostService",e.ClientAutoSuspendMonitor="ClientAutoSuspendMonitor",e.DockerImagePrune="DockerImagePrune",e.PrebuildPoolUpdateHandler="PrebuildPoolUpdate",e.StandAloneAgent="StandAloneAgent",e.StopCodespacePolicyMonitor="StopCodespacePolicy",e.GrpcService="GrpcService",e.Viewlet="Viewlet",e.VSIX="VSIX",e.ClientPrefix="Client.",e.ClientLSP="Client.LSP",e.LSPHost="LSP.Host",e.BreakpointManager="BreakpointManager",e.DebugAdapter="Debug.Adapter",e.DebugRemote="Debug.Remote",e.DebugSessionHost="Debug.SessionHost",e.DebugHost="Debug.Host",e.DebugRpcHost="Debug.Rpc.Host",e.DebugTargetHostProcess="Debug.TargetHostProcess",e.DebugRpcSessionHost="Debug.Rpc.SessionHost"}(t.TraceSources||(t.TraceSources={})),t.AgentSessionService={name:"agentSessionService",methods:["initializeSession","enableReconnect","keepAlive","forceKill"],events:[]},t.AuthenticationCoreService={methods:["getCurrentAuthenticatedUser","getCurrentUser","removeRecentCollaborator","removeAllRecentCollaborators"],events:["authenticationChanged"]},t.AuthenticationService={name:"auth",methods:["getLoginUri","findLoginCode","login","loginAsAnonymous","loginWithCachedToken","loginWithExternalToken","logout","getCachedToken","getCurrentAuthenticatedUser","getCurrentUser","removeRecentCollaborator","removeAllRecentCollaborators"],events:["authenticationChanged"]},t.BrokerAuthorizationService={name:"brokerAuthorization",methods:["authorize"],events:[]},t.BrokerManagerService={name:"brokerManager",methods:["register","tryRevoke"],events:[]},t.ChatService={name:"chat",methods:["getMessageHistory","getParticipants","sendMessage","dispose"],events:["messageReceived"]},t.CommentService={name:"commentService",methods:["createCommentThread","createComment","updateComment","deleteComment","getAllCommentThreads","getCommentThreadPositions","updateLike"],events:["commentThreadChanged"]},t.ConfigurationService={name:"version",methods:["exchangeVersions","exchangeSettings","getSubnetMasks"],events:[]},t.FirewallService={name:"firewall",methods:["getFirewallStatus"],events:[]},t.HubConnectionService={name:"hubConnection",methods:["getIsConnected","getIsAttempting","getEnabled","setEnabled","registerHubMethodNotify","unregisterHubMethodNotify","invokeHubMethod","sendHubMethod"],events:["hubConnectionStateChanged","hubConnectionAttempted","hubMethodNotified"]},t.OnlineEnvironmentSessionService={name:"onlineEnvironmentLiveShareSessionService",methods:["getSessionState","updateSessionState"],events:[]},t.PortForwardingService={name:"portForwarding",methods:["getSharedServers","getSharedPipes","getLastAccessTime","setDestinationPort"],events:["sharingStarted","pipeSharingStarted","browseSharingStarted","sharingStopped","pipeSharingStopped","sharingChanged"]},t.ServerSharingService={name:"serverSharing",methods:["startSharing","startSharingPipe","stopSharing","stopSharingPipe","stopSharingBrowseSessions","getSharedServers","getSharedPipes","updateSessionName","updateSharedServerVisibility","updateSharedServerProtocol","updateSharedServerPrivacy"],voidMethods:["invokeSharingSucceeded","invokeSharingFailed"],events:["sharingStarted","pipeSharingStarted","browseSharingStarted","sharingStopped","pipeSharingStopped","sharingChanged","sharingSucceeded","sharingFailed"]},t.SessionContextService={name:"sessionContext",methods:["getServiceNames"],voidMethods:["sendSessionStateUpdateToClient","sendSessionStatusUpdateToClient"],events:["sessionStateUpdate","sessionStatusUpdate"]},t.SourceControlService={name:"sourceControl",methods:["getAllSourceControls","getSourceControls","getSourceControl","getRecentVersions","getRecentVersionsTillMergeVersion","getDiffsForVersion","getDiffForResource","getResource","cleanResources","getMergeVersion","getRemoteVersionsNames","getCurrentVersionName"],events:["sourceControlChanged","resourceChanged"]},t.SyncService={name:"syncService",methods:["checkSync","checkSyncForVersion","checkSyncForVersion2"],events:[]},t.TaskOutputService={name:"taskOutput",methods:["getTaskOutputs","shareTaskOutput","updateTaskOutputFeed","closeTaskOutput"],events:["taskOutputShared","taskOutputFeedUpdated","taskOutputClosed"]},t.TelemetryService={name:"telemetry",methods:["initialize","getServiceUri"],events:["genericOperation","fault"]},t.TerminalEndpoint={name:"terminalEndpoint",methods:["readBytes","writeBytes","readString","writeString"],events:[]},t.TerminalService={name:"terminal",methods:["startTerminal","getRunningTerminals","resizeTerminal","stopTerminal","clearTerminalBuffer","setTerminalReadOnlyForGuests"],events:["terminalStarted","terminalResized","terminalStopped","terminalReadOnlyChanged"]},t.TextSearchService={name:"textSearch",methods:["getTextSearchResults","getTextSearchResultsWithProgress"],events:[]},t.WorkspaceAccessControlService={name:"workspaceAccessControl",methods:["getAccessControl","setAccessControl","requestOperationAccess","setOperationAccess","rejectOperation"],events:["accessControlChanged","operationRejected","operationAccessChanged","opeationAccessRequested"]},t.WorkspaceDiagnosticsService={name:"workspaceDiagnostics",methods:["getDiagnostics"],events:["diagnosticDataChanged"]},t.WorkspaceService={name:"workspace",methods:["getWorkspace","listWorkspaces","createPersistentWorkspace","deleteWorkspace","renameWorkspace","shareWorkspace","createInvitationLink","getInvitationLinks","unshareWorkspace","beginJoinWorkspace","joinWorkspace","unjoinWorkspace","registerServices","canUserShareWorkspace","canUserHostWorkspace","createPublicInviteLink","disconnectGuest","unjoinOnlineEnvironmentsGuests","setWorkspaceReadyForConnection","updateWorkspaceOwner"],events:["servicesChanged","connectionStatusChanged","progressUpdated","userRemoved","userBlocked","workspaceReadyForConnection"]},t.WorkspaceUserService={name:"workspaceuser",methods:["acceptOrRejectGuest","autoAcceptGuests","removeUser","removeAllInteractiveUsers","fireProgressUpdatedToGuest","getCountOfGuestsWithSameAccount","createGuestDisplayName","getCachedGuestDisplayName","getGuestUserProfile","getCountOfInteractiveGuests"],events:["workspaceSessionChanged"]},t.LanguageServerProvider={methods:["getMetadata","request"],voidMethods:["notify"],events:["notified"]},t.DebuggerHostService={name:"DebuggerHostService",methods:["getCurrentDebugSessions","launchDebugSession","getLaunchConfigurations"],events:["debugSessionChanged","launchConfigurationsChanged"]},t.AccessControlService={name:"accessControl",methods:["getAccessControl"],events:["accessControlChanged"]},t.FileService={name:"file",methods:["registerExternalFiles","registerNamedExternalFiles","listRoots","list","readText","readTextWithProgress","writeText","createDirectory","delete","copy","move","getFiles","isExcluded","findFiles","getTextSearchResults","getTextSearchResultsWithProgress","clearRoots","addRoot","removeRoot","replaceRoot"],events:["filesChanged","rootsChanged","externalFilesChanged"]},t.SolutionViewService={name:"solutionView",methods:["getSolutionMode","getSolutionCaption","getChildrenNodes","getRootNodes","addNewItem","renameItem","deleteItem"],events:["solutionChanged","workspaceRootChanged"]},t.SourceEventService={name:"sourceEvent",methods:["fireEvent","setSourceData","getSourceData"],events:["event"]},t.StreamManagerService={name:"streamManager",methods:["getStream"],events:[]},t.StreamService={name:"stream",methods:["getStreamTraits","getLength","setLength","seek","readBytes","writeBytes","disposeStream"],events:[]},t.WorkspaceTaskService={name:"workspaceTask",methods:["getSupportedTasks","getTaskExecutions","runTask","runProjectTask","runDefaultBuildTask","terminateTask"],events:["taskStarted","taskTerminated"]}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcClient=void 0;const r=n(334),s=n(227),o=n(228),a=n(0);class c extends s.RpcClientProxyBase{constructor(e,t){super(t),this.rpcClient=e}ensureConnectionAsync(){return this.rpcClient.ensureConnectionAsync()}}class l extends o.RpcServiceHandler{constructor(e,t){super(t),this.connectionFactory=e,this.connection=null,this.connectionFactoryMutex=new a.Mutex,this.rpcClientProxy=new c(this,t),e.dispose&&this.addToDisposables(e)}static fromRpcMessageStream(e,t,n){return new l({create:n=>i(this,void 0,void 0,(function*(){const i=yield e(),r=n.createRpcConnection(i,t);return r.listen(),r})),dispose:()=>{n&&n()}},t)}sendRequest(e,t,n,i,...r){return this.rpcClientProxy.sendRequest(e,t,n,i,...r)}sendNotification(e,t,n){return this.rpcClientProxy.sendNotification(e,t,n)}onConnect(e){return i(this,void 0,void 0,(function*(){yield this.ensureConnectionAsync(),e()}))}onClose(e){return i(this,void 0,void 0,(function*(){yield this.ensureConnectionAsync(),this.connection.onClose(e)}))}ensureConnectionInternal(){return i(this,void 0,void 0,(function*(){this.connection||(yield this.connectionFactoryMutex.dispatch(()=>i(this,void 0,void 0,(function*(){this.connection||this.setConnection(yield this.connectionFactory.create(this))}))))}))}ensureConnectionAsync(){return i(this,void 0,void 0,(function*(){return yield this.ensureConnectionInternal(),this.connection}))}setConnection(e){this.connection=e,e&&(this.attachConnection(e),this.addToDisposables(e))}attachConnection(e){e.onClose(()=>{this.trace.info(`RPC connection closed. disposed: "${this.isDisposed}"`),this.isDisposed||this.dispose(new r.RpcConnectionClosedError)}),e.onRequest((t,...n)=>this.onRequest(null,e,t,...n)),e.onNotification((t,...n)=>{this.onNotification(e,t,...n)})}}t.RpcClient=l},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcServer=void 0;const r=n(17),s=n(228),o=n(336),a=n(136);class c extends s.RpcServiceHandler{constructor(e,t){super(e),this.rpcSessionNumber=0,this.rpcConnections=[];this.notifyEventProvider=t||((t,n)=>{a.notifyConnections(this.rpcConnections,t,n,e)})}registerRemoteRpcService(e,t){this.trace.info("adding remote rpc service:"+e);const n=e+".";t.onNotification((e,...t)=>{e.startsWith(n)&&this.notifyEventProvider(e,t)});const r=this.onHandleNoneRequest((e,r,...s)=>i(this,void 0,void 0,(function*(){if(r.startsWith(n))return yield o.sendRpcRequest(t,r,s,this.trace)})));return t.onClose(()=>r.dispose()),t.onDispose(()=>r.dispose()),r}sendNotification(e,t,n){return this.notifyEventProvider(t,n),Promise.resolve()}acceptRpcMessageStream(e){const t=this.createRpcConnection(e,this.trace);return[t,this.attachConnection(t)]}attachConnection(e){this.rpcConnections.push(e);const t=++this.rpcSessionNumber;this.trace.verbose(`Rpc #${t} created`),e.onRequest((n,...s)=>this.onRequest((s,...o)=>i(this,void 0,void 0,(function*(){const i={connection:e,session:t};o.push(i);const a=yield Promise.resolve(s(...o)),c=r.LoggerSettings.disableObfuscation?" => "+JSON.stringify(a):"";return this.trace.verbose(`> #${t} ${n}()${c}`),a})),e,n,...s)),e.onNotification((t,...n)=>{this.onNotification(e,t,...n)});const n=n=>{const i=this.rpcConnections.indexOf(e);-1!==i&&(this.trace.verbose(`Rpc #${t} removed event:${n}`),this.rpcConnections.splice(i,1))};return e.onClose(e=>{n("closed")}),e.onDispose(e=>{n("disposed")}),t}}t.RpcServer=c},function(e,t,n){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcMessageWriter=void 0;const o=s(n(4));t.RpcMessageWriter=class{constructor(){this.onErrorEmitter=new o.Emitter,this.onCloseEmitter=new o.Emitter,this.onError=this.onErrorEmitter.event,this.onClose=this.onCloseEmitter.event}write(t){const n=JSON.stringify(t),i=e.from(n),r=e.from("Content-Length: "+i.length+"\r\n\r\n"),s=e.alloc(r.length+i.length);r.copy(s,0),i.copy(s,r.length),this.onSendCallback&&this.onSendCallback(s).catch(e=>{this.onErrorEmitter.fire([e,void 0,void 0])})}dispose(){}}}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataFormat=t.DataFormat=void 0,function(e){e[e.Default="default"]="Default",e[e.Email="email"]="Email",e[e.Token="token"]="Token",e[e.Path="path"]="Path",e[e.Text="text"]="Text",e[e.Uri="uri"]="Uri",e[e.Omit="omit"]="Omit",e[e.OmitDefault="omitDefault"]="OmitDefault",e[e.Hide="hide"]="Hide",e[e.SingleMember="singleMember"]="SingleMember"}(t.DataFormat||(t.DataFormat={})),t.dataFormat=function(...e){return(t,n)=>{t.constructor.dataFormat||(t.constructor.dataFormat={}),t.constructor.dataFormat[n]=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcProxyCache=void 0;const i=n(332);t.RpcProxyCache=class{constructor(e,t){this.clientProxy=e,this.logger=t,this.proxyMap=new Map}getOrCreate(e,t){let n=this.proxyMap.get(e.name);return n||(this.logger.info(`Creating proxy for ${e.name} service`),n=i.RpcProxy.create(e,this.clientProxy,t?this.logger.withName(t):this.logger),this.proxyMap.set(e.name,n)),n}}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const o=s(n(4));t.Channel=class{constructor(e,t,n,i){this.send=e,this.onDataReceivedEmitter=new o.Emitter,this.onClosedEmitter=new o.Emitter,this.onDataReceived=this.onDataReceivedEmitter.event,this.onClosed=this.onClosedEmitter.event;this.close=null!=t?t:(e,t)=>Promise.resolve();this.adjustWindow=null!=n?n:e=>{};this.dispose=null!=i?i:()=>{}}fireDataReceived(e){this.onDataReceivedEmitter.fire(e)}fireClosed(e){this.onClosedEmitter.fire(e)}}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createDuplexRpcMessageStreams=void 0;const o=s(n(4)),a=n(64);t.createDuplexRpcMessageStreams=function(){const e=new c,t=new l(e),n=new c,i=new l(n),r=new o.StreamMessageReader(e),s=new o.StreamMessageWriter(t),a=new o.StreamMessageReader(n);return[{reader:r,writer:new o.StreamMessageWriter(i)},{reader:a,writer:s}]};class c extends a.EventEmitter{}class l extends a.EventEmitter{constructor(e){super(),this.readableStream=e}write(e,t,n){return this.readableStream.emit("data",e),!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertRpcRequestContext=t.rpcContextNoSessionMessage=t.rpcContextExpectedMessage=void 0;const i=n(0);t.rpcContextExpectedMessage="Rpc Request context expected",t.rpcContextNoSessionMessage="No session being defined",t.assertRpcRequestContext=function(e){i.assertDefined(e,t.rpcContextExpectedMessage),i.assertDefined(e.session,t.rpcContextNoSessionMessage)}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(31);class o{}t.EventArgs=o;t.NotifyContactServiceEventArgs=class extends o{},function(e){e[e.Unknown="unknown"]="Unknown",e[e.Available="available"]="Available",e[e.Busy="busy"]="Busy",e[e.DoNotDisturb="doNotDisturb"]="DoNotDisturb",e[e.Away="away"]="Away",e[e.Invisible="invisible"]="Invisible",e[e.Offline="offline"]="Offline"}(t.PresenceStatus||(t.PresenceStatus={})),function(e){e[e.DisplayName="displayName"]="DisplayName",e[e.Email="email"]="Email",e[e.AvatarUri="avatarUri"]="AvatarUri",e[e.Status="status"]="Status"}(t.ContactProperty||(t.ContactProperty={}));class a{}t.Contact=a;t.EmptyRequest=class{};t.EmptyResponse=class{};class c{}t.PublishPresenceRequest=c;class l{}i([s.dataFormat(c),r("design:type",c)],l.prototype,"publishPresence",void 0),t.InitializeRequest=l;t.WorkspaceFolder=class{};t.WorkspaceUri=class{};class u{}t.Capabilities=u;class h{}i([s.dataFormat(u),r("design:type",u)],h.prototype,"capabilities",void 0),i([s.dataFormat(a),r("design:type",a)],h.prototype,"selfContact",void 0),t.InitializeResponse=h,function(e){e[e.None="none"]="None",e[e.SignedOut="signedOut"]="SignedOut",e[e.SigningIn="signingIn"]="SigningIn",e[e.SignedIn="signedIn"]="SignedIn"}(t.SignedStatus||(t.SignedStatus={}));class d{}t.ContactPresenceUpdate=d;class p{}i([s.dataFormat(d),r("design:type",Array)],p.prototype,"changes",void 0),t.PresenceChangedNotification=p;t.ContactPropertyValueChanged=class{};t.ContactChangedNotification=class{};t.ContactPropertiesChangedNotification=class{};t.InviteRequest=class{};class f{}i([s.dataFormat(a),r("design:type",a)],f.prototype,"fromContact",void 0),t.InviteReceivedNotification=f;class g{}i([s.dataFormat(a),r("design:type",a)],g.prototype,"contact",void 0),t.SelfContactNotification=g;class m{}i([s.dataFormat(a),r("design:type",Array)],m.prototype,"contacts",void 0),t.ContactsNotification=m;t.SuggestedContactsNotification=class extends m{};class y{}i([s.dataFormat(a),r("design:type",Array)],y.prototype,"contacts",void 0),t.ContactPresenceRequest=y;class v{}i([s.dataFormat(a),r("design:type",a)],v.prototype,"contact",void 0),t.ContactResponse=v;class S{}i([s.dataFormat(v),r("design:type",Array)],S.prototype,"contacts",void 0),t.ContactPresenceResponse=S;t.ContactPresenceDisposeRequest=class{};class w{}t.SearchContactProperty=w;class C{}i([s.dataFormat(w),r("design:type",Array)],C.prototype,"queryOptions",void 0),t.SearchContactsRequest=C;class b{}i([s.dataFormat(a),r("design:type",Array)],b.prototype,"results",void 0),t.SearchContactsResponse=b;class E{}t.MessagePayload=E;t.SendMessageRequest=class extends E{};t.MessageReceivedNotification=class extends E{};t.SignInRequest=class{};t.SignedStateChangedNotification=class{};t.AuthenticationRequiredNotification=class{},function(e){e.RequestInitializeName="initialize",e.RequestDisposeName="dispose",e.RequestInviteName="inviteLink",e.RequestPublishPresenceName="publishPresence",e.RequestContactPresenceName="contactPresenceRequest",e.RequestContactPresenceDisposeName="contactPresenceDispose",e.RequestSearchContactsName="searchContacts",e.RequestSendMessageName="sendMessageRequest",e.RequestSignInName="signIn",e.RequestSignOutName="signOut",e.NotifyPresenceChangedName="presenceChanged",e.NotifySelfContactName="selfContact",e.NotifyAvailableUsersName="availableUsers",e.NotifyAvailableUsersAddedName="availableUsersAdded",e.NotifyAvailableUsersRemovedName="availableUsersRemoved",e.NotifyInviteReceivedName="inviteLinkReceived",e.NotifyContactChangedName="contactChanged",e.NotifyContactPropertiesChangedName="contactPropertiesChanged",e.NotifySuggestedUsersName="suggestedUsers",e.NotifyCapabilitiesUpdateName="capabilitiesUpdate",e.NotifyMessageReceivedName="messageReceived",e.NotifySignedStateChangedName="signedStateChanged",e.NotifyAuthenticationRequiredName="authenticationRequired"}(t.Methods||(t.Methods={})),t.ContactServiceProvider={methods:["request"],events:["notified"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedState=void 0,function(e){e[e.Reconnecting=1]="Reconnecting",e[e.Reconnected=2]="Reconnected",e[e.Closed=3]="Closed"}(t.ConnectedState||(t.ConnectedState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMode=void 0,function(e){e.Auto="auto",e.Direct="direct",e.Relay="relay",e.Local="local",e.SignalR="signalR"}(t.ConnectionMode||(t.ConnectionMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LatencyMetrics=void 0;t.LatencyMetrics=class{constructor(e,t,n,i){this.current=e,this.average=t,this.min=n,this.max=i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceApi=void 0;const a=n(17),c=n(162),l=n(0),u=s(n(23)),h=n(10);class d{constructor(e,t,n){this.serviceUri=e,this.tokenProvider=t,this.logger=n,this.getRequestHeaders=()=>o(this,void 0,void 0,(function*(){return{Authorization:"Bearer "+(yield this.tokenProvider()),"Cache-Control":"no-cache","Content-Type":"application/json"}})),l.assertDefined(e,"service uri needs to be defined");let i=e;i.endsWith("/")||(i+="/"),i.includes("api/v1.2")||(i+="api/v1.2"),this.baseUri=this.removeTrailingSlash(i),this.httpClient=new c.HttpClient(n)}static getWorkspaceSessionInfo(e,t,n){return o(this,void 0,void 0,(function*(){n.info("getWorkspaceSessionInfo -> workspaceId:"+e);const i=new d(t.liveShareEndpoint,()=>t.token,n),[r,s]=yield Promise.all([i.getWorkspaceAccess(e),i.getWorkspaceInfo(e)]),o=Object.assign(Object.assign({},r),s);return l.assertDefined(s,"Cannot get LiveShare workspace info."),l.assertDefined(r,"Cannot get LiveShare workspace access."),l.assertDefined(s.relaySas,"No RelaySas token found."),o}))}deleteWorkspace(e){return o(this,void 0,void 0,(function*(){l.assertDefined(e,"Cannot get Live Share workspaceId"),e=e.toUpperCase();const t=`${this.baseUri}/workspace/${e}`;this.logger.log(a.LogLevel.Debug,"delete workspace -> "+t);return(yield this.httpClient.delete(t,{headers:yield this.getRequestHeaders()})).ok}))}getManagedWorkspaces(){return o(this,void 0,void 0,(function*(){const e=this.baseUri+"/workspace/managed";this.logger.log(a.LogLevel.Debug,"get managed workspaces -> "+e);return yield this.httpClient.get(e,{headers:yield this.getRequestHeaders()}).value()}))}deleteLink(e){return o(this,void 0,void 0,(function*(){l.assertDefined(e,"Cannot get Live Share workspaceId"),e=e.toUpperCase();const t=`${this.baseUri}/workspace/link/${e}`;this.logger.log(a.LogLevel.Debug,"delete link -> "+t);return(yield this.httpClient.delete(t,{headers:yield this.getRequestHeaders()})).ok}))}rename(e,t){return o(this,void 0,void 0,(function*(){const n=`${this.baseUri}/workspace/${e.toUpperCase()}`;return this.logger.log(a.LogLevel.Debug,"rename workspace -> "+n),yield this.httpClient.post(n,{headers:yield this.getRequestHeaders(),body:JSON.stringify(t)}).value()}))}getWorkspaceInfo(e){return o(this,void 0,void 0,(function*(){l.assertDefined(e,"Cannot get Live Share workspaceId"),e=e.toUpperCase();const t=`${this.baseUri}/workspace/${e}`;return this.logger.log(a.LogLevel.Debug,"get workspace info -> "+t),yield this.httpClient.get(t,{headers:yield this.getRequestHeaders()}).value()}))}getWorkspaceAccess(e){return o(this,void 0,void 0,(function*(){l.assertDefined(e,"Cannot get Live Share workspaceId"),e=e.toUpperCase();const t=`${this.baseUri}/workspace/${e}/user`;return this.logger.log(a.LogLevel.Debug,"get workspace access -> "+t),yield this.httpClient.put(t,{headers:yield this.getRequestHeaders()}).value()}))}postWorkspaceInfo(e){return o(this,void 0,void 0,(function*(){const t=this.baseUri+"/workspace";return this.logger.log(a.LogLevel.Debug,"post workspace info -> "+t),yield this.httpClient.post(t,{headers:yield this.getRequestHeaders(),body:JSON.stringify(e)}).value()}))}createInvitationLink(e){return o(this,void 0,void 0,(function*(){const t=`${this.baseUri}/workspace/${e.workspaceId}/link`;return yield this.httpClient.put(t,{headers:yield this.getRequestHeaders(),body:JSON.stringify(e)}).value()}))}getWorkspaceUserProfile(e,t){var n;return o(this,void 0,void 0,(function*(){l.assertDefined(e,"Cannot get Live Share workspaceId"),e=e.toUpperCase();const i=`${this.baseUri}/workspace/${e}/user`;this.logger.log(a.LogLevel.Debug,"get workspace user profile -> "+i);const r=yield this.httpClient.get(i,{headers:Object.assign(Object.assign({},yield this.getRequestHeaders()),{"User-Session-Token":t})}).value();return(null===(n=r)||void 0===n?void 0:n.username)&&(r.userName=r.username),r}))}static createSshKeys(){return o(this,void 0,void 0,(function*(){const e=u.SshAlgorithms.publicKey.rsaWithSha512,t=yield e.generateKeyPair(),n=(yield t.getPublicKeyBytes(t.keyAlgorithmName)).toString("base64");return[t,n]}))}createSharedWorkspace(e){var t;return o(this,void 0,void 0,(function*(){const n=yield d.createSshKeys(),i={name:e.name,connectionMode:null!==(t=e.connectionMode)&&void 0!==t?t:h.vsls.ConnectionMode.Relay,areAnonymousGuestsAllowed:e.areAnonymousGuestsAllowed,hostPublicKeys:[n[1]],connectLinks:e.connectLinks},r=yield this.postWorkspaceInfo(i);return{workspaceInfo:r,hostPrivateKeys:[n[0]],getWorkspaceUserProfile:e=>this.getWorkspaceUserProfile(r.id,e)}}))}removeTrailingSlash(e){return e.endsWith("/")?e.substr(0,e.length-1):e}}t.WorkspaceApi=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDiffieHellman=t.WebDiffieHellman=void 0;const i=n(6),r=n(285),s=n(229),o=n(232),a=n(58),c=n(233);class l extends s.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new u(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebDiffieHellman=l;class u{constructor(e,t,n){switch(this.hashAlgorithmName=t,this.digestLength=n,e){case 1024:this.dh=(0,r.getDiffieHellman)("modp2");break;case 2048:this.dh=(0,r.getDiffieHellman)("modp14");break;case 4096:this.dh=(0,r.getDiffieHellman)("modp16");break;default:throw new Error("Invalid DH bit length.")}}startKeyExchange(){const e=this.dh.generateKeys(),t=a.BigInt.fromBytes(e,{unsigned:!0}).toBytes();return Promise.resolve(t)}decryptKeyExchange(e){const t=this.dh.computeSecret(e),n=a.BigInt.fromBytes(t,{unsigned:!0}).toBytes();return Promise.resolve(n)}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return i.Buffer.from(t)}dispose(){}}class h extends s.KeyExchangeAlgorithm{constructor(e,t,n){super(e,t,n,o.WebHmac.getHashDigestLength(n))}createKeyExchange(){return new d(this.keySizeInBits,o.WebHmac.getWebHashAlgorithmName(this.hashAlgorithmName),this.hashDigestLength)}}t.WebECDiffieHellman=h;class d{constructor(e,t,n){this.bitLength=e,this.hashAlgorithmName=t,this.digestLength=n,this.algorithm={name:"ECDH",namedCurve:"P-"+e}}async startKeyExchange(){this.keyPair||(this.keyPair=await crypto.subtle.generateKey(this.algorithm,!0,["deriveBits"]));const e=await crypto.subtle.exportKey("jwk",this.keyPair.publicKey),t=c.JsonWebKeyFormatter.parseEC(e),n=Math.ceil(this.bitLength/8),r=i.Buffer.alloc(1+2*n);return r[0]=4,t.x.toBytes({unsigned:!0,length:n}).copy(r,1),t.y.toBytes({unsigned:!0,length:n}).copy(r,1+n),i.Buffer.from(r)}async decryptKeyExchange(e){if(!this.keyPair)throw new Error("Key exchange not started.");const t=e,n=c.JsonWebKeyFormatter.formatEC({curve:{name:this.algorithm.namedCurve},x:a.BigInt.fromBytes(t.slice(1,1+(t.length-1)/2),{unsigned:!0}),y:a.BigInt.fromBytes(t.slice(1+(t.length-1)/2),{unsigned:!0})}),r=await crypto.subtle.importKey("jwk",n,this.algorithm,!1,[]),s=i.Buffer.from(await crypto.subtle.deriveBits(Object.assign(Object.assign({},this.algorithm),{public:r}),this.keyPair.privateKey,8*Math.ceil(this.bitLength/8)));return a.BigInt.fromBytes(s,{unsigned:!0}).toBytes()}async sign(e){const t=await crypto.subtle.digest(this.hashAlgorithmName,e);return i.Buffer.from(t)}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRsa=void 0;const i=n(6),r=n(138),s=n(232),o=n(38),a=n(233);class c{constructor(e){this.hashAlgorithm=e,this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return l.keyAlgorithmName}async generate(e){e=null!=e?e:c.defaultKeySize;try{const t={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.hashAlgorithm}},n=await crypto.subtle.generateKey(t,!0,["sign","verify"]);this.publicKey=n.publicKey,this.privateKey=n.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==l.rsaWithSha256&&n!==l.rsaWithSha512)throw new Error("Invalid RSA key algorithm: "+n);const i=t.readBigInt(),r=t.readBigInt(),s=a.JsonWebKeyFormatter.formatRsa({modulus:r,exponent:i},!1);s.alg="RS"+this.hashAlgorithm.replace("SHA-",""),s.key_ops=["verify"];try{const e={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};this.publicKey=await crypto.subtle.importKey("jwk",s,e,!0,["verify"])}catch(e){throw new Error("Failed to import RSA public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName);try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export RSA public key: "+e)}const{modulus:n,exponent:r}=a.JsonWebKeyFormatter.parseRsa(t,!1),s=i.Buffer.alloc(512),c=new o.SshDataWriter(s);c.writeString(e,"ascii"),c.writeBigInt(r),c.writeBigInt(n);return c.toBuffer()}async importParameters(e){const t=e.d?a.JsonWebKeyFormatter.formatRsa(e,!0):null,n=a.JsonWebKeyFormatter.formatRsa(e,!1),i={name:"RSASSA-PKCS1-v1_5",hash:{name:this.hashAlgorithm}};try{this.publicKey=await crypto.subtle.importKey("jwk",n,i,!0,["verify"]),this.privateKey=t?await crypto.subtle.importKey("jwk",t,i,!0,["sign"]):void 0}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to import RSA key pair: "+e.message)}}async exportParameters(){var e;if(!this.publicKey)throw new Error("Public key not set.");let t;try{t=await crypto.subtle.exportKey("jwk",null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey)}catch(e){if(!(e instanceof Error))throw e;throw new Error("Failed to export RSA public key: "+e.message)}return a.JsonWebKeyFormatter.parseRsa(t,!!this.privateKey)}dispose(){}}c.defaultKeySize=2048;class l extends r.PublicKeyAlgorithm{constructor(e,t){super(e,l.keyAlgorithmName,t)}createKeyPair(){const e=l.convertHashAlgorithmName(this.hashAlgorithmName);return new c(e)}async generateKeyPair(e){const t=l.convertHashAlgorithmName(this.hashAlgorithmName),n=new c(t);return await n.generate(e),n}createSigner(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,s.WebHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof c))throw new TypeError("RSA key pair object expected.");const t=l.convertHashAlgorithmName(this.hashAlgorithmName);return new u(e,t,s.WebHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}}t.WebRsa=l,l.keyAlgorithmName="ssh-rsa",l.rsaWithSha256="rsa-sha2-256",l.rsaWithSha512="rsa-sha2-512",l.KeyPair=c;class u{constructor(e,t,n){this.keyPair=e,this.hashAlgorithm=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");await this.convertKeyHashAlgorithm();return i.Buffer.from(await crypto.subtle.sign("RSASSA-PKCS1-v1_5",this.keyPair.privateKey,e))}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");await this.convertKeyHashAlgorithm();return await crypto.subtle.verify("RSASSA-PKCS1-v1_5",this.keyPair.publicKey,t,e)}async convertKeyHashAlgorithm(){if(this.keyPair.hashAlgorithm!==this.hashAlgorithm){const e=await this.keyPair.exportParameters();this.keyPair=new c(this.hashAlgorithm),await this.keyPair.importParameters(e)}}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebECDsa=void 0;const i=n(6),r=n(138),s=n(38),o=n(177),a=n(58),c=n(233);class l{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find(e=>e.name===t),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}async generate(){try{const e={name:"ECDSA",namedCurve:this.curve.shortName},t=await crypto.subtle.generateKey(e,!0,["sign","verify"]);this.publicKey=t.publicKey,this.privateKey=t.privateKey}catch(e){throw new Error("Failed to generate RSA key pair: "+e)}}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new s.SshDataReader(e),i=n.readString("ascii");this.algorithmName=t||i;if(n.readString("ascii")!==this.curve.name)throw new Error("EC curve name does not match.");const r=n.readBinary(),o=Math.ceil(this.curve.keySize/8),l=a.BigInt.fromBytes(r.slice(1,1+o),{unsigned:!0}),u=a.BigInt.fromBytes(r.slice(1+o,r.length),{unsigned:!0}),h=c.JsonWebKeyFormatter.formatEC({curve:{name:this.curve.shortName,oid:this.curve.oid},x:l,y:u});try{const e={name:"ECDSA",namedCurve:this.curve.shortName};this.publicKey=await crypto.subtle.importKey("jwk",h,e,!0,["verify"])}catch(e){throw new Error("Failed to import EC public key: "+e)}}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;try{t=await crypto.subtle.exportKey("jwk",this.publicKey)}catch(e){throw new Error("Failed to export ECDSA public key: "+e)}const n=i.Buffer.from(t.x,"base64"),r=i.Buffer.from(t.y,"base64"),o=Math.ceil(this.curve.keySize/8);if(n.length!==o||r.length!==o)throw new Error("Unexpected key length.");e=e||this.algorithmName||this.keyAlgorithmName;const a=i.Buffer.alloc(e.length+n.length+r.length+10),c=new s.SshDataWriter(a);c.writeString(e,"ascii"),c.writeString(this.curve.name,"ascii"),c.writeUInt32(1+n.length+r.length),c.writeByte(4),c.write(n),c.write(r);return c.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find(t=>t.oid===e.curve.oid),!t)throw new Error("Unsupported curve OID: "+e.curve.oid)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find(t=>t.name===e.curve.name),!t)throw new Error("Unsupported curve: "+e.curve.name)}this.algorithmName="ecdsa-sha2-"+t.name;const n={name:"ECDSA",namedCurve:this.curve.shortName},i=c.JsonWebKeyFormatter.formatEC(e);i.crv=this.curve.shortName;try{i.d?(this.privateKey=await crypto.subtle.importKey("jwk",i,n,!0,["sign"]),i.d=void 0):this.privateKey=void 0,this.publicKey=await crypto.subtle.importKey("jwk",i,n,!0,["verify"])}catch(e){throw new Error("Failed to import ECDSA key pair: "+e)}}async exportParameters(){var e;const t=null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey;if(!t)throw new Error("Key not present.");let n;try{n=await crypto.subtle.exportKey("jwk",t)}catch(e){throw new Error("Failed to export ECDSA key pair: "+e)}const i=c.JsonWebKeyFormatter.parseEC(n);return i.curve={name:this.curve.name,oid:this.curve.oid},i}dispose(){}}class u extends r.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new l(this.name)}async generateKeyPair(){const e=new l(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new h(e,t)}createVerifier(e){if(!(e instanceof l))throw new TypeError("ECDSA key pair object expected.");const t=u.convertHashAlgorithmName(this.hashAlgorithmName);return new h(e,t)}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA-")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.WebECDsa=u,u.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",u.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",u.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",u.curves=o.curves,u.KeyPair=l;class h{constructor(e,t){this.keyPair=e,this.hashAlgorithm=t}get digestLength(){const e=this.keyPair.curve;return e?u.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");let t=i.Buffer.from(await crypto.subtle.sign({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.privateKey,e));const n=Math.ceil(this.keyPair.curve.keySize/8);if(t.length!==2*n)throw new Error("Unexpected signature length: "+t.length);const r=a.BigInt.fromBytes(t.slice(0,n),{unsigned:!0}),o=a.BigInt.fromBytes(t.slice(n,t.length),{unsigned:!0}),c=new s.SshDataWriter(i.Buffer.alloc(this.digestLength));return c.writeBinary(r.toBytes({unsigned:!0,length:n+1})),c.writeBinary(o.toBytes({unsigned:!0,length:n+1})),t=c.toBuffer(),t}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new s.SshDataReader(t),r=n.readBigInt(),o=n.readBigInt(),a=Math.ceil(this.keyPair.curve.keySize/8);t=i.Buffer.alloc(2*a),r.toBytes({unsigned:!0,length:a}).copy(t,0),o.toBytes({unsigned:!0,length:a}).copy(t,a);return await crypto.subtle.verify({name:"ECDSA",hash:{name:this.hashAlgorithm}},this.keyPair.publicKey,t,e)}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebEncryption=void 0;const i=n(6),r=n(230);class s extends r.EncryptionAlgorithm{constructor(e,t,n,i){super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=i,this.blockSizeInBits=s.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){const i=new o(e,this.algorithmName,this.cipherMode,this.keySizeInBits,this.blockSizeInBits);return await i.init(t,n),i}static getBlockSize(e){if("AES"===e)return 128;throw new Error("Unsupported encryption algorithm: "+e)}}t.WebEncryption=s;class o{constructor(e,t,n,r,s){if(this.isEncryption=e,this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=r,this.blockSizeInBits=s,this.tag=null,"AES"===this.algorithmName&&"CTR"===this.cipherMode)this.transform=this.aesCtr.bind(this,e);else if("AES"===this.algorithmName&&"CBC"===this.cipherMode)this.transform=this.aesCbc.bind(this,e);else{if("AES"!==this.algorithmName||"GCM"!==this.cipherMode)throw new Error(`Unsupported encryption algorithm: ${this.algorithmName}-${this.cipherMode}`);this.transform=this.aesGcm.bind(this,e),this.associatedData=i.Buffer.alloc(4),this.decryptBuffer=i.Buffer.alloc(4*this.blockLength)}}get blockLength(){return this.blockSizeInBits/8}async init(e,t){try{const t=`${this.algorithmName}-${this.cipherMode}`;this.key=await crypto.subtle.importKey("raw",e,{name:t,length:this.keySizeInBits},!1,this.isEncryption?["encrypt"]:["decrypt"])}catch(e){throw new Error("Failed to initialize AES: "+e)}"GCM"===this.cipherMode?this.iv=i.Buffer.from(t.slice(0,12)):this.iv=i.Buffer.from(t)}async aesCtr(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}let n;if(n=e?i.Buffer.from(await crypto.subtle.encrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)):i.Buffer.from(await crypto.subtle.decrypt({name:"AES-CTR",counter:this.iv,length:this.blockSizeInBits},this.key,t)),n.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${n.length}, expected ${t.length}.`;throw new Error(e)}const r=t.length/this.blockLength;for(let e=0;e<r;e++)for(let e=this.iv.length-1;e>=0&&(this.iv[e]=this.iv[e]+1,!this.iv[e]);e--);return n}async aesCbc(e,t){if(e){let e=i.Buffer.from(await crypto.subtle.encrypt({name:"AES-CBC",iv:this.iv},this.key,t));return e=e.slice(0,t.length),e}return i.Buffer.from(await crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv},this.key,t))}async aesGcm(e,t){if(t.length%this.blockLength!=0){const e=`Encrypt/decrypt input has invalid length ${t.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(e)}const n=t.length;let r;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,e)r=i.Buffer.from(await crypto.subtle.encrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,t)),this.tag=r.slice(r.length-this.digestLength),r=r.slice(0,r.length-this.digestLength);else{if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");const e=t.length+this.digestLength;if(this.decryptBuffer.length<e){let t=2*this.decryptBuffer.length;for(;t<e;)t*=2;this.decryptBuffer=i.Buffer.alloc(t)}const n=this.decryptBuffer.slice(0,e);t.copy(n,0),this.tag.copy(n,t.length),r=i.Buffer.from(await crypto.subtle.decrypt({name:"AES-GCM",iv:this.iv,additionalData:this.associatedData,tagLength:8*this.digestLength},this.key,n))}if(r.length!==t.length){const e=`Result from encrypt/decrypt has invalid length ${r.length}, expected ${t.length}.`;throw new Error(e)}let s=12;for(;--s>=4&&(this.iv[s]++,0===this.iv[s]););return r}get digestLength(){return 16}get authenticatedEncryption(){return"GCM"===this.cipherMode}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRandom=void 0;t.WebRandom=class{getBytes(e){crypto.getRandomValues(e)}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRsa=void 0;const i=n(56),r=n(6),s=n(138),o=n(38),a=n(234),c=n(338),l=e.versions.node.split(".").map(e=>parseInt(e,10)),u=l[0]>10||10===l[0]&&l[1]>=12,h=l[0]>11||11===l[0]&&l[1]>=6;class d{constructor(){this.comment=null}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return p.keyAlgorithmName}generate(e){return e=null!=e?e:d.defaultKeySize,u&&h?this.generateNodeKeyPairObjects(e):u?this.generateNodeKeyPairBuffers(e):this.generateExternalKeyPair(e)}async generateNodeKeyPairObjects(e){[this.publicKey,this.privateKey]=await new Promise((t,n)=>{const r={modulusLength:e};try{i.generateKeyPair("rsa",r,(e,i,r)=>{e?n(e):t([i,r])})}catch(e){n(e)}})}async generateNodeKeyPairBuffers(e){[this.publicKey,this.privateKey]=await new Promise((t,n)=>{const r={modulusLength:e,publicKeyEncoding:{type:"pkcs1",format:"pem"},privateKeyEncoding:{type:"pkcs1",format:"pem",cipher:void 0,passphrase:void 0}};try{i.generateKeyPair("rsa",r,(e,i,r)=>{e?n(e):t([i,r])})}catch(e){n(e)}})}async generateExternalKeyPair(e){const t=new(await Promise.resolve().then(()=>n(118)))({b:e});this.publicKey=t.exportKey("pkcs1-public-pem"),this.privateKey=t.exportKey("pkcs1-private-pem"),this.publicKey.endsWith("\n")||(this.publicKey+="\n"),this.privateKey.endsWith("\n")||(this.privateKey+="\n")}async setPublicKeyBytes(e){if(!e)throw new TypeError("Buffer is required.");const t=new o.SshDataReader(e),n=t.readString("ascii");if(n!==this.keyAlgorithmName&&n!==p.rsaWithSha256&&n!==p.rsaWithSha512)throw new Error("Invalid RSA key algorithm: "+n);const r=t.readBigInt(),s=t.readBigInt();e=c.Pkcs1KeyFormatter.formatRsaPublic({modulus:s,exponent:r}),this.publicKey=h?i.createPublicKey({key:e,type:"pkcs1",format:"der"}):(0,c.formatPem)(e,"RSA PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;e||(e=this.keyAlgorithmName),t="string"==typeof this.publicKey?(0,c.parsePem)(this.publicKey):this.publicKey.export({type:"pkcs1",format:"der"});const n=c.Pkcs1KeyFormatter.parseRsaPublic(t),i=r.Buffer.alloc(512),s=new o.SshDataWriter(i);return s.writeString(e,"ascii"),s.writeBigInt(n.exponent),s.writeBigInt(n.modulus),t=s.toBuffer(),t}async importParameters(e){if(h)this.publicKey=i.createPublicKey({key:c.Pkcs1KeyFormatter.formatRsaPublic(e),format:"der",type:"pkcs1"}),e.d?this.privateKey=i.createPrivateKey({key:c.Pkcs1KeyFormatter.formatRsaPrivate(e),format:"der",type:"pkcs1"}):this.privateKey=void 0;else{const t=c.Pkcs1KeyFormatter.formatRsaPublic(e);if(this.publicKey=(0,c.formatPem)(t,"RSA PUBLIC KEY"),e.d){const t=c.Pkcs1KeyFormatter.formatRsaPrivate(e);this.privateKey=(0,c.formatPem)(t,"RSA PRIVATE KEY")}}}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Public key not set.");let n;return n=h?(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey).export({format:"der",type:"pkcs1"}):(0,c.parsePem)(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey),this.privateKey?c.Pkcs1KeyFormatter.parseRsaPrivate(n):c.Pkcs1KeyFormatter.parseRsaPublic(n)}dispose(){this.publicKey=void 0,this.privateKey=void 0}}d.defaultKeySize=2048;class p extends s.PublicKeyAlgorithm{constructor(e,t){super(e,p.keyAlgorithmName,t)}createKeyPair(){return new d}async generateKeyPair(e){const t=new d;return await t.generate(e),t}createSigner(e){if(!(e instanceof d))throw new TypeError("RSA key pair object expected.");return new f(e,p.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof d))throw new TypeError("RSA key pair object expected.");return new f(e,p.convertHashAlgorithmName(this.hashAlgorithmName),a.NodeHmac.getHashDigestLength(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}}t.NodeRsa=p,p.keyAlgorithmName="ssh-rsa",p.rsaWithSha256="rsa-sha2-256",p.rsaWithSha512="rsa-sha2-512",p.KeyPair=d;class f{constructor(e,t,n){this.keyPair=e,this.hashAlgorithmName=t,this.digestLength=n}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=i.createSign(this.hashAlgorithmName);t.update(e);return t.sign(this.keyPair.privateKey)}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=i.createVerify(this.hashAlgorithmName);n.update(e);return n.verify(this.keyPair.publicKey,t)}dispose(){}}}).call(this,n(16))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeECDsa=void 0;const i=n(56),r=n(6),s=n(138),o=n(177),a=n(58),c=n(235),l=n(38),u=n(338),h=e.versions.node.split(".").map(e=>parseInt(e,10)),d=h[0]>10||10===h[0]&&h[1]>=12,p=h[0]>11||11===h[0]&&h[1]>=6;class f{constructor(e){this.comment=null,e&&(this.algorithmName=e)}get hasPublicKey(){return!!this.publicKey}get hasPrivateKey(){return!!this.privateKey}get keyAlgorithmName(){return this.algorithmName}get algorithmName(){return this.algorithm}set algorithmName(e){const t=e.split("-")[2];if(this.curve=o.curves.find(e=>e.name===t),!this.curve)throw new Error("Invalid or unsupported ECDSA algorithm: "+e);this.algorithm=e}generate(){return d&&p?this.generateNodeKeyPairObjects():d?this.generateNodeKeyPairBuffers():this.generateExternalKeyPair()}async generateNodeKeyPairObjects(){[this.publicKey,this.privateKey]=await new Promise((e,t)=>{const n={namedCurve:this.curve.shortName};try{i.generateKeyPair("ec",n,(n,i,r)=>{n?t(n):e([i,r])})}catch(e){t(e)}})}async generateNodeKeyPairBuffers(){[this.publicKey,this.privateKey]=await new Promise((e,t)=>{const n={namedCurve:this.curve.shortName,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"sec1",format:"pem",cipher:void 0,passphrase:void 0}};try{i.generateKeyPair("ec",n,(n,i,r)=>{n?t(n):e([i,r])})}catch(e){t(e)}})}async generateExternalKeyPair(){throw new Error("This version of node does not support generating key pairs. Use node >= 10.12.")}async setPublicKeyBytes(e,t){if(!e)throw new TypeError("Buffer is required.");const n=new l.SshDataReader(e),r=n.readString("ascii");this.algorithmName=t||r;const s=n.readString("ascii");this.algorithmName="ecdsa-sha2-"+s;const o=n.readBinary(),c=a.BigInt.fromBytes(o.slice(1,1+(o.length-1)/2),{unsigned:!0}),h=a.BigInt.fromBytes(o.slice(1+(o.length-1)/2),{unsigned:!0}),d=u.Sec1KeyFormatter.formatECPublic({curve:{name:this.curve.name,oid:this.curve.oid},x:c,y:h});this.publicKey=p?i.createPublicKey({key:d,type:"spki",format:"der"}):(0,u.formatPem)(d,"PUBLIC KEY")}async getPublicKeyBytes(e){if(!this.publicKey)return null;let t;t="string"==typeof this.publicKey?(0,u.parsePem)(this.publicKey):this.publicKey.export({type:"spki",format:"der"});const n=u.Sec1KeyFormatter.parseECPublic(t);e=e||this.algorithmName||this.keyAlgorithmName;const i=new l.SshDataWriter(r.Buffer.alloc(512));i.writeString(e,"ascii"),i.writeString(this.curve.name,"ascii");const s=Math.ceil(this.curve.keySize/8),o=n.x.toBytes({unsigned:!0,length:s}),a=n.y.toBytes({unsigned:!0,length:s});i.writeUInt32(1+o.length+a.length),i.writeByte(4),i.write(o),i.write(a);return i.toBuffer()}async importParameters(e){if(!e.curve)throw new TypeError("A curve is required.");let t;if(e.curve.oid){if(t=o.curves.find(t=>t.oid===e.curve.oid),!t)throw new Error("Unsupported curve OID: "+e.curve.oid)}else{if(!e.curve.name)throw new TypeError("A curve OID or name is required.");if(t=o.curves.find(t=>t.name===e.curve.name),!t)throw new Error("Unsupported curve: "+e.curve.name)}this.algorithmName="ecdsa-sha2-"+t.name;const n=u.Sec1KeyFormatter.formatECPublic(e);if(this.publicKey=p?i.createPublicKey({key:n,type:"spki",format:"der"}):(0,u.formatPem)(n,"EC PUBLIC KEY"),e.d){const t=u.Sec1KeyFormatter.formatECPrivate(e);this.privateKey=p?i.createPrivateKey({key:t,type:"sec1",format:"der"}):(0,u.formatPem)(t,"EC PRIVATE KEY")}else this.privateKey=void 0}async exportParameters(){var e,t;if(!this.publicKey)throw new Error("Key is not present.");let n;return n="string"==typeof this.publicKey?(0,u.parsePem)(null!==(e=this.privateKey)&&void 0!==e?e:this.publicKey):(null!==(t=this.privateKey)&&void 0!==t?t:this.publicKey).export({type:this.privateKey?"sec1":"spki",format:"der"}),this.privateKey?u.Sec1KeyFormatter.parseECPrivate(n):u.Sec1KeyFormatter.parseECPublic(n)}dispose(){}}class g extends s.PublicKeyAlgorithm{constructor(e,t){super(e,e,t)}createKeyPair(){return new f(this.name)}async generateKeyPair(){const e=new f(this.name);return await e.generate(),e}createSigner(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new m(e,g.convertHashAlgorithmName(this.hashAlgorithmName))}createVerifier(e){if(!(e instanceof f))throw new TypeError("ECDSA key pair object expected.");return new m(e,g.convertHashAlgorithmName(this.hashAlgorithmName))}static convertHashAlgorithmName(e){return e.replace("SHA2-","SHA")}static getSignatureLength(e){return 2*(5+Math.ceil(e/8))}}t.NodeECDsa=g,g.ecdsaSha2Nistp256="ecdsa-sha2-nistp256",g.ecdsaSha2Nistp384="ecdsa-sha2-nistp384",g.ecdsaSha2Nistp521="ecdsa-sha2-nistp521",g.curves=o.curves,g.KeyPair=f;class m{constructor(e,t){this.keyPair=e,this.hashAlgorithmName=t}get digestLength(){const e=this.keyPair.curve;return e?g.getSignatureLength(e.keySize):0}async sign(e){if(!this.keyPair.privateKey)throw new Error("Private key not set.");const t=i.createSign(this.hashAlgorithmName);t.update(e);let n=t.sign(this.keyPair.privateKey);const s=new c.DerReader(n),o=s.readInteger(),a=s.readInteger(),u=Math.ceil(this.keyPair.curve.keySize/8),h=new l.SshDataWriter(r.Buffer.alloc(this.digestLength));return h.writeBinary(o.toBytes({unsigned:!0,length:u+1})),h.writeBinary(a.toBytes({unsigned:!0,length:u+1})),n=h.toBuffer(),n}async verify(e,t){if(!this.keyPair.publicKey)throw new Error("Public key not set.");const n=new l.SshDataReader(t),s=n.readBigInt(),o=n.readBigInt(),a=new c.DerWriter(r.Buffer.alloc(t.length));a.writeInteger(s),a.writeInteger(o),t=a.toBuffer();const u=i.createVerify(this.hashAlgorithmName);u.update(e);return u.verify(this.keyPair.publicKey,t)}dispose(){}}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeEncryption=void 0;const i=n(56),r=n(6),s=n(230);class o extends s.EncryptionAlgorithm{constructor(e,t,n,i){if(super(e),this.algorithmName=t,this.cipherMode=n,this.keySizeInBits=i,"AES"!==t)throw new Error("Unsupported encryption algorithm: "+t);this.blockSizeInBits=o.getBlockSize(t)}get keyLength(){return this.keySizeInBits/8}get blockLength(){return this.blockSizeInBits/8}async createCipher(e,t,n){let i;if("CTR"===this.cipherMode||"CBC"===this.cipherMode)i=new a(e,this.keySizeInBits,this.blockSizeInBits,t,n,this.cipherMode);else{if("GCM"!==this.cipherMode)throw new Error("Unsupported cipher mode: "+this.cipherMode);i=new c(e,this.keySizeInBits,this.blockSizeInBits,t,n)}return i}static getBlockSize(e){if("AES"===e)return 128;throw new Error("Unsupported encryption algorithm: "+e)}}t.NodeEncryption=o;class a{constructor(e,t,n,r,s,o){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n;const a=`AES-${this.keySizeInBits}-${o}`;this.cipher=this.isEncryption?i.createCipheriv(a,r,s):i.createDecipheriv(a,r,s),this.cipher.setAutoPadding(!1)}get blockLength(){return this.blockSizeInBits/8}transform(e){const t=this.cipher.update(e);if(t.length!==e.length){const n=`Result from encrypt/decrypt has invalid length ${t.length}, expected ${e.length}.`;throw new Error(n)}return Promise.resolve(t)}dispose(){}}class c{constructor(e,t,n,i,s){this.isEncryption=e,this.keySizeInBits=t,this.blockSizeInBits=n,this.tag=null,this.algorithmName=`aes-${this.keySizeInBits}-gcm`,this.key=r.Buffer.alloc(i.length),i.copy(this.key),this.nonce=r.Buffer.alloc(12),s.copy(this.nonce,0,0,12),this.associatedData=r.Buffer.alloc(4)}get blockLength(){return this.blockSizeInBits/8}get digestLength(){return 16}get authenticatedEncryption(){return!0}transform(e){if(e.length%this.blockLength!=0){const t=`Encrypt/decrypt input has invalid length ${e.length}, not a multiple of block size ${this.blockLength}.`;throw new Error(t)}const t=this.isEncryption?i.createCipheriv(this.algorithmName,this.key,this.nonce):i.createDecipheriv(this.algorithmName,this.key,this.nonce),n=e.length;if(this.associatedData[0]=n>>>24,this.associatedData[1]=n>>>16,this.associatedData[2]=n>>>8,this.associatedData[3]=n,t.setAAD(this.associatedData),!this.isEncryption){if(!this.tag)throw new Error("AES-GCM tag was not set before decrypting.");t.setAuthTag(this.tag)}const r=t.update(e);if(r.length!==e.length){const t=`Result from encrypt/decrypt has invalid length ${r.length}, expected ${e.length}.`;throw new Error(t)}t.final(),this.isEncryption?this.tag=t.getAuthTag():this.tag=null;let s=12;for(;--s>=4&&(this.nonce[s]++,0===this.nonce[s]););return Promise.resolve(r)}async sign(e){if(!this.tag)throw new Error("AES-GCM tag was not obtained by encrypting.");return this.tag}async verify(e,t){if(t.length!==this.digestLength)throw new Error("Incorrect AES-GCM tag length.");return this.tag=t,!0}dispose(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandom=void 0;const i=n(56);t.NodeRandom=class{getBytes(e){i.randomBytes(e.length).copy(e)}}},function(e){e.exports=JSON.parse('{"name":"@vs/vs-ssh","version":"3.6.6","description":"SSH library for Visual Studio tools","keywords":["SSH"],"dependencies":{"buffer":"^5.2.1","debug":"^4.1.1","diffie-hellman":"^5.0.3","vscode-jsonrpc":"^4.0.0"},"author":"Microsoft","main":"./index.js"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshProtocol=void 0;const i=n(6),r=n(178),s=n(140),o=n(77),a=n(38),c=n(60),l=n(238),u=n(90),h=n(47),d=n(59);class p{constructor(e,t){this.sequence=e,this.message=t}}class f{constructor(e,t,n,o){this.config=t,this.metrics=n,this.trace=o,this.sessionSemaphore=new s.Semaphore(1),this.inboundPacketSequence=0,this.outboundPacketSequence=0,this.inboundFlow=0,this.outboundFlow=0,this.recentSentMessages=new r.Queue,this.sendWriter=new a.SshDataWriter(i.Buffer.alloc(1024)),this.receiveWriter=new a.SshDataWriter(i.Buffer.alloc(1024)),this.traceChannelData=!1,this.extensions=null,this.kexService=null,this.algorithms=null,this.outgoingMessagesHaveLatencyInfo=!1,this.incomingMessagesHaveLatencyInfo=!1,this.outgoingMessagesHaveReconnectInfo=!1,this.incomingMessagesHaveReconnectInfo=!1,this.stream=e}get lastIncomingSequence(){return this.inboundPacketSequence-1}getSentMessages(e){if(e===this.outboundPacketSequence+1)return[];if(this.recentSentMessages.size>0&&e<this.recentSentMessages.peek().sequence)return null;const t=new Array;for(let n of this.recentSentMessages)if(n.sequence>=e){const e=n.message;e instanceof l.KeyExchangeMessage||e instanceof c.DisconnectMessage||t.push(e)}return t}async writeProtocolVersion(e,t){const n=this.stream;if(!n)throw new Error("SSH session disconnected.");const r=i.Buffer.from(e+"\r\n");return await n.write(r,t),this.metrics.addMessageSent(r.length),Promise.resolve()}async readProtocolVersion(e){const t=this.stream;if(!t)throw new Error("SSH session disconnected.");const n=i.Buffer.alloc(255);let r=0;for(let i=0;i<n.length;i++){const s=await t.read(1,e);if(!s)break;n[i]=s[0];const o=13,a=10;if(i>0&&n[i-1]===o&&n[i]===a){const e=n.toString("utf8",0,i-1);if(e.startsWith("SSH-"))return this.metrics.addMessageReceived(i+1),e;if(r>20)break;r++,i=-1}}throw new h.SshConnectionError("Failed to read the protocol version",c.SshDisconnectReason.protocolError)}async handleNewKeys(e){try{await this.sessionSemaphore.wait(e),this.inboundFlow=0,this.outboundFlow=0,this.algorithms=this.kexService.finishKeyExchange()}finally{this.sessionSemaphore.release()}}async read(e,t){const n=this.stream;if(!n)return!1;let i=0;do{let r;try{r=await n.read(e.length-i,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(d.TraceLevel.Error,d.SshTraceEventIds.streamReadError,"Error reading from stream: "+e.message,e),new h.SshConnectionError("Error reading from stream: "+e.message,c.SshDisconnectReason.connectionLost)}if(!r)return!1;r.copy(e,i),i+=r.length}while(i<e.length);return!0}async write(e,t){const n=this.stream;if(!n)return!1;try{await n.write(e,t)}catch(e){if(!(e instanceof Error))throw e;if(n.isDisposed)return!1;throw n.dispose(),this.stream=null,this.trace(d.TraceLevel.Error,d.SshTraceEventIds.streamWriteError,"Error writing to stream: "+e.message,e),new h.SshConnectionError("Error writing to stream: "+e.message,c.SshDisconnectReason.connectionLost)}return!0}async considerReExchange(e,t){const n=this.kexService;if(!n)return;let i=null,r=null;!n.exchanging&&(e||this.inboundFlow+this.outboundFlow>this.config.keyRotationThreshold)&&([i,r]=await n.startKeyExchange(e)),i&&(await this.sendMessage(i,t),r&&await this.sendMessage(r,t))}async computeHmac(e,t,n){const r=new a.SshDataWriter(i.Buffer.alloc(4+t.length));r.writeUInt32(n),r.write(t);return await e.sign(r.toBuffer())}async verifyHmac(e,t,n,r){const s=new a.SshDataWriter(i.Buffer.alloc(4+t.length));s.writeUInt32(n),s.write(t);return await e.verify(s.toBuffer(),r)}async readAndVerifyHmac(e,t,n,i){if(!await this.read(n,i))return!1;if(!await this.verifyHmac(e,t,this.inboundPacketSequence,n))throw new h.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError);return!0}async sendMessage(e,t){var n;const r=this.algorithms,s=null==r?void 0:r.compressor,o=null==r?void 0:r.cipher,a=null==r?void 0:r.messageSigner;let c;await this.sessionSemaphore.wait(t);try{const r=o?Math.max(8,o.blockLength):8,l=f.packetLengthSize+f.paddingLengthSize;if(this.sendWriter.position=l,e.write(this.sendWriter),this.outgoingMessagesHaveReconnectInfo&&(this.sendWriter.writeUInt64(this.lastIncomingSequence),this.outgoingMessagesHaveLatencyInfo)){const e=Math.min(4294967295,Math.round(1e3*(this.metrics.time-this.lastIncomingTimestamp)));this.sendWriter.writeUInt32(e)}let h=this.sendWriter.toBuffer().slice(l);null!=s&&(h=s.compress(h));let g=r-((!((null==a?void 0:a.encryptThenMac)||(null==a?void 0:a.authenticatedEncryption))?f.packetLengthSize:0)+f.paddingLengthSize+h.length)%r;g<4&&(g+=r);const m=f.paddingLengthSize+h.length+g;this.sendWriter.position=0,this.sendWriter.writeUInt32(m),this.sendWriter.writeByte(g),null!=s?this.sendWriter.write(h):this.sendWriter.position+=h.length,this.sendWriter.writeRandom(g),h=this.sendWriter.toBuffer();let y=null;if((null==a?void 0:a.encryptThenMac)&&o){const e=h.slice(f.packetLengthSize,h.length);(await o.transform(e)).copy(e),y=await this.computeHmac(a,h,this.outboundPacketSequence)}else if(null==a?void 0:a.authenticatedEncryption){let e=h.slice(f.packetLengthSize,h.length);(await o.transform(e)).copy(e),y=await a.sign(e)}else a&&(y=await this.computeHmac(a,h,this.outboundPacketSequence)),o&&(h=await o.transform(h));if(e instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(d.TraceLevel.Verbose,d.SshTraceEventIds.sendingChannelData,`Sending #${this.outboundPacketSequence} ${e}`):this.trace(d.TraceLevel.Verbose,d.SshTraceEventIds.sendingMessage,`Sending #${this.outboundPacketSequence} ${e}`),this.incomingMessagesHaveReconnectInfo){const t=new p(this.outboundPacketSequence,e);t.sentTime=this.metrics.time,this.recentSentMessages.enqueue(t)}if(this.outboundPacketSequence++,this.outboundFlow+=m,y){const e=i.Buffer.concat([h,y],h.length+y.length);c=await this.write(e,t)}else c=await this.write(h,t);this.metrics.addMessageSent(f.packetLengthSize+m+(null!==(n=null==a?void 0:a.digestLength)&&void 0!==n?n:0))}finally{this.sessionSemaphore.release()}return await this.considerReExchange(!1,t),c}async receiveMessage(e){var t;const n=this.algorithms,i=null==n?void 0:n.decipher,r=null==n?void 0:n.messageVerifier,s=null==n?void 0:n.decompressor,l=!((null==r?void 0:r.encryptThenMac)||(null==r?void 0:r.authenticatedEncryption)),p=l?i?Math.max(8,i.blockLength):8:f.packetLengthSize;this.receiveWriter.position=p;let g=this.receiveWriter.toBuffer();if(!await this.read(g,e))return null;this.lastIncomingTimestamp=this.metrics.time,i&&l&&(g=await i.transform(g),this.receiveWriter.position=0,this.receiveWriter.write(g));const m=new a.SshDataReader(g).readUInt32();if(m>f.maxPacketLength)throw new h.SshConnectionError("Invalid packet length.",c.SshDisconnectReason.protocolError);const y=f.packetLengthSize+m;y>p&&this.receiveWriter.skip(y-p),r&&this.receiveWriter.skip(r.digestLength);const v=this.receiveWriter.toBuffer(),S=v.slice(0,y),w=v.slice(y);let C=S.slice(p,y);if(C.length>0){if(!await this.read(C,e))return null;if((null==r?void 0:r.encryptThenMac)&&!await this.readAndVerifyHmac(r,S,w,e))return null;if(i){if(null==r?void 0:r.authenticatedEncryption){if(!await this.read(w,e))return null;await r.verify(C,w)}try{C=await i.transform(C)}catch(e){throw(null==r?void 0:r.authenticatedEncryption)?new h.SshConnectionError("Invalid MAC",c.SshDisconnectReason.macError):e}this.receiveWriter.position=p,this.receiveWriter.write(C)}}if(r&&!r.encryptThenMac&&!r.authenticatedEncryption&&!await this.readAndVerifyHmac(r,S,w,e))return null;const b=S[f.packetLengthSize];let E=S.slice(f.packetLengthSize+f.paddingLengthSize,f.packetLengthSize+(m-b));if(s&&(E=s.decompress(E)),this.incomingMessagesHaveReconnectInfo){let e,t;if(this.incomingMessagesHaveLatencyInfo){const n=new a.SshDataReader(E.slice(E.length-12,E.length));e=n.readUInt64(),t=n.readUInt32()/1e3,E=E.slice(0,E.length-12)}else{e=new a.SshDataReader(E.slice(E.length-8,E.length)).readUInt64(),t=0,E=E.slice(0,E.length-8)}for(;this.recentSentMessages.size>0;){const n=this.recentSentMessages.peek();if(n.sequence>e)break;if(this.stream&&this.incomingMessagesHaveLatencyInfo&&n.sequence===e){const e=this.lastIncomingTimestamp-n.sentTime-t;this.metrics.updateLatency(e)}this.recentSentMessages.dequeue()}}const k=E[0];let R=o.SshMessage.create(this.config,k,E);if(!R){const e=new c.UnimplementedMessage;e.sequenceNumber=this.inboundPacketSequence,e.unimplementedMessageType=k,R=e}return R instanceof u.ChannelDataMessage?this.traceChannelData&&this.trace(d.TraceLevel.Verbose,d.SshTraceEventIds.receivingChannelData,`Receiving #${this.inboundPacketSequence} ${R}`):this.trace(d.TraceLevel.Verbose,d.SshTraceEventIds.receivingMessage,`Receiving #${this.inboundPacketSequence} ${R}`),await this.sessionSemaphore.wait(e),this.inboundPacketSequence++,this.inboundFlow+=m,this.sessionSemaphore.release(),this.metrics.addMessageReceived(f.packetLengthSize+m+(null!==(t=null==r?void 0:r.digestLength)&&void 0!==t?t:0)),await this.considerReExchange(!1,e),R}dispose(){try{this.stream&&this.stream.close().catch(e=>{this.trace(d.TraceLevel.Error,d.SshTraceEventIds.streamCloseError,"Error closing stream: "+e.message,e)})}catch(e){if(!(e instanceof Error))throw e;this.trace(d.TraceLevel.Error,d.SshTraceEventIds.streamCloseError,"Error closing stream: "+e.message,e)}this.stream=null,this.metrics.updateLatency(0),this.algorithms&&this.algorithms.dispose()}}t.SshProtocol=f,f.maxPacketLength=1048576,f.packetLengthSize=4,f.paddingLengthSize=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshSessionAlgorithms=void 0;t.SshSessionAlgorithms=class{dispose(){this.cipher&&this.cipher.dispose(),this.decipher&&this.decipher.dispose(),this.signer&&this.signer.dispose(),this.verifier&&this.verifier.dispose()}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SshClientSession=void 0;const i=n(139),r=n(60),s=n(240),o=n(91),a=n(92),c=n(137),l=n(239),u=n(141),h=n(47),d=n(59);class p extends i.SshSession{constructor(e){super(e,!0),this.serviceRequests=new Map,this.clientAuthCompletion=null}async authenticate(e,t){if(!await this.authenticateServer(t))return!1;return!!await this.authenticateClient(e,t)}async authenticateServer(e){if(!this.kexService||!this.kexService.hostKey)throw new Error("Encrypt the session before authenticating.");try{this.principal=await this.raiseAuthenticatingEvent(new s.SshAuthenticatingEventArgs(s.SshAuthenticationType.serverPublicKey,{publicKey:this.kexService.hostKey},e))}catch(e){if(!(e instanceof Error))throw e;throw this.trace(d.TraceLevel.Error,d.SshTraceEventIds.authenticationError,"Error while authenticating server: "+e.message,e),e}return this.principal?(this.trace(d.TraceLevel.Info,d.SshTraceEventIds.sessionAuthenticated,this+" server authenticated."),!0):(await this.close(r.SshDisconnectReason.hostKeyNotVerifiable,"Server authentication failed."),this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.serverAuthenticationFailed,this+" server authentication failed."),!1)}authenticateClient(e,t,n){if(!e)throw new TypeError("A credentials object is required.");return"function"==typeof t?this.authenticateClientWithCompletion(e,t,n):new Promise(async(n,i)=>{await this.authenticateClientWithCompletion(e,(e,t)=>{e?i(e):n(t)},t)})}async authenticateClientWithCompletion(e,t,n){if(this.clientAuthCompletion=new o.PromiseCompletionSource,this.clientAuthCompletion.promise.then(e=>t(void 0,e),e=>t(e)),n){if(n.isCancellationRequested)throw new a.CancellationError;n.onCancellationRequested(e=>{this.clientAuthCompletion&&this.clientAuthCompletion.reject(new a.CancellationError)})}let i=this.getService(l.AuthenticationService);if(!i){const e=new r.ServiceRequestMessage;e.serviceName=l.AuthenticationService.serviceName,await this.sendMessage(e,n),i=this.activateService(l.AuthenticationService)}await i.authenticateClient(e,n)}onAuthenticationComplete(e){e?this.trace(d.TraceLevel.Info,d.SshTraceEventIds.sessionAuthenticated,this+" client authenticated."):this.trace(d.TraceLevel.Warning,d.SshTraceEventIds.clientAuthenticationFailed,this+" client authentication failed."),this.clientAuthCompletion&&(this.clientAuthCompletion.resolve(e),this.clientAuthCompletion=null)}async requestService(e,t){let n=!1,i=this.serviceRequests.get(e);if(i||(i=new o.PromiseCompletionSource,this.serviceRequests.set(e,i),n=!0),n){const n=new r.ServiceRequestMessage;n.serviceName=e,await this.sendMessage(n,t)}await i.promise}async handleServiceAcceptMessage(e,t){const n=this.serviceRequests.get(e.serviceName);null==n||n.resolve(!0)}async openChannel(e,t,n){if(!this.connectionService){const e=new r.ServiceRequestMessage;e.serviceName=u.ConnectionService.serviceName,await this.sendMessage(e,n)}return await super.openChannel(e,t,n)}handleDisconnected(){return this.reconnecting?(this.reconnecting=!1,!1):super.handleDisconnected()}async reconnect(e,t){if(this.trace(d.TraceLevel.Verbose,d.SshTraceEventIds.clientSessionReconnecting,"Attempting to reconnect..."),this.isClosed)throw new h.ObjectDisposedError(this);if(this.isConnected)throw new Error("Already connected.");if(!this.protocol)throw new Error("The session was never previously connected.");if(this.reconnecting)throw new Error("Already reconnecting.");this.reconnecting=!0;try{await this.reconnectInternal(e,t)}finally{this.reconnecting=!1}}async reconnectInternal(t,n){var i,s,o,a,l,u;const p=this.sessionId,f=this.protocol,g=null===(i=this.kexService)||void 0===i?void 0:i.hostKey;if(!(p&&f&&this.kexService&&g&&(null===(s=f.extensions)||void 0===s?void 0:s.has(c.SshProtocolExtensionNames.sessionReconnect))))throw new Error("Reconnect was not enabled for this session.");let m;try{if(this.sessionId=null,await this.connect(t,n),!this.sessionId||!this.algorithms||!this.algorithms.signer)throw new Error("Session is not encrypted.");const e=this.kexService.hostKey,i=e?await e.getPublicKeyBytes():null,s=await g.getPublicKeyBytes();if(!i||!s||!i.equals(s)){const e="The server host key is different.";throw this.trace(d.TraceLevel.Error,d.SshTraceEventIds.clientSessionReconnectFailed,"Reconnection failed: "+e),new h.SshReconnectError(e,r.SshReconnectFailureReason.differentServerHostKey)}m=this.sessionId}catch(e){throw this.protocol=f,super.handleDisconnected(),e}finally{this.sessionId=p,this.kexService.hostKey=g}const y=await this.createReconnectToken(p,m),v=new r.SessionReconnectRequestMessage;v.requestType="session-reconnect@microsoft.com",v.clientReconnectToken=y,v.lastReceivedSequenceNumber=f.lastIncomingSequence,v.wantReply=!0;const S=await this.requestResponse(v,r.SessionReconnectResponseMessage,r.SessionReconnectFailureMessage,n);if(S instanceof r.SessionReconnectFailureMessage){const e=null!==(o=S.reasonCode)&&void 0!==o?o:r.SshReconnectFailureReason.unknownServerFailure,t=null!==(a=S.description)&&void 0!==a?a:"The server rejected the reconnect request.";throw this.trace(d.TraceLevel.Error,d.SshTraceEventIds.clientSessionReconnectFailed,"Reconnection failed: "+t),this.protocol=f,new h.SshReconnectError(t,e)}if(!this.verifyReconnectToken(p,m,null!==(l=S.serverReconnectToken)&&void 0!==l?l:e.alloc(0))){const e="The reconnect token provided by the server was invalid.";throw this.trace(d.TraceLevel.Error,d.SshTraceEventIds.clientSessionReconnectFailed,"Reconnection failed: "+e),new h.SshReconnectError(e,r.SshReconnectFailureReason.invalidServerReconnectToken)}this.trace(d.TraceLevel.Info,d.SshTraceEventIds.clientSessionReconnecting,"Reconnect request was accepted by the server.");const w=f.getSentMessages((null!==(u=S.lastReceivedSequenceNumber)&&void 0!==u?u:0)+1);if(!w){const e="Client is unable to re-send messages requested by the server.";throw this.trace(d.TraceLevel.Error,d.SshTraceEventIds.clientSessionReconnectFailed,"Reconnection failed: "+e),new h.SshReconnectError(e,r.SshReconnectFailureReason.clientDroppedMessages)}let C=0;for(let e of w)await this.sendMessage(e,n),C++;f.dispose(),this.metrics.addReconnection(),this.trace(d.TraceLevel.Info,d.SshTraceEventIds.clientSessionReconnecting,`Reconnected. Re-sent ${C} dropped messages.`)}dispose(){this.clientAuthCompletion&&this.clientAuthCompletion.reject(new h.ObjectDisposedError(this)),super.dispose()}}t.SshClientSession=p}).call(this,n(6).Buffer)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SshServerSession=void 0;const i=n(139),r=n(4),s=n(60),o=n(47),a=n(137),c=n(59);class l extends i.SshSession{constructor(e,t){super(e,!1),this.clientAuthenticatedEmitter=new r.Emitter,this.onClientAuthenticated=this.clientAuthenticatedEmitter.event,this.reconnectedEmitter=new r.Emitter,this.onReconnected=this.reconnectedEmitter.event,this.credentials={publicKeys:[]};const n=e.protocolExtensions.includes(a.SshProtocolExtensionNames.sessionReconnect);if(n&&!t)throw new Error("When reconnect is enabled, server sessions require a reference to a shared collection to track reconnectable sessions.");if(!n&&t)throw new Error("When reconnect is not enabled, the reconnectable sessions collection is not applicable.");this.reconnectableSessions=t}async handleServiceRequestMessage(e,t){if(!this.activateService(e.serviceName))throw new o.SshConnectionError(`Service "${e.serviceName}" not available.`,s.SshDisconnectReason.serviceNotAvailable);{const n=new s.ServiceAcceptMessage;n.serviceName=e.serviceName,await this.sendMessage(n,t)}}async handleRequestMessage(e,t){var n;if("session-reconnect@microsoft.com"===e.requestType&&(null===(n=this.config.protocolExtensions)||void 0===n?void 0:n.includes(a.SshProtocolExtensionNames.sessionReconnect))){const n=e.convertTo(new s.SessionReconnectRequestMessage);await this.reconnect(n,t)}else await super.handleRequestMessage(e,t)}handleClientAuthenticated(){this.clientAuthenticatedEmitter.fire()}async enableReconnect(e){await super.enableReconnect(e),this.reconnectableSessions.includes(this)||this.reconnectableSessions.push(this)}handleDisconnected(){return!!this.reconnecting||super.handleDisconnected()}async reconnect(t,n){var i,r,o;if(!this.reconnectableSessions)throw new Error("Disconnected sessions collection should have been initialied when reconnect is enabled.");let a;for(let n of this.reconnectableSessions)if(n!==this&&await this.verifyReconnectToken(n.sessionId,this.sessionId,null!==(i=t.clientReconnectToken)&&void 0!==i?i:e.alloc(0))){a=n,this.reconnectableSessions.splice(this.reconnectableSessions.indexOf(a),1);break}if(!a||a.isClosed){const e="Requested reconnect session was not found or the reconnect token provided by the client was invalid.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,"Reconnect failed: "+e);const t=new s.SessionReconnectFailureMessage;return t.reasonCode=s.SshReconnectFailureReason.sessionNotFound,t.description=e,void await this.sendMessage(t,n)}const l=a.protocol.getSentMessages((null!==(r=t.lastReceivedSequenceNumber)&&void 0!==r?r:0)+1);if(!l){this.reconnectableSessions.push(a);const e="Server is unable to re-send messages requested by the client.";this.trace(c.TraceLevel.Error,c.SshTraceEventIds.serverSessionReconnectFailed,"Reconnect failed: "+e);const t=new s.SessionReconnectFailureMessage;return t.reasonCode=s.SshReconnectFailureReason.serverDroppedMessages,t.description=e,void await this.sendMessage(t,n)}const u=new s.SessionReconnectResponseMessage;u.serverReconnectToken=await this.createReconnectToken(a.sessionId,this.sessionId),u.lastReceivedSequenceNumber=a.protocol.lastIncomingSequence,await this.sendMessage(u,n);try{for(a.reconnecting=!0,null===(o=a.protocol)||void 0===o||o.dispose();a.isConnected;)await new Promise(e=>setTimeout(()=>e(),5));a.protocol=this.protocol,a.protocol.kexService=a.kexService,this.protocol=void 0;for(let e of l)await a.sendMessage(e,n);this.dispose()}finally{a.reconnecting=!1}this.reconnectableSessions.push(a),a.metrics.addReconnection(),a.processMessages().catch(e=>{this.trace(c.TraceLevel.Error,c.SshTraceEventIds.unknownError,"Unhandled error processing messages: "+e.message,e)}),this.trace(c.TraceLevel.Info,c.SshTraceEventIds.serverSessionReconnecting,`Session reconnected. Re-sent ${l.length} dropped messages.`),a.reconnectedEmitter.fire()}dispose(){if(this.reconnectableSessions){const e=this.reconnectableSessions.indexOf(this);e>=0&&this.reconnectableSessions.splice(e,1)}super.dispose()}}t.SshServerSession=l}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketStream=t.NodeStream=t.BaseStream=void 0;const i=n(6),r=n(4),s=n(92),o=n(47);function a(e,t){t&&(t.isCancellationRequested?e(new s.CancellationError):t.onCancellationRequested(()=>{e(new s.CancellationError)}))}class c{constructor(){this.incomingData=[],this.pendingReads=[],this.error=null,this.disposed=!1,this.closedEmitter=new r.Emitter,this.closed=this.closedEmitter.event}onData(e){for(;this.pendingReads.length>0;){const t=this.pendingReads.shift();if(t.count>=e.length)return void t.resolve(e);{const n=e.slice(0,t.count);e=e.slice(t.count),t.resolve(n)}}this.incomingData.push(e)}onEnd(){for(;this.pendingReads.length>0;){this.pendingReads.shift().resolve(null)}this.incomingData.push(i.Buffer.alloc(0))}onError(e){for(this.error||(this.error=e);this.pendingReads.length>0;){this.pendingReads.shift().reject(e)}}async read(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(this.incomingData.length>0){let t=this.incomingData[0];return 0===t.length?null:(e>=t.length?this.incomingData.shift():(this.incomingData[0]=t.slice(e),t=t.slice(0,e)),t)}if(this.error)throw this.error;return await new Promise((n,i)=>{if(t){if(t.isCancellationRequested)return void i(new s.CancellationError);t.onCancellationRequested(()=>{for(let e=0;e<this.pendingReads.length;e++)if(Object.is(t,this.pendingReads[e].cancellation)){this.pendingReads.splice(e--,1)[0].reject(new s.CancellationError)}})}this.pendingReads.push({count:e,resolve:n,reject:i,cancellation:t})})}dispose(){if(!this.disposed){this.disposed=!0;const e=new o.ObjectDisposedError(this);this.onError(e),this.fireOnClose(e)}}fireOnClose(e){this.closedEmitter.fire({error:e})}get isDisposed(){return this.disposed}}t.BaseStream=c;t.NodeStream=class extends c{constructor(e,t){if(super(),!e)throw new TypeError("Duplex or Readable/Writable stream are required.");this.readStream=e,this.writeStream=t||e,this.readStream.on("data",this.onData.bind(this)),this.readStream.on("end",this.onEnd.bind(this)),this.readStream.on("error",this.onError.bind(this)),this.readStream.on("close",()=>{this.onEnd(),this.fireOnClose()})}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);return new Promise((n,i)=>{a(i,t),this.writeStream.write(e,e=>{e?i(e):n()})})}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);await new Promise((e,n)=>{a(n,t),this.writeStream.end(e)}),this.disposed=!0,this.onError(e||new o.ObjectDisposedError(this)),this.closedEmitter.fire({error:e})}dispose(){if(!this.disposed){const e=new o.ObjectDisposedError(this);this.readStream.destroy(e),this.writeStream.destroy(e)}super.dispose()}};t.WebSocketStream=class extends c{constructor(e){if(super(),this.websocket=e,!e)throw new TypeError("WebSocket is required.");if("string"==typeof e.binaryType&&"arraybuffer"!==e.binaryType)throw new Error("WebSocket must use arraybuffer binary type.");e.onmessage=e=>{this.onData(i.Buffer.from(e.data))},e.onclose=e=>{if(e.wasClean)this.onEnd();else{const t=new Error(e.reason);t.code=e.code,this.onError(t)}}}async write(e,t){if(!e)throw new TypeError("Data is required.");if(this.disposed)throw new o.ObjectDisposedError(this);if("readyState"in this.websocket&&(2===this.websocket.readyState||3===this.websocket.readyState))throw new DOMException("WebSocket is already in CLOSING or CLOSED state.","InvalidStateError");this.websocket.send(e)}async close(e,t){if(this.disposed)throw new o.ObjectDisposedError(this);if(e){const t="number"==typeof e.code?e.code:void 0;this.websocket.close(t,e.message)}else this.websocket.close();this.disposed=!0,this.closedEmitter.fire({error:e}),this.onError(e||new Error("Stream closed."))}dispose(){this.disposed||this.websocket.close(),super.dispose()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SshRpcMessageStream=void 0;const i=n(4),r=n(6),s=n(38);class o{constructor(e){this.channel=e,this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter,this.callback=null,this.messageBuffer=new s.SshDataWriter(r.Buffer.alloc(1024)),this.headersLength=null,this.messageLength=null,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.onPartialMessage=this.partialMessageEmitter.event,this.eventRegistration=this.channel.onDataReceived(this.onDataReceived.bind(this)),this.channel.onClosed(e=>{e.error&&this.errorEmitter.fire(e.error),this.closeEmitter.fire()})}listen(e){this.callback=e}dispose(){this.eventRegistration&&this.eventRegistration.dispose()}onDataReceived(e){if(this.messageBuffer.write(e),this.channel.adjustWindow(e.length),e=this.messageBuffer.toBuffer(),null===this.messageLength){const t=e.indexOf("\r\n\r\n");if(t<0)return;const n=e.slice(0,t).toString();if(!n.startsWith("Content-Length: "))throw new Error("Message does not start with JSON-RPC headers.\n"+n);this.headersLength=t+"\r\n\r\n".length,this.messageLength=parseInt(n.substr("Content-Length: ".length,t-"Content-Length: ".length),10)}const t=this.messageBuffer.position,n=this.headersLength+this.messageLength;if(t>=n){if(this.callback){const t=e.slice(this.headersLength,n).toString();let i;try{i=JSON.parse(t)}catch(e){if(!(e instanceof Error))throw e;throw new Error(`Failed to parse JSON-RPC message: ${e.message}\n${t}`)}this.callback(i)}this.messageLength=null,this.messageBuffer.position=0,t>n&&this.onDataReceived(e.slice(n))}}}class a{constructor(e){this.channel=e,this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.onError=this.errorEmitter.event,this.onClose=this.closeEmitter.event,this.channel.onClosed(e=>{e.error&&this.errorEmitter.fire([e.error,e.errorMessage&&{jsonrpc:e.errorMessage}||void 0,e.exitStatus]),this.closeEmitter.fire()})}write(e){const t=JSON.stringify(e),n=r.Buffer.from(t),i=r.Buffer.from("Content-Length: "+n.length+"\r\n\r\n"),s=r.Buffer.alloc(i.length+n.length);i.copy(s,0),n.copy(s,i.length),this.channel.send(s).catch(e=>{this.errorEmitter.fire([e,void 0,void 0])})}dispose(){}}t.SshRpcMessageStream=class{constructor(e){this.reader=new o(e),this.writer=new a(e)}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionContour=void 0;const i=n(47),r=n(178),s=n(140);class o{constructor(e=256){if(this.intervalMs=o.initialInterval,this.count=0,this.updateQueue=new r.Queue,this.updateSemaphore=new s.Semaphore(0),this.disposed=!1,e<2||0!=(e&e-1))throw new Error("Contour intervals must be a power of two.");this.maxIntervals=e,this.intervalBytesSent=new Array(e),this.intervalBytesReceived=new Array(e),this.intervalLatencyMin=new Array(e),this.intervalLatencyMax=new Array(e),this.intervalLatencySum=new Array(e),this.intervalLatencyCount=new Array(e),this.intervalLatencyAvg=new Array(e),this.intervalBytesSent.fill(0),this.intervalBytesReceived.fill(0),this.intervalLatencyMin.fill(0),this.intervalLatencyMax.fill(0),this.intervalLatencySum.fill(0),this.intervalLatencyCount.fill(0),this.intervalLatencyAvg.fill(0)}get intervalCount(){return this.count}get interval(){return this.intervalMs}get bytesSent(){return this.intervalBytesSent.slice(0,this.count)}get bytesReceived(){return this.intervalBytesReceived.slice(0,this.count)}get latencyMinMs(){return this.intervalLatencyMin.slice(0,this.count)}get latencyMaxMs(){return this.intervalLatencyMax.slice(0,this.count)}get latencyAverageMs(){return this.intervalLatencyAvg.slice(0,this.count)}onMessageSent(e){this.updateQueue.enqueue({time:e.time,bytesSent:e.size}),this.updateSemaphore.tryRelease()}onMessageReceived(e){this.updateQueue.enqueue({time:e.time,bytesReceived:e.size}),this.updateSemaphore.tryRelease()}onLatencyUpdated(e){this.updateQueue.enqueue(e),this.updateSemaphore.tryRelease()}onSessionClosed(){this.updateSemaphore.tryRelease()}async collectMetrics(e,t){if(!e)throw new TypeError("A session metrics object is required.");if(this.disposed)throw new i.ObjectDisposedError(this);const n=[];n.push(e.onMessageSent(this.onMessageSent.bind(this))),n.push(e.onMessageReceived(this.onMessageReceived.bind(this))),n.push(e.onLatencyUpdated(this.onLatencyUpdated.bind(this))),n.push(e.onSessionClosed(this.onSessionClosed.bind(this)));try{for(;!(null==t?void 0:t.isCancellationRequested);){try{await this.updateSemaphore.wait(t)}catch(e){break}const e=this.updateQueue.dequeue();if(!e)break;const n=this.updateInterval(e.time);e.bytesSent&&(this.intervalBytesSent[n]+=e.bytesSent),e.bytesReceived&&(this.intervalBytesReceived[n]+=e.bytesReceived);const i=e.latency;i&&((!this.intervalLatencyMin[n]||i<this.intervalLatencyMin[n])&&(this.intervalLatencyMin[n]=i),(!this.intervalLatencyMax[n]||i>this.intervalLatencyMax[n])&&(this.intervalLatencyMax[n]=i),this.intervalLatencySum[n]+=i,this.intervalLatencyCount[n]++,this.intervalLatencyAvg[n]=this.intervalLatencySum[n]/this.intervalLatencyCount[n])}this.disposed&&this.updateSemaphore.dispose()}finally{for(let e of n)e.dispose()}}updateInterval(e){let t=Math.floor(e/this.intervalMs);if(t>=this.intervalCount){for(;t>=this.maxIntervals;)this.expandIntervals(),t=Math.floor(e/this.intervalMs);this.count=t+1}return t}expandIntervals(){const e=(e,t,n)=>0===e?t:0===t?e:n(e,t),t=this.maxIntervals/2;for(let n=0;n<t;n++){const t=2*n,i=2*n+1;this.intervalBytesSent[n]=this.intervalBytesSent[t]+this.intervalBytesSent[i],this.intervalBytesReceived[n]=this.intervalBytesReceived[t]+this.intervalBytesReceived[i],this.intervalLatencyMin[n]=e(this.intervalLatencyMin[t],this.intervalLatencyMin[i],Math.min),this.intervalLatencyMax[n]=e(this.intervalLatencyMax[t],this.intervalLatencyMax[i],Math.max),this.intervalLatencySum[n]=this.intervalLatencySum[t]+this.intervalLatencySum[i];const r=this.intervalLatencyCount[t]+this.intervalLatencyCount[i];this.intervalLatencyCount[n]=r,this.intervalLatencyAvg[n]=0===r?0:this.intervalLatencySum[n]/this.intervalLatencyCount[n]}this.intervalBytesSent.fill(0,t,this.maxIntervals),this.intervalBytesReceived.fill(0,t,this.maxIntervals),this.intervalLatencyMin.fill(0,t,this.maxIntervals),this.intervalLatencyMax.fill(0,t,this.maxIntervals),this.intervalLatencySum.fill(0,t,this.maxIntervals),this.intervalLatencyCount.fill(0,t,this.maxIntervals),this.intervalLatencyAvg.fill(0,t,this.maxIntervals),this.intervalMs*=2}dispose(){this.disposed=!0,this.updateSemaphore.tryRelease()}export(){const t=e=>Math.max(0,Math.ceil(Math.log2(Math.max(...e)/255))),n=(e,t)=>Math.round(e/Math.pow(2,t)),i=e.alloc(3+5*(2+this.intervalCount)),r=Math.log2(this.interval/o.initialInterval);i[0]=1,i[1]=5,i[2]=r,i[3]=t(this.latencyMinMs),i[4]=t(this.latencyMaxMs),i[5]=t(this.latencyAverageMs),i[6]=t(this.bytesSent),i[7]=t(this.bytesReceived),i[8]=a.latencyMin,i[9]=a.latencyMax,i[10]=a.latencyAverage,i[11]=a.bytesSent,i[12]=a.bytesReceived;for(let e=0;e<this.intervalCount;e++){const t=13+5*e;i[t+0]=n(this.intervalLatencyMin[e],i[3]),i[t+1]=n(this.intervalLatencyMax[e],i[4]),i[t+2]=n(this.intervalLatencyAvg[e],i[5]),i[t+3]=n(this.intervalBytesSent[e],i[6]),i[t+4]=n(this.intervalBytesReceived[e],i[7])}return i.toString("base64")}static import(t){const n=e.from(t,"base64");if(n.length<3)throw new Error("Invalid session contour string.");const i=n[0],r=n[1],s=n[2];if(1!==i)throw new Error("Unsupported session contour version: "+i);const c=(n.length-3)/r-2;if(c<1||n.length!==3+r*(c+2))throw new Error("Incomplete session contour string.");const l=Math.pow(2,Math.ceil(Math.log2(c))),u=new o(l);u.intervalMs=Math.pow(2,s)*o.initialInterval,u.count=c;const h=new Array(r);for(let e=0;e<r;e++)h[e]=Math.pow(2,n[3+e]);const d=new Array(r);for(let e=0;e<r;e++)d[e]=n[3+r+e];for(let e=0;e<c;e++){const t=3+(2+e)*r;for(let i=0;i<r;i++)switch(d[i]){case a.latencyMin:u.intervalLatencyMin[e]=n[t+i]*h[i];break;case a.latencyMax:u.intervalLatencyMax[e]=n[t+i]*h[i];break;case a.latencyAverage:u.intervalLatencyAvg[e]=u.intervalLatencySum[e]=n[t+i]*h[i],u.intervalLatencyCount[e]=0===n[t+i]?0:1;break;case a.bytesSent:u.intervalBytesSent[e]=n[t+i]*h[i];break;case a.bytesReceived:u.intervalBytesReceived[e]=n[t+i]*h[i]}}return u}}var a;t.SessionContour=o,o.initialInterval=1e3,function(e){e[e.none=0]="none",e[e.latencyMin=1]="latencyMin",e[e.latencyMax=2]="latencyMax",e[e.latencyAverage=3]="latencyAverage",e[e.bytesSent=11]="bytesSent",e[e.bytesReceived=12]="bytesReceived"}(a||(a={}))}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannelStream=void 0;const i=n(4),r=n(347),s=n(139),o=n(137),a=n(60),c=n(141),l=n(59);t.MultiChannelStream=class{constructor(e){if(this.transportStream=e,this.disposed=!1,this.disposables=[],this.closedEmitter=new i.Emitter,this.onClosed=this.closedEmitter.event,this.channelOpeningEmitter=new i.Emitter,!e)throw new TypeError("transportStream is required.");const t=new o.SshSessionConfiguration(!1);this.session=new s.SshSession(t),this.session.onClosed(this.onSessionClosed,this,this.disposables),this.session.onChannelOpening(this.onSessionChannelOpening,this,this.disposables)}get trace(){return this.session.trace}set trace(e){this.session.trace=e}get isClosed(){return this.disposed||this.session.isClosed}get onChannelOpening(){return this.isClosed||this.session.activateService(c.ConnectionService),this.channelOpeningEmitter.event}async connect(e){await this.session.connect(this.transportStream,e)}async acceptChannel(e,t){await this.session.connect(this.transportStream,t);return await this.session.acceptChannel(e,t)}async acceptStream(e,t){return new r.SshStream(await this.acceptChannel(e,t))}async openChannel(e,t){await this.session.connect(this.transportStream,t);return await this.session.openChannel(null!=e?e:null,t)}async openStream(e,t){return new r.SshStream(await this.openChannel(e,t))}async connectAndRunUntilClosed(e){const t=[],n=new Promise((n,i)=>{null==e||e.onCancellationRequested(i,null,t),this.session.onClosed(n,null,t)});try{await this.connect(e),await n}finally{t.forEach(e=>e.dispose()),await this.close()}}dispose(){if(!this.disposed){this.disposed=!0,this.session.dispose(),this.unsubscribe();try{this.transportStream&&this.transportStream.close().catch(e=>{this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,"Error closing transport stream: "+e.message,e)})}catch(e){if(!(e instanceof Error))throw e;this.trace(l.TraceLevel.Error,l.SshTraceEventIds.streamCloseError,"Error closing transport stream: "+e.message,e)}}}async close(){this.disposed||(this.disposed=!0,await this.session.close(a.SshDisconnectReason.none,"SshSession disposed"),this.session.dispose(),this.unsubscribe(),await this.transportStream.close())}onSessionClosed(e){this.unsubscribe(),this.closedEmitter.fire(e)}onSessionChannelOpening(e){this.channelOpeningEmitter.fire(e)}unsubscribe(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workspaceServiceClient=void 0,t.workspaceServiceClient={name:"workspaceServiceClient",methods:["getSessionInfo","join","disconnect","openStreamingChannel","keepAlive","checkConnection","setCheckConnectionOptions"],events:["hostConnectionChanged","workspaceMetricsUpdated"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayConnectionError=t.RelayErrorType=t.NoHostConnectedError=void 0;class i extends Error{constructor(e){super("Host not connected to workspace:"+e),this.workspaceId=e}}t.NoHostConnectedError=i,function(e){e[e.ConnectionError=1]="ConnectionError",e[e.SasInvalid=2]="SasInvalid",e[e.EndpointNotFound=3]="EndpointNotFound",e[e.ListenerOffline=4]="ListenerOffline",e[e.ServerError=5]="ServerError"}(t.RelayErrorType||(t.RelayErrorType={}));class r extends Error{constructor(e,t){super(e),this.errorContext=t}}t.RelayConnectionError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RPC_ERR_RELAY_CONNECTIONY_SSH=t.RPC_ERR_NO_HOST_NOT_CONNECTED=void 0,t.RPC_ERR_NO_HOST_NOT_CONNECTED=270,t.RPC_ERR_RELAY_CONNECTIONY_SSH=271},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryPropertyNames=t.TelemetryEventNames=void 0;class i{}t.TelemetryEventNames=i,i.WORKSPACE_RECONNECT="workspace-reconnect";class r{}t.TelemetryPropertyNames=r,r.RECONNECT_SUCCEEDED="reconnect-succeeded",r.RECONNECT_ELAPSED="reconnect-elapsed",r.RECONNECT_RETRY_COUNT="reconnect-retry-count",r.RECONNECT_ERROR_MESSAGE="reconnect-error-message",r.RECONNECT_ERROR_REASON="reconnect-error-reason"},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceClientBase=void 0;const o=s(n(4)),a=n(0),c=n(349),l=n(31);class u extends a.DisposableClass{constructor(e,t){super(t),this.rcpClientInstance=e,this.onHostConnectionChangedEmitter=new o.Emitter,this.onHostConnectionChanged=this.onHostConnectionChangedEmitter.event,this.onWorkspaceMetricsUpdatedEmitter=new o.Emitter,this.onWorkspaceMetricsUpdated=this.onWorkspaceMetricsUpdatedEmitter.event,this.rpcProxyCache=new l.RpcProxyCache(this.rcpClientInstance,t),this.addToDisposables(a.createDisposable(()=>{this.stopCheckConnection("disposed")}))}get rpcClient(){return this.rcpClientInstance}getServiceProxy(e,t){return this.rpcProxyCache.getOrCreate(e,t)}setCheckConnectionOptions(e){return e.enabled&&void 0===this.checkConnectionDisposable&&!this.isDisposed?(this.ensureIsJoined(),this.checkConnectionDisposable=c.checkWorkspaceClient(this,this.trace,e.metricsTimeout,e.checkConnectionTimeout,()=>this.canCheckConnection())):e.enabled||this.stopCheckConnection("connection options"),Promise.resolve()}ensureIsJoined(){}canCheckConnection(){return!0}stopCheckConnection(e){this.trace.info(`stopCheckConnection reason:'${e}'`),void 0!==this.checkConnectionDisposable&&(this.checkConnectionDisposable.dispose(),this.checkConnectionDisposable=void 0)}}t.WorkspaceClientBase=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=t.SshHelpers=t.WorkspaceClient=void 0;var i=n(579);Object.defineProperty(t,"WorkspaceClient",{enumerable:!0,get:function(){return i.WorkspaceClient}});var r=n(350);Object.defineProperty(t,"SshHelpers",{enumerable:!0,get:function(){return r.SshHelpers}}),Object.defineProperty(t,"isNode",{enumerable:!0,get:function(){return r.isNode}})},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceClient=void 0;const a=s(n(23)),c=n(0),l=n(31),u=n(36),h=n(10),d=n(580),p=n(49);class f extends u.WorkspaceClientBase{constructor(e,t,n){super(new l.RpcClient({create:e=>this.rpcConnected.promise},e),e),this.socketStreamFactory=t,this.sshReconnectOptions=n,this.checkConnectionMutex=new c.Mutex,this.rpcConnected=new c.Signal}join(e){var t;return o(this,void 0,void 0,(function*(){const n=null!==(t=e.performance)&&void 0!==t?t:{measure:(e,t)=>t()};c.assertDefined(e.connectionInfo||e.sessionInfoFactory||0!==e.liveShareEndpoint.length,"join connect options expected");const i=yield this.getSessionInfo(e,n);if(!1===i.isHostConnected)throw new u.NoHostConnectedError(e.workspaceId);this.sshWorkspaceSession=yield this.createWorkspaceSession(n,i),n.measure({id:"ssh-auth-completion",name:"Ssh auth completion"},()=>this.sshWorkspaceSession.authCompletion).catch(e=>{this.trace.error("auth failed")}),this.addToDisposables(this.sshWorkspaceSession);const r=this.sshWorkspaceSession.sshSession,s=(e,t,n)=>{this.onWorkspaceMetricsUpdatedEmitter.fire({bytesIn:e,bytesOut:t,latency:n})};null==r||r.metrics.onMessageReceived(()=>{s(r.metrics.bytesReceived,void 0,void 0)}),null==r||r.metrics.onMessageSent(()=>{s(void 0,r.metrics.bytesSent,void 0)}),null==r||r.metrics.onLatencyUpdated(()=>{const e=new u.LatencyMetrics(r.metrics.latencyCurrentMs,r.metrics.latencyAverageMs,r.metrics.latencyMinMs,r.metrics.latencyMaxMs);s(void 0,void 0,e)}),this.trace.info("join started");const{clientVersionInfo:o,workspaceJoinInfo:a,clientCapabilities:l}=e,h=n.measure({id:"join-internal",name:"Joining the workspace"},()=>this.joinInternal(i,null!=o?o:{},a,l));return yield Promise.all([this.sshWorkspaceSession.authCompletion,h]),this.onWorkspaceSessionConnectionChange(e),e.checkConnectionOptions&&(yield this.setCheckConnectionOptions(e.checkConnectionOptions)),this.workspaceSessionInfo}))}ensureIsJoined(){c.assertDefined(this.sshWorkspaceSession,"Ssh session not initiated yet")}canCheckConnection(){var e;return!1===(null===(e=this.sshWorkspaceSession)||void 0===e?void 0:e.isReconnecting)}createWorkspaceSession(e,t){return o(this,void 0,void 0,(function*(){return yield e.measure({id:"createSshWorkspaceSession",name:"Creating the ssh workspace session"},()=>d.SshWorkspaceSessionFactory.createSshWorkspaceSession(t,this.trace,this.socketStreamFactory,this.sshReconnectOptions))}))}onWorkspaceSessionConnectionChange(e){var t;const n=(t,n)=>{var i;const r=new p.TelemetryEvent(u.TelemetryEventNames.WORKSPACE_RECONNECT),s=e.telemetryProperties;if(s&&Object.keys(s).forEach(e=>r.addProperty(e,s[e])),r.addProperty(p.TelemetryPropertyNames.FEATURE_NAME+u.TelemetryPropertyNames.RECONNECT_SUCCEEDED,void 0===n.error),r.addProperty(p.TelemetryPropertyNames.FEATURE_NAME+u.TelemetryPropertyNames.RECONNECT_ELAPSED,t),r.addProperty(p.TelemetryPropertyNames.FEATURE_NAME+u.TelemetryPropertyNames.RECONNECT_RETRY_COUNT,n.retryCount),void 0!==n.error){if(n.error instanceof a.SshReconnectError){const e=null!==(i=n.error.reason)&&void 0!==i?i:a.SshReconnectFailureReason.unknownClientFailure;r.addProperty(p.TelemetryPropertyNames.FEATURE_NAME+u.TelemetryPropertyNames.RECONNECT_ERROR_REASON,e)}r.addProperty(p.TelemetryPropertyNames.FEATURE_NAME+u.TelemetryPropertyNames.RECONNECT_ERROR_MESSAGE,n.error.message)}r.send()};let i;null===(t=this.sshWorkspaceSession)||void 0===t||t.onConnectedStateChanged(e=>{const t=i?Date.now()-i:0;e.state===u.ConnectedState.Reconnecting?i=Date.now():(e.state===u.ConnectedState.Reconnected||e.state===u.ConnectedState.Closed)&&(i&&n(t,e),i=void 0),this.onHostConnectionChangedEmitter.fire({state:e.state,duration:t})}),this.trace.info("join completed")}disconnect(){return o(this,void 0,void 0,(function*(){if(this.workspaceSessionInfo){const e=this.workspaceSessionInfo;this.workspaceSessionInfo=void 0,this.trace.info("unjoing"),yield this.getServiceProxy(h.vsls.WorkspaceService).unjoinWorkspaceAsync(e.id),this.dispose("disconnect")}}))}getSessionInfo(e,t){return o(this,void 0,void 0,(function*(){return e.connectionInfo?e.connectionInfo:e.sessionInfoFactory?yield e.sessionInfoFactory(e.workspaceId):yield t.measure({id:"workspaceApi-getWorkspaceSessionInfo",name:"get workspace session info from liveshare"},()=>u.WorkspaceApi.getWorkspaceSessionInfo(e.workspaceId,e,this.trace.createChild("WorkspaceApi")))}))}joinInternal(e,t,n,i){return o(this,void 0,void 0,(function*(){const r=yield this.sshWorkspaceSession.createRpcMessageStream(),s=[],o=r.reader.listen.bind(r.reader);let a;r.reader.listen=e=>{a=e,o(t=>{!this.rpcConnected.isFulfilled&&t.hasOwnProperty("method")&&s.push(t),e(t)})};const c=this.rcpClientInstance.createRpcConnection(r,this.trace);c.listen();const l=this.getServiceProxyWithConnection(c,h.vsls.ConfigurationService),u=yield l.exchangeVersionsAsync({},t);this.trace.info("Host version: "+JSON.stringify(u)),i||((i=new h.vsls.ClientCapabilities).isNonInteractive=!1);let d={id:e.id,connectionMode:h.vsls.ConnectionMode.Local,joiningUserSessionToken:e.sessionToken,clientCapabilities:i};n&&(d=Object.assign(Object.assign({},d),n));const p=this.getServiceProxyWithConnection(c,{name:h.vsls.WorkspaceService.name,methods:h.vsls.WorkspaceService.methods,voidMethods:h.vsls.WorkspaceService.voidMethods,events:[]});this.workspaceSessionInfo=yield p.joinWorkspaceAsync(d),this.rpcConnected.resolve(c),s.forEach(e=>{a(e)}),this.trace.info(`joinWorkspace -> session:${this.workspaceSessionInfo.sessionNumber} conversation:${this.workspaceSessionInfo.conversationId} join messages count:${s.length}`)}))}getServiceProxyWithConnection(e,t){return l.RpcProxy.createWithConnection(t,e,this.trace)}openStreamingChannel(e,t){return o(this,void 0,void 0,(function*(){c.assertDefined(this.sshWorkspaceSession,"Ssh session not initiated yet"),this.trace.info("openStreamingChannel -> streamId:"+e);return yield this.sshWorkspaceSession.openStreamingChannel(e,t)}))}checkConnection(e){return o(this,void 0,void 0,(function*(){c.assertDefined(this.sshWorkspaceSession,"Ssh session not initiated yet"),this.trace.verbose("checking ssh connection");const t=this.sshWorkspaceSession.sshSession;c.assert(!t.isClosed,"ssh session is closed");const n=new a.SessionRequestMessage("ping-check-connection",!0);yield this.checkConnectionMutex.dispatch(()=>t.request(n,e))}))}}t.WorkspaceClient=f},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SshWorkspaceSessionFactory=void 0;const c=s(n(23)),l=n(0),u=n(350),h=n(586),d=a(n(317)),p=60*l.TIME_SECOND_MS,f=5*l.TIME_SECOND_MS,g=5*l.TIME_SECOND_MS;t.SshWorkspaceSessionFactory=class{static createSshWorkspaceSession(e,t,n,i){return o(this,void 0,void 0,(function*(){const r=n||u.SshHelpers.openConnection,s=t.createChild("ssh");d.default.enable(d.default.disable()+",vs-ssh"),"object"==typeof d.default.inspectOpts&&(d.default.inspectOpts.hideDate=!0);const a=d.default.log;d.default.log=function(...e){"vs-ssh"===this.namespace?s.info(e[0],...e.slice(1)):a()};const m=i||{enabled:!0};let y=yield r(e,t);const v=yield u.SshHelpers.createSshClientSession(),S=new c.PromiseCompletionSource;return t.verbose("authenticating..."),yield u.SshHelpers.authenticate(v,e,e,y,S),new h.SshWorkspaceSession(v,S.promise,t.createChild("SshWorkspaceSession"),m.enabled?()=>o(this,void 0,void 0,(function*(){const n=m.maxTimeReconnect||p,i=m.retryTimeout||f;t.info(`reconnect started maxTimeReconnect:${n} retryTimeout:${i}`);const s=Date.now();let o,a=1;for(;Date.now()-s<=n&&!v.isClosed;){try{y=yield r(e,t),t.info("reconnecting ssh session retryCount:"+a),yield l.timeoutPromise(v.reconnect(y),g,new Error("timeout on ssh reconnection")),t.info(`ssh session successfully reconnected on retryCount:${a} time:${(Date.now()-s).toFixed(1)}`),o=void 0;break}catch(e){if(o=e,e instanceof c.SshReconnectError){t.error("failed to reconnect ssh session: "+e.message);break}t.verbose(`failed to reconnect ssh session retryCount:${a} error:${e}`),yield l.wait(i)}++a}return o&&(t.error("unable to reconnect ssh session -> retryCount:"+a),v.dispose()),{retryCount:a,error:o}})):void 0)}))}}},function(e,t,n){var i;if("object"==typeof globalThis)i=globalThis;else try{i=n(582)}catch(e){}finally{if(i||"undefined"==typeof window||(i=window),!i)throw new Error("Could not determine global this")}var r=i.WebSocket||i.MozWebSocket,s=n(583);function o(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:s}},function(e,t){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(e,t,n){e.exports=n(584).version},function(e){e.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')},function(e){e.exports=JSON.parse('{"error.relayConnectionError":"Failed to connect to the codespace.","error.relayEndpointNotFound":"The relay endpoint for the codespace is invalid or no longer exists.","error.relayListenerOffline":"The codespace is currently offline.","error.relaySasInvalid":"Failed to connect to the codespace through the relay: invalid relay SAS.","error.relayServerError":"Failed to connect to the codespace due to an unknown relay error."}')},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SshWorkspaceSession=void 0;const a=n(4),c=s(n(23)),l=n(36),u=n(0);class h extends u.DisposableClass{constructor(e,t,n,i){super(n),this.sshSession=e,this.authCompletion=t,this.onConnectedStateChangedEmitter=new a.Emitter,this.isReconnectingFlag=!1,this.onConnectedStateChanged=this.onConnectedStateChangedEmitter.event,this.addToDisposables(e,e.onDisconnected(e=>{i?(this.isReconnectingFlag=!0,this.onConnectedStateChangedEmitter.fire({state:l.ConnectedState.Reconnecting,retryCount:0}),i().then(e=>{this.isReconnectingFlag=!1,this.onConnectedStateChangedEmitter.fire({state:void 0===e.error?l.ConnectedState.Reconnected:l.ConnectedState.Closed,retryCount:e.retryCount,error:e.error})}).catch(e=>{this.isReconnectingFlag=!1})):(this.isReconnectingFlag=!1,this.onConnectedStateChangedEmitter.fire({state:l.ConnectedState.Closed,retryCount:0}),this.dispose("auto reconnect disabled"))}))}get isReconnecting(){return this.isReconnectingFlag}createRpcMessageStream(){return o(this,void 0,void 0,(function*(){const e=new c.ChannelRequestMessage;e.requestType="json-rpc",e.wantReply=!0;const t=yield this.sshSession.openChannel(null,e);return new c.SshRpcMessageStream(t)}))}openStreamingChannel(e,t){return o(this,void 0,void 0,(function*(){if(!this.sshSession)throw new Error("Ssh session not initiated yet");const n=yield this.sshSession.openChannel(),i="stream-transport-"+e;if(!(yield n.request(new c.ChannelRequestMessage(i),t)))throw new Error("Failed to create stream transport channel with streamId - "+e);return n}))}}t.SshWorkspaceSession=h},function(e,t,n){"use strict";(function(e){var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(4),c=n(10),l=n(241),u=n(352),h=n(135),d=n(65),p=n(588),f=n(134),g=n(353),m=n(0),y=n(354),v=n(589),S=n(355),w=e=>{const{sessionName:t,sourcePort:n,privacy:i,isTCPServerConnectionEstablished:r,hasTLSHandshakePassed:s}=e;return`${t}:${n}:${i}:${r}:${s}`},C=e=>e.map(w);t.DEFAULT_FORWARDING_HOST="127.0.0.1";class b extends f.Connection{constructor(e,t,n,i){super(e.createChild("vscode"),t),this.performance=t,this.options=n,this.connectionHubs=i,this.onVSCodeServerStartedEmitter=new a.Emitter,this.onVSCodeServerStarted=this.onVSCodeServerStartedEmitter.event,this.forecastChannels=[],this.vscodeServerHostClientReference=null,this.sharedServerReference=null,this.liveshareConnectionReference=null,this.serverSharingServiceReference=null,this.remotePortReference=null,this.connectionTokenReference=null}getId(e){const{workspaceId:t,environmentId:n,vsCodeQuality:i,vsCodeCommit:r}=e;return`${t}_${n}_${i}_${r}`}getRpcService(e){return this.workspaceClient.getServiceProxy(e)}get workspaceClient(){o.assertDefined(this.liveshareConnection,"No LiveShare connection found.");const{workspaceClient:e}=this.liveshareConnection;return o.assertDefined(e,"No WorkspaceClient found."),e}get vscodeServerHostClient(){return o.assertDefined(this.vscodeServerHostClientReference,"No VSCodeServerHostClient defined."),this.vscodeServerHostClientReference}get serverSharingService(){return o.assertDefined(this.serverSharingServiceReference,"No ServerSharing service found."),this.serverSharingServiceReference}get liveshareConnection(){return o.assertDefined(this.liveshareConnectionReference,"No LiveShare connection found."),this.liveshareConnectionReference}createConnection(){return s(this,void 0,void 0,(function*(){const[e]=this.connectionHubs;o.assertDefined(e,"LiveShareConnectionHub not found.");try{this.initializeConnection(),this.trace.info("get LS connection"),this.liveshareConnectionReference=yield this.performance.measure({name:"liveshare connection"},()=>s(this,void 0,void 0,(function*(){return yield e.connectOnce(this.options,{performance:this.performance.createGroup("liveshare connection")})}))),this.liveshareConnectionReference.addToDisposables(this),this.addToDisposables(this.liveshareConnectionReference.onConnectionChanged(e=>{const{previousStatus:t,status:n}=e;this.trace.info(`LiveShareConnection status changed: "${t}" -> "${n}"`),this.dispose("LiveShareConnection disconnected")}),this.liveshareConnectionReference.onDispose(e=>{this.trace.info("LiveShareConnection disposed"),this.dispose("LiveShareConnection disposed")}));const{workspaceClient:t}=this.liveshareConnectionReference;yield this.getVSCodeSharedServer(t);for(let e=0;e<b.channelForecast;e++)this.forecastChannels.push(this.openChannel(this.performance,!1));return this.onConnectionChangedHandler("connected"),this}catch(e){throw this.handleConnectionError(e),h.errorToConnectionError(e)}}))}get sharedServer(){return o.assertDefined(this.sharedServerReference,"No SharedServer found."),this.sharedServerReference}getVSCodeSharedServer(e){return s(this,void 0,void 0,(function*(){const t=this.performance.createGroup("share vscode server",u.PerformanceGroupIds.VSCodeServerStartup);this.serverSharingServiceReference=e.getServiceProxy(c.vsls.ServerSharingService);const n=yield t.measure({name:"start vscode server",id:l.PerformanceEventIds.VSCodeServerStartupServerStart},()=>s(this,void 0,void 0,(function*(){return yield this.startVSCodeServer(e)})));return o.assertDefined(n,new d.ConnectionError(`VSCode Server port is "${n}"`)),this.trace.info(`forwarding the VSCode Server port "${n}".`),this.addToDisposables(this.serverSharingService.onSharingStopped(e=>{const{server:t}=e;this.trace.verbose("serverSharingService onSharingStopped:",t),t.sourcePort===n&&(this.trace.info("serverSharingService closed.",t),this.onConnectionChangedHandler("disconnected",new d.ConnectionError("Port closed.")))})),this.sharedServerReference=yield t.measure({name:"share vscode server TCP port",id:l.PerformanceEventIds.VSCodeServerStartupServerTcpPortForwarding},()=>s(this,void 0,void 0,(function*(){const{clientId:e}=this.options;return yield this.serverSharingService.startSharingAsync(n,y.getVSCodeServerSessionName(e),"")}))),this.trace.info(`VSCode Server port "${n}" forwarded.`),this.sharedServerReference}))}getSharedServers(e=3*o.TIME_SECOND_MS){return s(this,void 0,void 0,(function*(){try{const t=yield o.timeoutPromise(this.serverSharingService.getSharedServersAsync(),e,new d.ConnectionError("Getting shared servers timed out."));return this.trace.verbose("got shared servers list",C(t)),t}catch(e){throw this.trace.error("getting shared servers failed: ",e),this.liveshareConnection.dispose(`disposed by vscode connection: "${e.message}"`),e}}))}startVSCodeServer(e){return s(this,void 0,void 0,(function*(){const{shouldReuseExistingServers:t=!1,clientId:n}=this.options;if(this.trace.info("starting vscode server..",this.options),this.vscodeServerHostClientReference=e.getServiceProxy(g.vscodeServerHostRPCService),t){this.trace.info("checking if existing vscode server can be reused");const e=yield this.getSharedServers();this.trace.info("checking already running ports",C(e));const t=e.reverse().find(e=>e.sessionName===y.getVSCodeServerSessionName(n));if(t)return this.remotePortReference=t.sourcePort,this.trace.info("reusing already shared port "+this.remotePortReference),this.onVSCodeServerStartedEmitter.fire({port:this.remotePort,connectionToken:this.connectionToken}),this.remotePortReference}this.trace.info("vscode started, forwarding the server port");const i=yield this.vscodeServerHostClient.startRemoteServerResultAsync(Object.assign(Object.assign({},this.options),{quality:this.options.vsCodeQuality}));return this.remotePortReference=i.port,this.connectionTokenReference=i.connectionToken,this.trace.info("the server port forwarded, port number is "+this.remotePortReference),this.trace.info("vscode server startup complete"),this.onVSCodeServerStartedEmitter.fire({port:this.remotePort,connectionToken:this.connectionToken}),this.remotePort}))}get remotePort(){return o.assertDefined(this.remotePortReference,"No remote port found."),this.remotePortReference}get connectionToken(){return o.assertDefined(this.connectionTokenReference,"Connection token not found."),this.connectionTokenReference}startForwardingPort(e,n=new Set,i=t.DEFAULT_FORWARDING_HOST,r){return s(this,void 0,void 0,(function*(){this.trace.info(`start sharing the port "${e}"`);const t=yield this.getSharedServers(r);return yield this.startForwardingPortCore(t,e,i,n)}))}updateForwardedPortProtocol(e,t,n){return s(this,void 0,void 0,(function*(){this.trace.info(`updating protocol of "${e}" to "${t}"`);const i=yield this.getSharedServers(n),r=p.findSourcePort(i,e);return o.assertDefined(r,`No port "${e}" found.`),yield this.updateForwardedPortProtocolCore(r,e,t)}))}updateForwardedPortPrivacy(e,n,i=new Set,r=t.DEFAULT_FORWARDING_HOST,a){return s(this,void 0,void 0,(function*(){this.trace.info(`updating privacy of "${e}" to "${n}"`);const t=yield this.getSharedServers(a),s=p.findSourcePort(t,e);return o.assertDefined(s,`No port "${e}" found.`),yield this.updateForwardedPortPrivacyCore(s,e,n,i,r)}))}stopForwardingPort(e){return s(this,void 0,void 0,(function*(){const t=this.workspaceClient.getServiceProxy(c.vsls.ServerSharingService);return yield t.stopSharingAsync(e),this}))}openChannel(e=this.performance,t=!0){return s(this,void 0,void 0,(function*(){if(t){const e=this.forecastChannels.shift();if(e)return yield e}const n=this.getRpcService(c.vsls.StreamManagerService),i=yield e.measure({name:"get stream Id",id:o.randomString()},()=>s(this,void 0,void 0,(function*(){return o.assertDefined(this.sharedServer,"No SharedServer found."),yield n.getStreamAsync(this.sharedServer.streamName,this.sharedServer.streamCondition)})));return(yield e.measure({name:`open streaming channel "${i}"`},()=>s(this,void 0,void 0,(function*(){return yield this.workspaceClient.openStreamingChannel(i)}))))||null}))}sendHandshakeRequest(t){return s(this,void 0,void 0,(function*(){const n=new o.Signal;try{this.trace.info("opening ssh channel");const i=yield this.openChannel();o.assertDefined(i,"Cannot open a channel.");const r=i.onDataReceived(e=>{r.dispose(),this.trace.info(`response: \n${e.toString()}\n`),i.adjustWindow(e.length),n.resolve(i)});this.addToDisposables(r),this.trace.info(`sending the request: \n${t}\n`),yield i.send(e.from(t)),this.trace.info("🔌 connected")}catch(e){this.trace.info("failed to send request"),n.reject(e)}return yield n.promise}))}disconnect(e){const t=Object.create(null,{disconnect:{get:()=>super.disconnect}});return s(this,void 0,void 0,(function*(){if(this.trace.info(`disconnecting with reason: "${e}"`),this.isDisconnected)this.trace.info("already disconnected");else{try{this.remotePortReference&&this.serverSharingServiceReference&&(this.trace.info(`stop sharing vscode server port "${this.remotePortReference}"`),yield this.serverSharingService.stopSharingAsync(this.remotePortReference)),yield this.vscodeServerHostClient.shutDownRemoteServerAsync()}catch(e){this.trace.warning("error while disconnecting",e)}finally{this.remotePortReference=null,this.vscodeServerHostClientReference=null}t.disconnect.call(this,e)}}))}startForwardingPortCore(e,n,i=t.DEFAULT_FORWARDING_HOST,r){return s(this,void 0,void 0,(function*(){const t=p.findSourcePort(e,n);if(t)return this.trace.info(`port ${n} is already forwarded.`),t;const s=new v.PortSignal(n,c.vsls.ChangeKind.Start,this.serverSharingService),o=yield this.serverSharingService.startSharingAsync(n,i,"");return S.isVSCodeServerSession(i)||r.has(n)||(yield s.waitForSignal()),o}))}updateForwardedPortProtocolCore(e,t,n){return s(this,void 0,void 0,(function*(){return e.hasTLSHandshakePassed===n?(this.trace.info(`port ${t} protocol is already ${n?"https":"http"}.`),this):(yield this.serverSharingService.updateSharedServerProtocolAsync(t,n),this.trace.info(`port ${t} protocol updated to ${n?"https":"http"}.`),this)}))}updateForwardedPortPrivacyCore(e,n,i,r,o=t.DEFAULT_FORWARDING_HOST){return s(this,void 0,void 0,(function*(){if(e.privacy===i)return this.trace.info(`port ${n} privacy is already ${i}.`),this;const t=new v.PortSignal(n,c.vsls.ChangeKind.Update,this.serverSharingService);return yield this.serverSharingService.updateSharedServerPrivacyAsync(n,i),this.trace.info(`port ${n} privacy updated to ${i}.`),S.isVSCodeServerSession(o)||r.has(n)||(yield t.waitForSignal()),this}))}dispose(e){return null==this.remotePortReference||(this.trace.info(`stopping remote port "${this.remotePortReference}"`),this.stopForwardingPort(this.remotePortReference).catch(e=>{this.trace.warning("failed to stop forwarding vscode server port")})),super.dispose(e)}}b.channelForecast=2,i([m.withHelperDecorator(o.withMutexByArguments,{serializeArguments:(e,n,i=t.DEFAULT_FORWARDING_HOST)=>`${n}_${i}`}),r("design:type",Function),r("design:paramtypes",[Array,Number,String,Set]),r("design:returntype",Promise)],b.prototype,"startForwardingPortCore",null),t.VSCodeConnection=b}).call(this,n(6).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSourcePort=(e,t,n)=>e.find(e=>{const{sourcePort:i,sessionName:r}=e,s=i===t;return n?s&&r===n:s})},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.PortSignal=class{constructor(e,t,n){this.promise=new Promise((function(i,r){n.onSharingSucceeded(n=>{n.port===e&&n.changeKind===t&&i()}),n.onSharingFailed(n=>{n.port===e&&n.changeKind===t&&r(n.errorDetail)})}))}waitForSignal(){return i(this,void 0,void 0,(function*(){try{yield this.promise}catch(e){throw Error(e)}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(226);class s extends r.LiveShareConnection{setWorkspaceSessionInfo(e){this.trace.verbose("setWorkspaceSessionInfo",e);const{ownerId:t,sessionNumber:n,sessions:r}=e;i.assertDefined(t,"No owner id defined."),this.trace.info(`ownerId: "${t}"`),i.assert(!t.startsWith("vm_"),"Session host is not updated to the user, retrying..."),i.assertDefined(r,"Workspace sessions not defined.");const s=r[n];i.assertDefined(s,`Session #${n} not defined.`),i.assert(s.isOwner,"Session does not have owner permissions"),super.setWorkspaceSessionInfo(e)}}t.CodespaceConnection=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(226);class o extends s.LiveShareConnection{constructor(e,t,n,i){super(e.createChild("liveshare-joint"),t,n),this.performance=t,this.options=n,this.connectionHubs=i,this.connectionReference=null}get type(){return r.assertDefined(this.connectionReference,""),this.connectionReference.type}get workspaceSessionInfo(){if(this.connectionReference)return this.connectionReference.workspaceSessionInfo}get connection(){return this.connectionReference}createConnection(){return i(this,void 0,void 0,(function*(){try{this.trace.info("creating connection"),this.connectionSignal=new r.Signal,this.addToDisposables(this.connectionSignal),this.onConnectionChangedHandler("connecting");const e=this.connectionHubs.map((e,t)=>e.connectOnce(this.options,{performance:this.performance.createGroup("connection #"+t)})),t=yield r.raceAsync(e);return t.addToDisposables(this),r.assertDefined(this.connectionSignal,"No connection signal found."),this.connectionReference=t,this.workspaceClientReference=t.workspaceClient,this.addToDisposables(t),this.addToDisposables(t.onConnectionChanged(this.onConnectionChangedEventEmitter.fire.bind(t))),this.onConnectionChangedHandler("connected"),this}catch(e){throw this.handleConnectionError(e),e}}))}}t.LiveShareJointConnection=o},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(134);class o extends s.Connection{constructor(e,t,n,i){super(e.createChild("vscode-joint"),t),this.performance=t,this.options=n,this.connectionHubs=i,this.connectionReference=null}getSharedServers(){throw new r.NotImplementedError("Method not implemented.")}get vscodeServerHostClient(){return r.assertDefined(this.connectionReference,"No connection found."),this.connectionReference.vscodeServerHostClient}get serverSharingService(){return r.assertDefined(this.connectionReference,"No connection found."),this.connectionReference.serverSharingService}getRpcService(e){throw new Error("Method not implemented.")}get connection(){return r.assertDefined(this.connectionReference,"No connection found."),this.connectionReference}get workspaceClient(){r.assertDefined(this.connectionReference,"No connection found.");const{liveshareConnection:e}=this.connectionReference;return r.assertDefined(e,"No LiveShare connection found."),e.workspaceClient}get liveshareConnection(){var e,t;return r.assertDefined(null===(e=this.connectionReference)||void 0===e?void 0:e.liveshareConnection,"No LiveShare conneciton found."),null===(t=this.connectionReference)||void 0===t?void 0:t.liveshareConnection}get sharedServer(){return this.connection.sharedServer}openChannel(e){var t;return i(this,void 0,void 0,(function*(){const n=yield null===(t=this.connectionReference)||void 0===t?void 0:t.openChannel(e);return null!=n?n:null}))}get onVSCodeServerStarted(){return this.connection.onVSCodeServerStarted}get remotePort(){return r.assertDefined(this.connectionReference,"No connection found."),this.connectionReference.remotePort}get connectionToken(){return r.assertDefined(this.connectionReference,"Connection token not found."),this.connectionReference.connectionToken}startForwardingPort(e){return i(this,void 0,void 0,(function*(){return yield this.connection.startForwardingPort(e)}))}updateForwardedPortProtocol(e,t){return i(this,void 0,void 0,(function*(){return yield this.connection.updateForwardedPortProtocol(e,t),this}))}updateForwardedPortPrivacy(e,t){return i(this,void 0,void 0,(function*(){return yield this.connection.updateForwardedPortPrivacy(e,t),this}))}stopForwardingPort(e){var t;return i(this,void 0,void 0,(function*(){return yield null===(t=this.connection)||void 0===t?void 0:t.stopForwardingPort(e),this}))}sendHandshakeRequest(e){return i(this,void 0,void 0,(function*(){return yield this.connection.sendHandshakeRequest(e)}))}createConnectionMock(){return i(this,void 0,void 0,(function*(){try{this.trace.info("creating connection"),this.connectionSignal=new r.Signal,this.addToDisposables(this.connectionSignal);const[e,t]=this.connectionHubs;r.assertDefined(e,"No VSCode ConnectionHub found."),r.assertDefined(t,"No Remote VSCode ConnectionHub found."),this.onConnectionChangedHandler("connecting");const n=yield r.raceAsync([e.connectOnce(this.options,{performance:this.performance.createGroup("main-thread")}),t.connectOnce(this.options,{performance:this.performance.createGroup("service-worker")})]);return r.assertDefined(this.connectionSignal,"No connection signal found."),r.assertDefined(n.liveshareConnection,"Connected but no LiveShare connection found."),this.connectionReference=n,this.addToDisposables(n),this.addToDisposables(n.onConnectionChanged(this.onConnectionChangedEventEmitter.fire.bind(n))),this.connectionSignal.resolve(this),r.defer(()=>{this.onConnectionChangedHandler("connected")}),this}catch(e){throw this.handleConnectionError(e),e}}))}}t.VSCodeJointConnection=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HUB_CONNECTION_DEFAULT_OPTIONS={retries:3,retryDelay:0,timeout:1/0,shouldReconnect:!0},t.HUB_NO_RETRY_OPTIONS=Object.assign(Object.assign({},t.HUB_CONNECTION_DEFAULT_OPTIONS),{retries:0,shouldReconnect:!1})},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class s extends r.DisposableClass{constructor(e,t,n,i,r){super(e),this.connectionArg=t,this.connectionOptionsArg=n,this.hubConnectionOptionsArg=i,this.eventHandlerArg=r,this.addToDisposables(r,t)}get connection(){return this.connectionArg}get connectionOptions(){return this.connectionOptionsArg}get hubConnectionOptions(){return this.hubConnectionOptionsArg}get eventHandler(){return this.eventHandlerArg}disconnect(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){return yield this.connection.disconnect(e),t.dispose.call(this,e)}))}}t.ConnectionHubRecord=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(180);t.isCodespacesInternalSession=e=>e.startsWith(i.CODESPACES_PORT_NAME)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65);t.ConnectionError=i.ConnectionError;var r=n(225);t.ConnectionTimeoutError=r.ConnectionTimeoutError;var s=n(331);t.ConnectionStateError=s.ConnectionStateError;var o=n(224);t.ConnectionCancellationError=o.ConnectionCancellationError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(598);t.VSCodeConnectionMock=i.VSCodeConnectionMock;var r=n(599);t.ConnectionHubMock=r.ConnectionHubMock;var s=n(242);t.ConnectionMock=s.ConnectionMock,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(600))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(242);class s extends r.ConnectionMock{constructor(){super(...arguments),this.onVSCodeServerStarted=(new i.Emitter).event}get workspaceClient(){return{}}get liveshareConnection(){return{}}get vscodeServerHostClient(){return{}}sendHandshakeRequest(e){return{}}openChannel(e){return Promise.resolve(null)}startForwardingPort(e){return Promise.resolve({})}stopForwardingPort(e){return Promise.resolve(this)}updateForwardedPortProtocol(e,t){return Promise.resolve(this)}updateForwardedPortPrivacy(e,t){return Promise.resolve(this)}get serverSharingService(){return{}}get sharedServer(){return{}}get remotePort(){return 0}get connectionToken(){return""}getSharedServers(){throw new Error("Method not implemented.")}getRpcService(e){throw new Error("Method not implemented.")}}t.VSCodeConnectionMock=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(356);class o extends s.ConnectionHub{constructor(){super(...arguments),this.mockCreateConnectionFail=(e,t=1)=>{this.createConnection=()=>i(this,void 0,void 0,(function*(){throw yield r.wait(t),e}))}}getConnectionIdMock(e){return this.getConnectionId(e)}getConnectionMock(e){const t=this.getConnectionId(e),n=this.connections[t];return n?n.connection:void 0}getConnectionRecordMock(e){const t=this.getConnectionId(e);return this.connections[t]}}t.ConnectionHubMock=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(601);t.getConnectionHubMockOptions=i.getConnectionHubMockOptions;var r=n(357);t.getConnectionMockOptions=r.getConnectionMockOptions;var s=n(602);t.getLiveShareConnectionMockOptions=s.getLiveShareConnectionMockOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(61),r=n(17),s=n(242);t.testTrace=new r.TraceSource("test-trace"),t.performance=i.initializePerformanceInstance("test:start"),t.getConnectionHubMockOptions=(e={})=>{const{trace:n=t.testTrace,childHubs:i}=e;return[n,t.performance,s.ConnectionMock,i]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),r=n(0),s=n(357);t.testTrace=new i.TraceSource(r.randomString()),t.getRandomLiveShareMockOptions=()=>({liveShareEndpoint:"mock-liveshare-endpoint",workspaceId:"mock-id",connectionInfo:{id:"mock-connection-id",relayLink:"sb://test-namespace.servicebus.windows.net/anyEndpointId",relaySas:"mock-relay",hostPublicKeys:["mock-host-public-key"],sessionToken:"mock-session-token"},token:"mock-token",id:"mock-id",someProp:"mock-prop",numericProp:12345}),t.getLiveShareConnectionMockOptions=(e={})=>{const{trace:n=t.testTrace}=e;return[n,new s.PerformanceMock("test-performance","test-start","test-path-string"),Object.assign({},t.getRandomLiveShareMockOptions())]}},,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceHubClient=void 0;const a=s(n(4)),c=n(17),l=n(36),u=n(31),h=n(606),d=n(0);class p extends d.DisposableClass{constructor(e,t){super(t),this.multiChannelRpcClient=e,this.onHostConnectionChangedEmitter=new a.Emitter,this.onWorkspaceMetricsUpdatedEmitter=new a.Emitter,this.onHostConnectionChanged=this.onHostConnectionChangedEmitter.event,this.onWorkspaceMetricsUpdated=this.onWorkspaceMetricsUpdatedEmitter.event;const n=e=>{this.onHostConnectionChangedEmitter.fire(e)};let i=!1;const r=(e,r)=>{i||(t.info("firing host connection closed -> reason:"+e),i=!0,n(null!=r?r:{state:l.ConnectedState.Closed,duration:0}),this.disconnect().catch(e=>{t.info("error while disconnecting workspace hub client",d.errorToObject(e))}),this.dispose("host connection closed"))};e.rpcConnection.onDispose(()=>{r("onDisposed"),this.isDisposed||t.warning("Rpc connection was disposed from our hub service")});const s=t.createChild("rpc");this.workspaceServiceClient=u.RpcProxy.create(l.workspaceServiceClient,this.rpcClient,new c.Logger(t.name,(e,t,...n)=>{t.startsWith("> workspaceServiceClient.workspaceMetricsUpdated")||t.includes("workspaceServiceClient.checkConnection()")||s.log(e,t,...n)})),this.workspaceServiceClient.onHostConnectionChanged(e=>{e.workspaceId===this.joinedWorkspaceId&&(e.state===l.ConnectedState.Closed?r("onHostConnectionChanged",e):n(e))}),this.workspaceServiceClient.onWorkspaceMetricsUpdated(e=>{e.workspaceId===this.joinedWorkspaceId&&this.onWorkspaceMetricsUpdatedEmitter.fire(e)}),this.addToDisposables({dispose:()=>r("disposed")},e),this.rpcProxyCache=new u.RpcProxyCache(this.multiChannelRpcClient,t)}static create(e,t){return o(this,void 0,void 0,(function*(){const n=yield h.createMultiChannelRpcClient(e,t);return new p(n,t)}))}get rpcClient(){return this.multiChannelRpcClient}getServiceProxy(e){return this.rpcProxyCache.getOrCreate(e)}join(e){return o(this,void 0,void 0,(function*(){const t=Date.now(),n=e.workspaceId;let i;if(e.sessionInfoFactory&&(i=yield this.workspaceServiceClient.getSessionInfoAsync(n)),!i)try{const t=Object.assign({},e);["performance","sessionInfoFactory"].forEach(e=>delete t[e]),Object.keys(t).filter(e=>e.startsWith("mock")).forEach(e=>delete t[e]),e.sessionInfoFactory&&(t.connectionInfo=yield e.sessionInfoFactory(n)),i=yield this.workspaceServiceClient.joinAsync(t)}catch(e){if(e instanceof a.ResponseError){if(e.code===l.RPC_ERR_NO_HOST_NOT_CONNECTED)throw new l.NoHostConnectedError(e.data);if(e.code===l.RPC_ERR_RELAY_CONNECTIONY_SSH)throw new l.RelayConnectionError(e.message,e.data)}throw e}this.joinedWorkspaceId=n;const r=(Date.now()-t).toFixed(1);return this.trace.info(`join completed -> time:${r} session:${i.sessionNumber} conversation:${i.conversationId}`),i}))}openStreamingChannel(e,t){return o(this,void 0,void 0,(function*(){d.assertDefined(this.joinedWorkspaceId,"Workspace not joined.");const[n]=yield Promise.all([this.multiChannelRpcClient.multiChannelStream.openChannel(),this.workspaceServiceClient.openStreamingChannelAsync(this.joinedWorkspaceId,e,null!=t?t:a.CancellationToken.None)]);return n}))}disconnect(){return o(this,void 0,void 0,(function*(){d.assertDefined(this.joinedWorkspaceId,"workspace not joined"),yield this.workspaceServiceClient.disconnectAsync(this.joinedWorkspaceId),this.dispose()}))}keepAlive(e){return this.workspaceServiceClient.keepAliveAsync(e)}checkConnection(e){return o(this,void 0,void 0,(function*(){d.assertDefined(this.joinedWorkspaceId,"workspace not joined"),yield this.workspaceServiceClient.checkConnectionAsync(this.joinedWorkspaceId,e)}))}setCheckConnectionOptions(e){return o(this,void 0,void 0,(function*(){d.assertDefined(this.joinedWorkspaceId,"workspace not joined"),yield this.workspaceServiceClient.setCheckConnectionOptionsAsync(this.joinedWorkspaceId,e)}))}}t.WorkspaceHubClient=p},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createDuplexMultiChannelRpcClient=t.createDuplexStreams=t.MultiChannelRpcServer=t.SshRpcServer=void 0;var s=n(607);Object.defineProperty(t,"SshRpcServer",{enumerable:!0,get:function(){return s.SshRpcServer}});var o=n(608);Object.defineProperty(t,"MultiChannelRpcServer",{enumerable:!0,get:function(){return o.MultiChannelRpcServer}});var a=n(358);Object.defineProperty(t,"createDuplexStreams",{enumerable:!0,get:function(){return a.createDuplexStreams}});var c=n(609);Object.defineProperty(t,"createDuplexMultiChannelRpcClient",{enumerable:!0,get:function(){return c.createDuplexMultiChannelRpcClient}}),r(n(359),t)},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SshRpcServer=void 0;const a=n(31),c=n(0),l=s(n(23)),u=n(0),h=s(n(4));class d extends a.RpcServer{constructor(e,t){super(t),this.sshPrivateKeys=e,this.rpcServerProviders=[],this.reconnectableSessions=[],this.rpcSessions=new Map,this.onSessionClosedEmitter=new h.Emitter,this.onUserAuthenticateCallbacks=new u.CallbackContainer,this.sshServerSessionNumber=0,this.onSessionClosed=this.onSessionClosedEmitter.event}dispose(e){this.reconnectableSessions.forEach(e=>e.dispose()),super.dispose(e)}acceptConnections(e){return o(this,void 0,void 0,(function*(){yield Promise.all(this.rpcServerProviders.map(t=>t.acceptConnections(e)))}))}registerRpcServerProvider(e){this.rpcServerProviders.push(e);const t=e.onRpcStreamJoined(t=>{this.acceptRpcStream(e.name,t).catch(e=>{this.trace.error("Failed to accept rpc stream",e)})});return{dispose:()=>o(this,void 0,void 0,(function*(){this.trace.info("unregister rpc server provider:"+e.name),t.dispose();const n=this.rpcServerProviders.indexOf(e);-1!==n&&this.rpcServerProviders.splice(n,1),"function"==typeof e.dispose&&(this.trace.verbose("dispose rpc server provider:"+e.name),yield e.dispose())}))}}onUserAuthenticate(e){return this.onUserAuthenticateCallbacks.add(e)}closeSshSession(e){return o(this,void 0,void 0,(function*(){const t=this.getSshSession(e);t&&(yield t.close(l.SshDisconnectReason.byApplication))}))}getSshSession(e){return this.rpcSessions.get(e)}acceptRpcStream(e,t){return o(this,void 0,void 0,(function*(){const n=yield function(e,t,n,i,r){return o(this,void 0,void 0,(function*(){n.verbose("Created socket stream");const s=yield function(e){const t=new l.SshSessionConfiguration;return t.keyExchangeAlgorithms.splice(0),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.ecdhNistp384Sha384),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.ecdhNistp256Sha256),t.keyExchangeAlgorithms.push(l.SshAlgorithms.keyExchange.dhGroup14Sha256),t.protocolExtensions.push(l.SshProtocolExtensionNames.sessionReconnect),t.protocolExtensions.push(l.SshProtocolExtensionNames.sessionLatency),new l.SshServerSession(t,e)}(r);n.verbose("created SSH server session"),s.credentials={publicKeys:t},s.onAuthenticating(e=>{const t=e.password;n.verbose("authenticating request"),null!==t&&(e.authenticationPromise=i(t))}),s.onChannelOpening(e=>{void 0===s.principal&&(n.error("unauthenticated request"),e.failureReason=l.SshChannelOpenFailureReason.administrativelyProhibited,e.failureDescription="Not authenticated")});const o=s.onChannelOpening(e=>{e.channel.onRequest(e=>{e.isAuthorized="json-rpc"===e.requestType,n.info("rpc channel opening request "+e.requestType),o.dispose()})});yield s.connect(e),n.verbose("connected to server session");const a=yield s.acceptChannel();return n.verbose("opened channel "+a.channelId),a}))}(t,this.sshPrivateKeys,this.trace,e=>o(this,void 0,void 0,(function*(){for(const t of this.onUserAuthenticateCallbacks.items){const n=yield t(e);if(void 0!==n)return n}})),this.reconnectableSessions),i=++this.sshServerSessionNumber;this.trace.verbose(`Created ssh server session:${i} for provider:${e}`);const r=n.session;let s;const a=e=>{this.trace.verbose(`ssh server session:${i} closed reason:${e}`),this.onSessionClosedEmitter.fire(s),this.rpcSessions.delete(s)};r.onDisconnected(e=>o(this,void 0,void 0,(function*(){this.trace.info(`Disconnected server session:${i} waiting to reconnect.`);let e=!1;r.onReconnected(t=>{this.trace.info("Reconnected server session:"+i),e=!0}),yield c.wait(6e4),e||(this.trace.info(`Closing disconnected server session:${i} because the client has not reconnected within the timeout.`),yield r.close(l.SshDisconnectReason.connectionLost),a(l.SshDisconnectReason.connectionLost))})));const u=new l.SshRpcMessageStream(n);s=this.acceptRpcMessageStream(u)[0],s.listen(),this.rpcSessions.set(s,r),r.onClosed(e=>a(e.reason))}))}}t.SshRpcServer=d},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannelRpcServer=void 0;const a=n(31),c=s(n(23)),l=s(n(4));class u extends a.RpcServer{constructor(){super(...arguments),this.acceptedStreams=new Map,this.onRpcConnectionDisposedEmitter=new l.Emitter,this.onRpcConnectionDisposed=this.onRpcConnectionDisposedEmitter.event}acceptStream(e){return o(this,void 0,void 0,(function*(){const t=new c.MultiChannelStream(e),n=yield t.acceptChannel(),i=new c.SshRpcMessageStream(n),r=this.acceptRpcMessageStream(i),s=r[0];this.acceptedStreams.set(s,t);const a=e.closed(()=>{a.dispose(),s.dispose()});return s.onDispose(t=>o(this,void 0,void 0,(function*(){a.dispose(),this.acceptedStreams.delete(s),this.onRpcConnectionDisposedEmitter.fire(s),e.isDisposed||(yield e.close())}))),r}))}getMultiChannelStream(e){return this.acceptedStreams.get(e)}}t.MultiChannelRpcServer=u},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createDuplexMultiChannelRpcClient=void 0;const r=n(358),s=n(359);t.createDuplexMultiChannelRpcClient=function(e,t){return i(this,void 0,void 0,(function*(){const[n,i]=r.createDuplexStreams(),o=e.acceptStream(n),a=s.createMultiChannelRpcClient(i,t),[c,l]=yield Promise.all([o,a]);return c[0].listen(),l}))}}]]);
//# sourceMappingURL=vendors~webeditor~workbench.50175466.chunk.js.map